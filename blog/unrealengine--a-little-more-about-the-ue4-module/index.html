<!doctype html>
<html data-n-head-ssr lang="ja" prefix="og: http://ogp.me/ns#" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22ja%22%7D,%22prefix%22:%7B%22ssr%22:%22og:%20http://ogp.me/ns#%22%7D%7D">
  <head>
    <title>ちょっとだけくわしくUE4 モジュールの話 - strv.dev</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><meta data-n-head="ssr" data-hid="og:locale" property="og:locale" content="ja_jp"><meta data-n-head="ssr" data-hid="og:site_name" property="og:site_name" content="strv.dev"><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="article"><meta data-n-head="ssr" name="twitter:card" content="summary_large_image"><meta data-n-head="ssr" name="twitter:creator" content="@strvert"><meta data-n-head="ssr" data-hid="description" name="description" content="UE4のモジュールシステムについて、すこしだけ詳しく書いた記事"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="UE4のモジュールシステムについて、すこしだけ詳しく書いた記事"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https://strv.dev/blog/unrealengine--a-little-more-about-the-ue4-module"><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="ちょっとだけくわしくUE4 モジュールの話 - strv.dev"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://strv.dev/images/ogp/generated/unrealengine--a-little-more-about-the-ue4-module.png"><link data-n-head="ssr" data-hid="gf-prefetch" rel="dns-prefetch" href="https://fonts.gstatic.com/"><link data-n-head="ssr" data-hid="gf-preconnect" rel="preconnect" href="https://fonts.gstatic.com/" crossorigin=""><link data-n-head="ssr" data-hid="gf-preload" rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=M PLUS 1:wght@200;300;400;600&family=Source Code Pro:wght@300;400&display=swap"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="apple-touch-icon" type="image/png" href="/apple-touch-icon-180x180.png"><link data-n-head="ssr" rel="icon" type="image/png" href="/icon-192x192.png"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link data-n-head="ssr" rel="stylesheet" href="https://cdn.iconmonstr.com/1.3.0/css/iconmonstr-iconic-font.min.css"><link data-n-head="ssr" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css"><script data-n-head="ssr" src="https://www.googletagmanager.com/gtag/js?id=G-7CSGM5KZ9W" async></script><script data-n-head="ssr" data-hid="gf-script">!function(){var e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=M PLUS 1:wght@200;300;400;600&family=Source Code Pro:wght@300;400&display=swap",document.querySelector("head").appendChild(e)}()</script><noscript data-n-head="ssr" data-hid="gf-noscript"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=M PLUS 1:wght@200;300;400;600&family=Source Code Pro:wght@300;400&display=swap"></noscript><link rel="preload" href="/_nuxt/runtime.5493da2.js" as="script"><link rel="preload" href="/_nuxt/commons/app.d8c8a15.js" as="script"><link rel="preload" href="/_nuxt/vendors/app.50be47b.js" as="script"><link rel="preload" href="/_nuxt/app.421d0ed.js" as="script"><link rel="preload" href="/_nuxt/pages/blog/_blogpost.f2e9a06.js" as="script"><link rel="preload" href="/_nuxt/components/atoms-blogpost-frame.bfd4ae4.js" as="script"><style data-vue-ssr-id="5f655f6e:0 e0c2e3f4:0 1e38ac46:0 30178fb4:0 0d0f8c20:0 efa3685a:0 6f59ad13:0 4fe6bba3:0 4f708215:0 519f442c:0 1ffacb4b:0 5baef921:0 21c0f031:0 960d08a4:0 46b5b2f1:0 a1473730:0 698678c4:0 49d44ae3:0 513d0dee:0 00512ee8:0 cb9a5eee:0 31bee032:0 0cbf0b3c:0 06d41f1b:0">*,:after,:before{box-sizing:border-box}:after,:before{text-decoration:inherit;vertical-align:inherit}html{cursor:default;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;word-break:break-word}body{margin:0}h1{font-size:2em;margin:.67em 0}dl dl,dl ol,dl ul,ol dl,ol ol,ol ul,ul dl,ul ol,ul ul{margin:0}hr{height:0;overflow:visible}main{display:block}nav ol,nav ul{list-style:none;padding:0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}audio,canvas,iframe,img,svg,video{vertical-align:middle}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}iframe,img{border-style:none}svg:not([fill]){fill:currentColor}svg:not(:root){overflow:hidden}table{border-collapse:collapse}button,input,select{margin:0}button{overflow:visible;text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}fieldset{border:1px solid #a0a0a0;padding:.35em .75em .625em}input{overflow:visible}legend{color:inherit;display:table;max-width:100%;white-space:normal}progress{display:inline-block;vertical-align:baseline}select{text-transform:none}textarea{margin:0;overflow:auto;resize:vertical}[type=checkbox],[type=radio]{padding:0}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}details,dialog{display:block}dialog{background-color:#fff;border:solid;color:#000;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;left:0;margin:auto;padding:1em;position:absolute;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}dialog:not([open]){display:none}summary{display:list-item}canvas{display:inline-block}template{display:none}[tabindex],a,area,button,input,label,select,summary,textarea{touch-action:manipulation}[hidden]{display:none}[aria-busy=true]{cursor:progress}[aria-controls]{cursor:pointer}[aria-disabled=true],[disabled]{cursor:not-allowed}[aria-hidden=false][hidden]{display:initial}[aria-hidden=false][hidden]:not(:focus){clip:rect(0,0,0,0);position:absolute}html{font-family:"M PLUS 1",-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN","Hiragino Sans",Meiryo,sans-serif,"Segoe UI Emoji";font-size:15px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;word-wrap:break-word;word-break:break-word;color:var(--strvdev-text-color);background-color:var(--strvdev-bg-color);block-size:100%;scroll-behavior:smooth}body{overflow-x:hidden}a{color:var(--strvdev-link-color);-webkit-text-decoration-line:none;text-decoration-line:none;text-decoration-thickness:.07em}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline;-webkit-text-decoration-style:dashed;text-decoration-style:dashed}::-webkit-scrollbar{background:#c9c9c9;inline-size:7.5px;block-size:7.5px}::-webkit-scrollbar-thumb{background:#808494;border-radius:5px}::-moz-selection{text-shadow:none;background:#a3c4fc}::selection{text-shadow:none;background:#a3c4fc}[v-cloak]{opacity:0}.page-enter-active,.page-leave-active{transition-property:opacity height block-size transform;transition-duration:.2s}.page-enter,.page-leave-to{opacity:0}.inverse-page-enter-active,.inverse-page-leave-active,.layout-enter-active,.layout-leave-active{transition-property:opacity height block-size transform;transition-duration:.2s}.layout-enter,.layout-leave-to{opacity:0}.inverse-layout-enter-active,.inverse-layout-leave-active{transition-property:opacity height block-size transform;transition-duration:.2s}.blogpost .nuxt-content{--header-height:44px}.blogpost .nuxt-content .headers-border,.blogpost .nuxt-content h1{border-bottom:2px solid;border-color:rgba(0,0,0,.13333333333333333)}.blogpost .nuxt-content h1,.blogpost .nuxt-content h2,.blogpost .nuxt-content h3,.blogpost .nuxt-content h4,.blogpost .nuxt-content h5,.blogpost .nuxt-content h6{position:relative;-webkit-padding-before:var(--header-height);padding-block-start:var(--header-height);-webkit-margin-before:calc(var(--header-height)*-1);margin-block-start:calc(var(--header-height)*-1)}.blogpost .nuxt-content h1:hover a:before,.blogpost .nuxt-content h2:hover a:before,.blogpost .nuxt-content h3:hover a:before,.blogpost .nuxt-content h4:hover a:before,.blogpost .nuxt-content h5:hover a:before,.blogpost .nuxt-content h6:hover a:before{content:"§";display:block;inline-size:2em;position:absolute;font-size:1em;left:-1em;bottom:.05em}.blogpost .nuxt-content h1{font-size:1.7rem}.blogpost .nuxt-content h4{font-size:1.04rem}.blogpost .nuxt-content .inline-code,.blogpost .nuxt-content li code,.blogpost .nuxt-content p code,.blogpost .nuxt-content table tbody code{font-family:var(--source-code-font);background-color:var(--strvdev-blogpost-code);border-radius:4px;margin:0 .2em;padding:0 .2em}.blogpost .nuxt-content p{font-size:1.08rem;letter-spacing:.03em;line-height:3ex}.blogpost .nuxt-content .blueprint-renderer,.blogpost .nuxt-content .code-extra pre,.blogpost .nuxt-content img,.blogpost .nuxt-content table,.blogpost .nuxt-content video{box-shadow:5px 5px 7px 2px rgba(0,0,0,.0392156862745098)}.blogpost .nuxt-content .code-extra{-webkit-margin-after:1.5rem;margin-block-end:1.5rem}.blogpost .nuxt-content .code-extra pre{margin:0;border-radius:5px;border:2px solid rgba(0,0,0,.13333333333333333);-webkit-padding-before:2rem;padding-block-start:2rem;-webkit-padding-after:1rem;padding-block-end:1rem}.blogpost .nuxt-content .code-extra pre code{font-family:var(--source-code-font)}.blogpost .nuxt-content .code-extra .nuxt-content-highlight{position:relative}.blogpost .nuxt-content .code-extra .filename{position:absolute;font-size:.85rem;padding:4px 6px 4px 8px;border-radius:4px;background-color:rgba(0,0,0,.0392156862745098);font-family:var(--source-code-font);z-index:50}.blogpost .nuxt-content img{display:block;position:relative;left:50%;transform:translateX(-50%);max-inline-size:70%;border-radius:4px;z-index:10;transition-property:max-inline-size position;transition-duration:.5s}.blogpost .nuxt-content img:hover{max-inline-size:85vw;z-index:11}.blogpost .nuxt-content video{display:block;margin:0 auto;max-inline-size:100%;min-inline-size:70%;border-radius:4px}.blogpost .nuxt-content table{inline-size:100%}.blogpost .nuxt-content table thead{border-radius:40px;background-color:var(--strvdev-palette-4);color:hsla(0,0%,100%,.8509803921568627)}.blogpost .nuxt-content table tbody code{background-color:hsla(0,0%,100%,.3137254901960784)}.blogpost .nuxt-content table tbody tr:nth-child(2n){background-color:#ccc}.blogpost .nuxt-content table tbody td{padding:.5em}.blogpost .nuxt-content .blueprint-renderer{display:block;inline-size:100%;block-size:500px;border-radius:4px;margin-top:15px;margin-bottom:15px}.blogpost .nuxt-content .footnotes li{-webkit-padding-before:var(--header-height);padding-block-start:var(--header-height);-webkit-margin-before:calc(var(--header-height)*-1);margin-block-start:calc(var(--header-height)*-1)}.blogpost .nuxt-content .katex{font-size:1.3em}:root{--source-code-font:"Source Code Pro";--strvdev-palette-1:#d9dbd9;--strvdev-palette-2:#7ac292;--strvdev-palette-3:#505464;--strvdev-palette-4:#273134;--strvdev-palette-5:#4174a5;--strvdev-palette-6:#a61010;--strvdev-blogpost-code:hsla(0,0%,100%,0.5647058823529412);--strvdev-blogpost-tag:#d1d3d1;--strvdev-bg-color:var(--strvdev-palette-1);--strvdev-text-color:var(--strvdev-palette-4);--strvdev-link-color:var(--strvdev-palette-5);--default-margin-block-start:80px}code[class*=language-],pre[class*=language-]{background:#fafafa;color:#383a42;font-family:"Fira Code","Fira Mono",Menlo,Consolas,"DejaVu Sans Mono",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#e5e5e6;color:inherit}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#e5e5e6;color:inherit}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection{background:#e5e5e6;color:inherit}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-]{padding:.2em .3em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.prolog{color:#a0a1a7}.token.doctype,.token.entity,.token.punctuation{color:#383a42}.token.atrule,.token.attr-name,.token.boolean,.token.class-name,.token.constant,.token.number{color:#b76b01}.token.keyword{color:#a626a4}.token.deleted,.token.important,.token.property,.token.symbol,.token.tag{color:#e45649}.token.attr-value,.token.attr-value>.token.punctuation,.token.builtin,.token.char,.token.inserted,.token.regex,.token.selector,.token.string{color:#50a14f}.token.function,.token.operator,.token.variable{color:#4078f2}.token.url{color:#0184bc}.token.attr-value>.token.punctuation.attr-equals,.token.special-attr>.token.attr-value>.token.value.css{color:#383a42}.language-css .token.selector{color:#e45649}.language-css .token.property{color:#383a42}.language-css .token.function,.language-css .token.url>.token.function{color:#0184bc}.language-css .token.url>.token.string.url{color:#50a14f}.language-css .token.atrule .token.rule,.language-css .token.important,.language-javascript .token.operator{color:#a626a4}.language-javascript .token.template-string>.token.interpolation>.token.interpolation-punctuation.punctuation{color:#ca1243}.language-json .token.operator{color:#383a42}.language-json .token.null.keyword{color:#b76b01}.language-markdown .token.url,.language-markdown .token.url-reference.url>.token.string,.language-markdown .token.url>.token.operator{color:#383a42}.language-markdown .token.url>.token.content{color:#4078f2}.language-markdown .token.url-reference.url,.language-markdown .token.url>.token.url{color:#0184bc}.language-markdown .token.blockquote.punctuation,.language-markdown .token.hr.punctuation{color:#a0a1a7;font-style:italic}.language-markdown .token.code-snippet{color:#50a14f}.language-markdown .token.bold .token.content{color:#b76b01}.language-markdown .token.italic .token.content{color:#a626a4}.language-markdown .token.list.punctuation,.language-markdown .token.strike .token.content,.language-markdown .token.strike .token.punctuation,.language-markdown .token.title.important>.token.punctuation{color:#e45649}.token.bold{font-weight:700}.token.comment,.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.8}.token.token.cr:before,.token.token.lf:before,.token.token.space:before,.token.token.tab:not(:empty):before{color:rgba(56,58,66,.2)}div.code-toolbar>.toolbar.toolbar>.toolbar-item{margin-right:.4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span{background:#e5e5e6;color:#696c77;padding:.1em .4em;border-radius:.3em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:hover{background:#c6c7c7;color:#383a42}.line-highlight.line-highlight{background:rgba(56,58,66,.05)}.line-highlight.line-highlight:before,.line-highlight.line-highlight[data-end]:after{background:#e5e5e6;color:#383a42;padding:.1em .6em;border-radius:.3em;box-shadow:0 2px 0 0 rgba(0,0,0,.2)}pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:rgba(56,58,66,.05)}.command-line .command-line-prompt,.line-numbers.line-numbers .line-numbers-rows{border-right-color:rgba(56,58,66,.2)}.command-line .command-line-prompt>span:before,.line-numbers .line-numbers-rows>span:before{color:#9d9d9f}.rainbow-braces .token.token.punctuation.brace-level-1,.rainbow-braces .token.token.punctuation.brace-level-5,.rainbow-braces .token.token.punctuation.brace-level-9{color:#e45649}.rainbow-braces .token.token.punctuation.brace-level-10,.rainbow-braces .token.token.punctuation.brace-level-2,.rainbow-braces .token.token.punctuation.brace-level-6{color:#50a14f}.rainbow-braces .token.token.punctuation.brace-level-11,.rainbow-braces .token.token.punctuation.brace-level-3,.rainbow-braces .token.token.punctuation.brace-level-7{color:#4078f2}.rainbow-braces .token.token.punctuation.brace-level-12,.rainbow-braces .token.token.punctuation.brace-level-4,.rainbow-braces .token.token.punctuation.brace-level-8{color:#a626a4}pre.diff-highlight>code .token.token.deleted:not(.prefix),pre>code.diff-highlight .token.token.deleted:not(.prefix){background-color:rgba(255,82,102,.15)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix),pre>code.diff-highlight .token.token.inserted:not(.prefix){background-color:rgba(26,255,91,.15)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection{background-color:rgba(57,224,98,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection{background-color:rgba(57,224,98,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::selection{background-color:rgba(57,224,98,.25)}.prism-previewer-gradient.prism-previewer-gradient div,.prism-previewer.prism-previewer:before{border-color:#f2f2f2}.prism-previewer-color.prism-previewer-color:before,.prism-previewer-easing.prism-previewer-easing:before,.prism-previewer-gradient.prism-previewer-gradient div{border-radius:.3em}.prism-previewer.prism-previewer:after{border-top-color:#f2f2f2}.prism-previewer-flipped.prism-previewer-flipped.after{border-bottom-color:#f2f2f2}.prism-previewer-angle.prism-previewer-angle:before,.prism-previewer-easing.prism-previewer-easing,.prism-previewer-time.prism-previewer-time:before{background:#fff}.prism-previewer-angle.prism-previewer-angle circle,.prism-previewer-time.prism-previewer-time circle{stroke:#383a42;stroke-opacity:1}.prism-previewer-easing.prism-previewer-easing circle,.prism-previewer-easing.prism-previewer-easing line,.prism-previewer-easing.prism-previewer-easing path{stroke:#383a42}.prism-previewer-easing.prism-previewer-easing circle{fill:transparent}div.code-toolbar{position:relative}div.code-toolbar>.toolbar{position:absolute;z-index:10;top:.3em;right:.2em;transition:opacity .3s ease-in-out;opacity:0}div.code-toolbar:hover>.toolbar{opacity:1}div.code-toolbar:focus-within>.toolbar{opacity:1}div.code-toolbar>.toolbar>.toolbar-item{display:inline-block}div.code-toolbar>.toolbar>.toolbar-item>a{cursor:pointer}div.code-toolbar>.toolbar>.toolbar-item>button{background:0 0;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}div.code-toolbar>.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar>.toolbar-item>span{color:#bbb;font-size:.8em;padding:0 .5em;background:#f5f2f0;background:hsla(0,0%,87.8%,.2);box-shadow:0 2px 0 0 rgba(0,0,0,.2);border-radius:.5em}div.code-toolbar>.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar>.toolbar-item>span:hover{color:inherit;text-decoration:none}.token.treeview-part .entry-line{position:relative;text-indent:-99em;display:inline-block;vertical-align:top;width:1.2em}.token.treeview-part .entry-line:before,.token.treeview-part .line-h:after{content:"";position:absolute;top:0;left:50%;width:50%;height:100%}.token.treeview-part .line-h:before,.token.treeview-part .line-v:before{border-left:1px solid #ccc}.token.treeview-part .line-v-last:before{height:50%;border-left:1px solid #ccc;border-bottom:1px solid #ccc}.token.treeview-part .line-h:after{height:50%;border-bottom:1px solid #ccc}.token.treeview-part .entry-name{position:relative;display:inline-block;vertical-align:top}.token.treeview-part .entry-name.dotfile{opacity:.5}@font-face{font-family:PrismTreeview;src:url(data:application/font-woff;base64,d09GRgABAAAAAAgYAAsAAAAAEGAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPwAAAFY1UkH9Y21hcAAAAYQAAAB/AAACCtvO7yxnbHlmAAACBAAAA+MAAAlACm1VqmhlYWQAAAXoAAAAKgAAADZfxj5jaGhlYQAABhQAAAAYAAAAJAFbAMFobXR4AAAGLAAAAA4AAAA0CGQAAGxvY2EAAAY8AAAAHAAAABwM9A9CbWF4cAAABlgAAAAfAAAAIAEgAHZuYW1lAAAGeAAAATcAAAJSfUrk+HBvc3QAAAewAAAAZgAAAIka0DSfeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGRYyjiBgZWBgaGQoRZISkLpUAYOBj0GBiYGVmYGrCAgzTWFweEV4ysehs1ArgDDFgZGIA3CDAB2tQjAAHic7ZHLEcMwCESfLCz/VEoKSEE5parURxMOC4c0Ec283WGFdABgBXrwCAzam4bOK9KWeefM3Hhmjyn3ed+hTRq1pS7Ra/HjYGPniHcXMy4G/zNTP7/KW5HTXArkvdBW3ArN19dCG/NRIN8K5HuB/CiQn4U26VeBfBbML9NEH78AeJyVVc1u20YQ3pn905JcSgr/YsuSDTEg3cR1bFEkYyS1HQcQ2jQF2hot6vYSoECKnnPLA/SWUy9NTr31Bfp+6azsNI0SGiolzu7ODnfn+2Z2lnHG3rxhr9nfLGKbLGesncAYYnUHpsVnMG/uwyzNdFIVd6HI6twp8+R3LpT4TSglLoTHwwJgG2/dFvKrl9yI507/p5CCq4LTxB/PlPjkFaMHnWB/0S9je7RTPS+utnGtom1T2q5pk/e3H0M1S18rsXAL7wgpxQuhAmteGGvNjmcfGXuwnFNOPCXxeOGmnjrBLWNyBeNtVq2Hs03yus1aPS3mzSyNVSfu588iW1Q93x/4fjcHn+5EkS2tMxr4xIRa8ese+4L9uKZnxEqs8+ldyN9atU02a5t5uQ8hZGms1QTKpaKYqnipiNNOAIeIADC0JNEOYY+jtSgFoOchiAjRGFACpUTRje8bwIYWGCDEgENY8MEu9bnCYCdAxftoNg0KiSpUtPaHcanYwzXRu6T4r40b5npal3V7UHWCPJW9niyl1vIHgoujEXZjudBkeWkOeMQBRmbEPhKzij1i52t6/TadL+3q7H0U1eq4E8cG4gIIwQLx8VX7ToPXgPrehVc5QXHR7gMSmwjKfaYAP4KvZV+yn9bE18y2IY37LvtyrSg3i7ZK++B603ndlg/gBJpZRsfpBI6hyiaQ6FjlnThz8lAC3LgBIMnXDOAXxBQ4SIgiEhx2AcGCAwAhwjXRpCQms42bwAUt75BvAwgONzdgOfWEwzk4Ylzj4mz+5YEzzXzWX9aNlk7ot65y5QnBHsNlm6zDTu7sspRqG4V+fgJ1lVBZ07Nm7s5nemo3Lf3PO7iwtnroQ5/YDGwPRUip6fV6L+27p+wCHwSvPs85UnHqId8NAn5IBsKdv95KrL9m31Gsf2a/rluDslk1y1J9GE+LUmmVT/OyOHaFKGnapt2H5XeJTmKd6qYNoVVZOy+pWzr7rMip3ndG/4mQSoUcMbAqG/YNIAdXhkAqTVruXhocSKN0iS4Rwj7vSS4fcF/La07BfeQSuRAcFeW+9igjwPhhYPpGCBCBHhxiKMyFMFT7ziRH7RtfIWdiha+TdW+Rqs7bLHdN2ZJIKl0um0x3op9saYr0REeRdj09pl43pMzz4tjztrY8L4o8bzT+oLY27PR/eFtXs/YY5vtwB5Iqad14eYN0ujveMaGWqkdU3TKbQSC5Uvxaf4fA7SAQ3r2tEfIhd4duld91bwMisjqBw22orthNcroXl7KqO1329HBgAexgoCfGAwiDPoBnriki3lmNojrzvD0tjo6E3vPYP6E2BMIAeJxjYGRgYADiY8t3FsTz23xl4GbYzIAB/v9nWM6wBcjgYGAC8QH+QQhZAAB4nGNgZGBg2MzAACeXMzAyoAJeADPyAh14nGNgAILNpGEA0fgIZQAAAAAAAAA2AHIAvgE+AZgCCAKMAv4DlgPsBEYEoHicY2BkYGDgZchi4GQAASYg5gJCBob/YD4DABTSAZcAeJx9kU1uwjAQhV/4qwpqhdSqi67cTTeVEmBXDgBbhBD7AHYISuLUMSD2PUdP0HNwjp6i676k3qQS9Ujjb968mYUNoI8zPJTHw02Vy9PAFatfbpLuHbfIT47b6MF33KH+6riLF0wc93CHN27wWtdUHvHuuIFbfDhuUv903CKfHbfxgC/HHerfjrtYen3HPTx7ambiIl0YKQ+xPM5ltE9CU9NqxVKaItaZGPqDmj6VmTShlRuxOoniEI2sVUIZnYqJzqxMEi1yo3dybf2ttfk4CJTT/bVOMYNBjAIpFiTJOLCWOGLOHGGPBCE7l32XO0tmw04MjQwCQ7774B//lDmrZkJY3hvOrHBiLuiJMKJqoVgrejQ3CP5Yubt0JwxNJa96Oypr6j621VSOMQKG+uP36eKmHylcb0MAeJxtwdEOgjAMBdBeWEFR/Mdl7bTJtMsygc/nwVfPoYF+QP+tGDAigDFhxgVXLLjhjhUPCtmKTtmLaGN7x6dy/Io5bybqoevRQ3LRObb0sk3HKpn1SFqW6ru26vbpYfcmRCccJhqsAAA=) format("woff")}.token.treeview-part .entry-name:before{content:"\ea01";font-family:PrismTreeview;font-size:inherit;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:2.5ex;display:inline-block}.token.treeview-part .entry-name.dir:before{content:"\ea02"}.token.treeview-part .entry-name.ext-bmp:before,.token.treeview-part .entry-name.ext-eps:before,.token.treeview-part .entry-name.ext-gif:before,.token.treeview-part .entry-name.ext-jpe:before,.token.treeview-part .entry-name.ext-jpeg:before,.token.treeview-part .entry-name.ext-jpg:before,.token.treeview-part .entry-name.ext-png:before,.token.treeview-part .entry-name.ext-svg:before,.token.treeview-part .entry-name.ext-tiff:before{content:"\ea03"}.token.treeview-part .entry-name.ext-cfg:before,.token.treeview-part .entry-name.ext-conf:before,.token.treeview-part .entry-name.ext-config:before,.token.treeview-part .entry-name.ext-csv:before,.token.treeview-part .entry-name.ext-ini:before,.token.treeview-part .entry-name.ext-log:before,.token.treeview-part .entry-name.ext-md:before,.token.treeview-part .entry-name.ext-nfo:before,.token.treeview-part .entry-name.ext-txt:before{content:"\ea06"}.token.treeview-part .entry-name.ext-asp:before,.token.treeview-part .entry-name.ext-aspx:before,.token.treeview-part .entry-name.ext-c:before,.token.treeview-part .entry-name.ext-cc:before,.token.treeview-part .entry-name.ext-cpp:before,.token.treeview-part .entry-name.ext-cs:before,.token.treeview-part .entry-name.ext-css:before,.token.treeview-part .entry-name.ext-h:before,.token.treeview-part .entry-name.ext-hh:before,.token.treeview-part .entry-name.ext-htm:before,.token.treeview-part .entry-name.ext-html:before,.token.treeview-part .entry-name.ext-jav:before,.token.treeview-part .entry-name.ext-java:before,.token.treeview-part .entry-name.ext-js:before,.token.treeview-part .entry-name.ext-php:before,.token.treeview-part .entry-name.ext-rb:before,.token.treeview-part .entry-name.ext-xml:before{content:"\ea07"}.token.treeview-part .entry-name.ext-7z:before,.token.treeview-part .entry-name.ext-bz2:before,.token.treeview-part .entry-name.ext-bz:before,.token.treeview-part .entry-name.ext-gz:before,.token.treeview-part .entry-name.ext-rar:before,.token.treeview-part .entry-name.ext-tar:before,.token.treeview-part .entry-name.ext-tgz:before,.token.treeview-part .entry-name.ext-zip:before{content:"\ea08"}.token.treeview-part .entry-name.ext-aac:before,.token.treeview-part .entry-name.ext-au:before,.token.treeview-part .entry-name.ext-cda:before,.token.treeview-part .entry-name.ext-flac:before,.token.treeview-part .entry-name.ext-mp3:before,.token.treeview-part .entry-name.ext-oga:before,.token.treeview-part .entry-name.ext-ogg:before,.token.treeview-part .entry-name.ext-wav:before,.token.treeview-part .entry-name.ext-wma:before{content:"\ea04"}.token.treeview-part .entry-name.ext-avi:before,.token.treeview-part .entry-name.ext-flv:before,.token.treeview-part .entry-name.ext-mkv:before,.token.treeview-part .entry-name.ext-mov:before,.token.treeview-part .entry-name.ext-mp4:before,.token.treeview-part .entry-name.ext-mpeg:before,.token.treeview-part .entry-name.ext-mpg:before,.token.treeview-part .entry-name.ext-ogv:before,.token.treeview-part .entry-name.ext-webm:before{content:"\ea05"}.token.treeview-part .entry-name.ext-pdf:before{content:"\ea09"}.token.treeview-part .entry-name.ext-xls:before,.token.treeview-part .entry-name.ext-xlsx:before{content:"\ea0a"}.token.treeview-part .entry-name.ext-doc:before,.token.treeview-part .entry-name.ext-docm:before,.token.treeview-part .entry-name.ext-docx:before{content:"\ea0c"}.token.treeview-part .entry-name.ext-pps:before,.token.treeview-part .entry-name.ext-ppt:before,.token.treeview-part .entry-name.ext-pptx:before{content:"\ea0b"}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.frame[data-v-32d9e426]{display:flex;flex-direction:column;min-height:100vh}.frame .header[data-v-32d9e426]{position:fixed;z-index:100;top:0;left:0}.frame main[data-v-32d9e426]{flex:1}.frame main .content[data-v-32d9e426]{max-inline-size:800px;margin:0 auto}@media screen and (max-width:800px){.frame main .content[data-v-32d9e426]{margin-left:10px;margin-right:10px}}.header-main[data-v-031b1d0e]{background-color:var(--strvdev-palette-1);box-shadow:0 0 3px 0 var(--strvdev-palette-3);inline-size:100%;transition-property:transform;transition-duration:.3s;transform:translateY(calc(var(--header-row-height)*-1*var(--header-row-count)))}.header-main.open[data-v-031b1d0e]{transform:translateY(0)}.site-content-list[data-v-031b1d0e]{display:flex;justify-content:center}.header-grid[data-v-031b1d0e]{block-size:var(--header-row-height);max-inline-size:800px;margin:0 auto;position:relative;display:grid;grid-template-columns:repeat(5,1fr);grid-template-areas:"a b c d e";align-items:start;justify-items:center}.header-grid>.strvdevlogo[data-v-031b1d0e]{background-color:inherit;border-style:none;grid-area:c;padding-top:5px}.header-grid>.strvdevlogo[data-v-031b1d0e]:hover{cursor:pointer}.header-grid>.sitenav[data-v-031b1d0e]{grid-area:c}ul[data-v-30c9cc4b]{display:flex;list-style:none;padding:0;margin:0;justify-content:space-around}ul li[data-v-30c9cc4b]{text-align:center;font-size:1.1rem;font-weight:900;transition-property:color,background-color;transition-duration:.5s}ul li a[data-v-30c9cc4b]{display:block;inline-size:100%;block-size:100%;color:#333c49}svg[data-v-bddbf348]{display:block;margin:0 auto}.giscus-wrapper[data-v-71d61762]{max-inline-size:820px;-webkit-padding-before:1rem;padding-block-start:1rem;margin:0 auto}@media screen and (max-width:820px){.giscus-wrapper[data-v-71d61762]{max-inline-size:800px}}.surround-menu[data-v-71d61762]{display:block;-webkit-margin-before:4rem;margin-block-start:4rem}.blogpost>header[data-v-71d61762]{-webkit-margin-after:1.26em;margin-block-end:1.26em}.blogpost>header>.post-title[data-v-71d61762]{font-size:2rem;-webkit-margin-after:.56em;margin-block-end:.56em}.blogpost>header>.post-info-wrapper[data-v-71d61762]{display:flex;justify-content:space-between;align-items:center}.blogpost>header>.post-info-wrapper>.publish-time[data-v-71d61762]{font-size:.95rem;color:rgba(0,0,0,.5333333333333333);margin:0}.container-base[data-v-6f1598ec]{-webkit-margin-before:var(--default-margin-block-start);margin-block-start:var(--default-margin-block-start)}.list-wrapper[data-v-7e21c619]{display:flex;gap:.3em;align-items:flex-start}.list-wrapper>.material-icons[data-v-7e21c619]{color:inherit;font-size:1.3em}.list-wrapper>.tag-list[data-v-7e21c619]{display:flex;flex-wrap:wrap;list-style:none;margin:0;padding:0;gap:.7em}.list-wrapper>.tag-list li[data-v-7e21c619]{background-color:var(--strvdev-blogpost-tag);border-radius:4px;padding:0 .2em;font-size:.9em}h2[data-v-6bc0f40a]{display:none}.share-list[data-v-6bc0f40a]{list-style:none;padding:0;-webkit-margin-end:.5rem;margin-inline-end:.5rem;display:flex;gap:1rem;justify-content:flex-end}.share-list a[data-v-6bc0f40a]{color:var(--strvdev-palette-3)}.wrapper[data-v-08b63208]{display:grid;grid-auto-flow:column;justify-content:space-between;gap:.5rem;grid-template-columns:minmax(-webkit-max-content,auto) auto minmax(-webkit-max-content,auto);grid-template-columns:minmax(max-content,auto) auto minmax(max-content,auto);align-items:center}.wrapper .prev[data-v-08b63208]{justify-self:flex-start}.wrapper .seriesname[data-v-08b63208]{text-align:center}.wrapper .next[data-v-08b63208]{-webkit-margin-start:auto;margin-inline-start:auto;text-align:right}.button[data-v-08b63208]{display:block}.giscus-frame{width:100%}.footer-wrapper[data-v-194ed6b2]{box-shadow:0 0 3px 0 var(--strvdev-palette-3);-webkit-margin-before:5rem;margin-block-start:5rem;-webkit-padding-before:1.5rem;padding-block-start:1.5rem}.footer-wrapper .footer-main[data-v-194ed6b2]{position:relative;max-inline-size:800px;margin:0 auto;-webkit-padding-after:1rem;padding-block-end:1rem;color:rgba(0,0,0,.7333333333333333)}.footer-wrapper .footer-main .infos[data-v-194ed6b2]{display:flex;justify-content:space-between}.footer-wrapper .footer-main .infos .copyright[data-v-194ed6b2],.footer-wrapper .footer-main .infos .privacy[data-v-194ed6b2]{bottom:1em;left:0;font-size:.9rem;-webkit-margin-before:1em;margin-block-start:1em}@media screen and (min-width:800px){.footer-wrapper .footer-main .contact[data-v-194ed6b2]{position:relative;left:-1.2em;inline-size:50%}}@media screen and (max-width:820px){.footer-wrapper .footer-main[data-v-194ed6b2]{padding-left:10px;padding-right:10px}}h2[data-v-b716246c]{display:none}address[data-v-b716246c]{flex-wrap:wrap;justify-content:space-around;margin:0 1em;gap:1em}address p[data-v-b716246c],address[data-v-b716246c]{display:flex;align-items:center}address p[data-v-b716246c]{margin:0;gap:.2em}address p .icon[data-v-b716246c]{position:relative;top:.095em;font-size:inherit}address p .display[data-v-b716246c]{font-size:1em;font-style:normal}.tail[data-v-4e732b52]:before{content:"@"}.msgbox[data-v-753eb174]{cursor:pointer}@media screen and (min-width:800px){.content[data-v-753eb174]:hover{border-radius:4px;background-color:rgba(0,0,0,.1)}}.container[data-v-e0d516b2]{position:relative}.container .msgbox[data-v-e0d516b2]{display:flex;justify-content:center;align-items:center;position:absolute;top:3px;left:50%;transform:translateY(-100%) translateX(-50%);block-size:2.5rem;inline-size:auto;white-space:nowrap;background:var(--strvdev-blogpost-code);border-radius:5px;transition-property:opacity;transition-duration:.1s;padding:.3rem}.container .msgbox span[data-v-e0d516b2]{margin:0;font-size:1.1rem}.container .msgbox.hide[data-v-e0d516b2]{opacity:0}</style><link rel="preload" href="/_nuxt/static/1650903231/blog/unrealengine--a-little-more-about-the-ue4-module/state.js" as="script"><link rel="preload" href="/_nuxt/static/1650903231/blog/unrealengine--a-little-more-about-the-ue4-module/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1650903231/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="frame" data-v-32d9e426><div class="header-main header" style="--header-row-height:44px;--header-row-count:1" data-v-031b1d0e data-v-32d9e426><div class="site-content-list" data-v-031b1d0e><nav class="sitenav" data-v-031b1d0e><ul style="flex-direction:row" data-v-30c9cc4b data-v-031b1d0e><li style="line-height:44px;inline-size:200px" data-v-30c9cc4b><a href="/" class="nuxt-link-active" data-v-30c9cc4b>
      HOME
    </a></li><li style="line-height:44px;inline-size:200px" data-v-30c9cc4b><a href="/blog" class="nuxt-link-active" data-v-30c9cc4b>
      BLOG
    </a></li><li style="line-height:44px;inline-size:200px" data-v-30c9cc4b><a href="/about" data-v-30c9cc4b>
      ABOUT
    </a></li></ul></nav></div> <div class="header-grid" data-v-031b1d0e><button name="show-navcontent" aria-label="show navigation menu content" class="strvdevlogo" data-v-031b1d0e><div data-v-bddbf348 data-v-031b1d0e><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 35.893 6.419" width="184.37099999999998" height="33" style="isolation:isolate" data-v-bddbf348><defs data-v-bddbf348><clipPath id="_clipPath_wRGPbw1kW50q8FvcamYb3Hxr115iy0Iy" data-v-bddbf348><rect width="35.893" height="6.419" data-v-bddbf348></rect></clipPath></defs> <g clip-path="url(#_clipPath_wRGPbw1kW50q8FvcamYb3Hxr115iy0Iy)" data-v-bddbf348><clipPath id="_clipPath_I8fUhl3gs6z6fOmYoJZCtzdbffHu72Ll" data-v-bddbf348><rect x="0" y="0" width="35.893" height="6.419" transform="matrix(1,0,0,1,0,0)" fill="rgb(255,255,255)" data-v-bddbf348></rect></clipPath> <g clip-path="url(#_clipPath_I8fUhl3gs6z6fOmYoJZCtzdbffHu72Ll)" data-v-bddbf348><g class="characters" data-v-bddbf348><path d=" M 35.059 1.474 L 35.017 1.474 L 33.893 5.978 C 33.853 6.139 33.686 6.269 33.52 6.269 L 31.39 6.269 C 31.225 6.269 31.058 6.139 31.018 5.978 L 29.892 1.469 L 29.892 1.469 L 31.726 1.474 L 31.647 1.474 L 32.339 4.298 C 32.378 4.459 32.431 4.589 32.455 4.589 L 32.455 4.589 C 32.48 4.589 32.532 4.459 32.572 4.298 L 33.265 1.469 L 35.059 1.474 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 27.535 1.469 L 27.56 1.469 L 27.535 1.469 L 27.535 2.199 C 27.535 2.365 27.669 2.499 27.835 2.499 L 29.315 2.499 C 29.48 2.499 29.615 2.634 29.615 2.799 L 29.615 3.489 C 29.615 3.655 29.48 3.789 29.315 3.789 L 27.835 3.789 C 27.669 3.789 27.535 3.924 27.535 4.089 L 27.535 4.519 C 27.535 4.685 27.669 4.819 27.835 4.819 L 29.675 4.819 C 29.84 4.819 29.975 4.954 29.975 5.119 L 29.975 5.969 C 29.975 6.135 29.84 6.269 29.675 6.269 L 26.075 6.269 C 25.909 6.269 25.775 6.135 25.775 5.969 L 25.775 1.469 L 25.775 1.469 L 27.535 1.469 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 25.396 1.469 Q 25.414 1.537 25.43 1.609 L 25.43 1.609 L 25.43 1.609 Q 25.56 2.219 25.56 3.149 L 25.56 3.149 L 25.56 3.149 Q 25.56 4.069 25.43 4.679 L 25.43 4.679 L 25.43 4.679 Q 25.3 5.289 24.985 5.639 L 24.985 5.639 L 24.985 5.639 Q 24.67 5.989 24.12 6.129 L 24.12 6.129 L 24.12 6.129 Q 23.57 6.269 22.72 6.269 L 22.72 6.269 L 20.37 6.269 C 20.204 6.269 20.07 6.135 20.07 5.969 L 20.07 1.474 L 20.07 1.474 L 20.07 1.474 L 20.07 1.474 L 21.83 1.469 L 21.83 4.589 C 21.83 4.755 21.964 4.889 22.13 4.889 L 22.89 4.889 L 22.89 4.889 Q 23.33 4.889 23.5 4.744 L 23.5 4.744 L 23.5 4.744 Q 23.67 4.599 23.67 4.229 L 23.67 4.229 L 23.67 2.059 L 23.67 2.059 Q 23.67 1.689 23.5 1.544 L 23.5 1.544 L 23.5 1.544 Q 23.452 1.503 23.382 1.474 L 23.317 1.474 L 23.317 1.474 L 25.396 1.469 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 19.15 5.008 L 19.411 5.008 C 19.687 5.008 19.911 5.232 19.911 5.508 L 19.911 5.769 C 19.911 6.045 19.687 6.269 19.411 6.269 L 19.15 6.269 C 18.874 6.269 18.65 6.045 18.65 5.769 L 18.65 5.508 C 18.65 5.232 18.874 5.008 19.15 5.008 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 19.49 1.474 L 18.365 5.978 C 18.325 6.139 18.158 6.269 17.993 6.269 L 15.863 6.269 C 15.697 6.269 15.53 6.139 15.49 5.978 L 14.366 1.474 L 16.118 1.469 L 16.811 4.298 C 16.851 4.459 16.903 4.589 16.928 4.589 L 16.928 4.589 C 16.952 4.589 17.005 4.459 17.044 4.298 L 17.737 1.469 L 19.49 1.474 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 14.014 1.469 Q 14.082 1.826 14.096 2.276 L 14.096 2.276 L 14.096 2.276 Q 14.017 3.359 13.517 3.859 L 13.517 3.859 L 13.517 3.859 Q 13.396 3.981 13.376 3.994 C 13.24 4.088 13.194 4.281 13.273 4.426 L 14.143 6.006 C 14.223 6.151 14.153 6.269 13.987 6.269 L 12.677 6.269 C 12.512 6.269 12.32 6.148 12.249 5.998 L 11.602 4.63 C 11.531 4.481 11.339 4.359 11.173 4.359 L 11.037 4.359 C 10.872 4.359 10.737 4.494 10.737 4.659 L 10.737 5.969 C 10.737 6.135 10.603 6.269 10.437 6.269 L 9.277 6.269 C 9.112 6.269 8.977 6.135 8.976 5.969 L 8.946 1.469 L 10.737 1.469 L 10.737 2.769 C 10.737 2.935 10.872 3.069 11.037 3.069 L 11.707 3.069 L 11.707 3.069 Q 11.977 3.069 12.077 2.979 L 12.077 2.979 L 12.077 2.979 Q 12.177 2.889 12.177 2.649 L 12.177 2.649 L 12.177 1.889 L 12.177 1.889 Q 12.177 1.649 12.077 1.559 L 12.077 1.559 L 12.077 1.559 L 11.859 1.469 L 14.014 1.469 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 7.663 1.469 L 7.663 5.969 C 7.663 6.135 7.529 6.269 7.363 6.269 L 6.203 6.269 C 6.038 6.269 5.903 6.135 5.903 5.969 L 5.903 1.469 L 7.663 1.469 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 2.033 1.474 C 1.978 1.474 1.933 1.519 1.933 1.574 L 1.933 2.169 C 1.933 2.224 1.978 2.273 2.033 2.278 L 2.753 2.339 L 2.753 2.339 Q 3.553 2.409 4.048 2.639 L 4.048 2.639 L 4.048 2.639 Q 4.543 2.869 4.768 3.284 L 4.768 3.284 L 4.768 3.284 Q 4.993 3.699 4.993 4.349 L 4.993 4.349 L 4.993 4.349 Q 4.993 5.079 4.728 5.534 L 4.728 5.534 L 4.728 5.534 Q 4.463 5.989 3.898 6.204 L 3.898 6.204 L 3.898 6.204 Q 3.333 6.419 2.423 6.419 L 2.423 6.419 L 2.423 6.419 Q 1.753 6.419 1.138 6.339 L 1.138 6.339 L 1.138 6.339 L 0.247 6.151 C 0.085 6.117 -0.024 5.957 0.004 5.793 L 0.152 4.935 C 0.181 4.772 0.332 4.678 0.49 4.727 Q 0.693 4.789 1.203 4.864 L 1.203 4.864 L 1.203 4.864 Q 1.713 4.939 2.213 4.939 L 2.213 4.939 L 2.213 4.939 Q 2.473 4.939 2.673 4.929 L 2.673 4.929 L 2.673 4.929 L 2.805 4.914 C 2.97 4.895 3.103 4.745 3.103 4.579 L 3.103 4.319 C 3.103 4.154 2.97 4.007 2.805 3.993 L 2.193 3.939 L 2.193 3.939 Q 1.593 3.889 1.178 3.764 L 1.178 3.764 L 1.178 3.764 Q 0.763 3.639 0.513 3.414 L 0.513 3.414 L 0.513 3.414 Q 0.263 3.189 0.153 2.854 L 0.153 2.854 L 0.153 2.854 Q 0.043 2.519 0.043 2.039 L 0.043 2.039 L 0.043 2.039 Q 0.043 1.239 0.263 0.764 L 0.263 0.764 L 0.263 0.764 Q 0.521 0.163 1.036 0.019 L 1.036 0.019 L 1.036 0.019 L 1.036 0.019 L 1.036 1.469 L 1.728 1.469 L 2.033 1.474 L 2.033 1.474 Z " fill="rgb(51,60,73)" data-v-bddbf348></path></g> <g class="barcode" data-v-bddbf348><path d=" M 23.116 1.48 L 23.116 0 L 23.393 0 L 23.393 1.48 L 23.116 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 25.06 1.48 L 25.06 0 L 24.782 0 L 24.782 1.48 L 25.06 1.48 L 25.06 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 24.227 1.48 L 24.227 0 L 23.671 0 L 23.671 1.48 L 24.227 1.48 L 24.227 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 27.282 1.48 L 27.282 0 L 26.171 0 L 26.171 1.48 L 27.282 1.48 L 27.282 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 27.838 0 L 27.838 1.475 L 27.838 1.48 L 27.56 1.48 L 27.56 1.475 L 27.56 0 L 27.838 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 28.671 0 L 28.671 1.475 L 28.671 1.48 L 28.393 1.48 L 28.393 1.475 L 28.393 0 L 28.671 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 29.226 1.475 L 29.226 1.48 L 29.782 1.48 L 29.782 1.475 L 29.782 0 L 29.226 0 L 29.226 1.475 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 35.059 1.48 L 35.059 0 L 34.782 0 L 34.782 1.48 L 35.059 1.48 L 35.059 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 34.504 1.48 L 34.504 0 L 33.671 0 L 33.671 1.48 L 34.504 1.48 L 34.504 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 31.726 1.48 L 31.726 0 L 30.893 0 L 30.893 1.48 L 31.726 1.48 L 31.726 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 30.615 1.48 L 30.615 0 L 30.337 0 L 30.337 1.48 L 30.615 1.48 L 30.615 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 32.837 0 L 32.837 1.48 L 32.282 1.48 L 32.282 0 L 32.837 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 35.893 0.201 L 35.893 1.28 C 35.893 1.39 35.803 1.48 35.693 1.48 L 35.337 1.48 L 35.337 0 L 35.693 0 C 35.803 0 35.893 0.089 35.893 0.201 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 2.283 1.48 L 2.283 1.48 L 2.283 1.48 L 2.283 1.48 L 2.283 0 L 1.728 0 L 1.728 1.48 L 2.283 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 2.839 0 L 2.839 1.48 L 2.561 1.48 L 2.561 0 L 2.839 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 3.672 0 L 3.672 1.48 L 3.394 1.48 L 3.394 0 L 3.672 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 5.061 0 L 5.061 1.48 L 4.783 1.48 L 4.783 0 L 5.061 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 6.45 1.475 L 6.45 0 L 5.339 0 L 5.339 1.48 L 6.45 1.48 L 6.45 1.475 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 7.283 1.48 L 7.283 0.777 L 7.283 0 L 7.005 0 L 7.005 1.48 L 7.283 1.48 L 7.283 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 10.338 1.48 L 10.338 0 L 10.061 0 L 10.061 1.478 L 10.338 1.48 L 10.338 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 9.783 1.48 L 9.783 0 L 8.672 0 L 8.672 1.475 L 8.672 1.475 L 8.672 1.475 L 8.672 1.475 L 8.672 1.48 L 9.783 1.475 L 9.783 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 8.116 1.475 L 8.116 0 L 7.839 0 L 7.839 0.918 L 7.839 1.475 L 8.116 1.475 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 21.727 1.475 L 21.727 0 L 21.449 0 L 21.449 1.475 L 21.727 1.475 L 21.727 1.475 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 20.338 1.48 L 20.338 0 L 20.06 0 L 20.06 1.48 L 20.338 1.48 L 20.338 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 13.949 1.48 L 13.949 0 L 15.06 0 L 15.06 1.48 L 13.949 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 19.782 1.48 L 19.782 0 L 18.949 0 L 18.949 1.48 L 19.782 1.48 L 19.782 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 18.394 1.48 L 18.394 0 L 17.838 0 L 17.838 1.48 L 18.394 1.48 L 18.394 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 15.616 1.48 L 15.616 0 L 15.338 0 L 15.338 1.48 L 15.616 1.48 L 15.616 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 13.672 1.48 L 13.672 0 L 12.561 0 L 12.561 1.48 L 13.672 1.48 L 13.672 1.48 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 12.005 0 L 11.727 0 L 11.727 1.48 L 12.005 1.48 L 12.005 0 Z " fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 11.172 0 L 11.172 1.48 L 10.894 1.48 L 10.894 0 L 11.172 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 16.449 0 L 16.449 1.48 L 16.172 1.48 L 16.172 0 L 16.449 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 17.283 0 L 17.283 1.48 L 17.005 1.48 L 17.005 0 L 17.283 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path> <path d=" M 22.838 0 L 22.838 1.48 L 22.282 1.48 L 22.282 0 L 22.838 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-bddbf348></path></g></g></g></svg></div></button></div></div> <main data-v-32d9e426><div class="content" data-v-32d9e426><div class="outer"><div data-v-71d61762><div class="container-base" data-v-6f1598ec data-v-71d61762><article data-v-6f1598ec data-v-71d61762><div class="blogpost" data-v-6f1598ec data-v-71d61762><header data-v-6f1598ec data-v-71d61762><h1 class="post-title" data-v-6f1598ec data-v-71d61762>ちょっとだけくわしくUE4 モジュールの話</h1> <div class="post-info-wrapper" data-v-6f1598ec data-v-71d61762><div class="tag-list" data-v-6f1598ec data-v-71d61762><div class="list-wrapper" data-v-7e21c619 data-v-71d61762><span class="material-icons" data-v-7e21c619>local_offer</span> <ul class="tag-list" data-v-7e21c619><li data-v-7e21c619><a href="/blog/search?t=Unreal%20Engine" data-v-7e21c619>Unreal Engine</a></li><li data-v-7e21c619><a href="/blog/search?t=Unreal%20C%2B%2B" data-v-7e21c619>Unreal C++</a></li></ul></div></div> <p class="publish-time" data-v-6f1598ec data-v-71d61762><time datetime="2019.10.29" data-v-6f1598ec data-v-71d61762>2019.10.29</time>に更新
            </p></div></header> <div class="nuxt-content" data-v-6f1598ec><h1 id="趣旨" data-v-6f1598ec><a href="#%E8%B6%A3%E6%97%A8" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>趣旨</h1>
<p data-v-6f1598ec>UE4 は本当にいろいろなことができますが、特定のトピックに対する情報のまとまった記事というのがあまりない気がします。
手順書的な記事は結構あったりするのですが、そのものに対する解説記事的なのは更にない気がします。なので、UE4 の勉強がてら書いてみました。この記事を読むときは、手元で同じように実装を読んでいってもらえるとわかりやすいかと思います。</p>
<p data-v-6f1598ec>僕は趣味で UE4 をやっているへっぽこ学生なので、なにか間違っていたら遠慮なくご指摘いただけると、僕とこの記事を今後見る人が助かります。</p>
<h1 id="環境" data-v-6f1598ec><a href="#%E7%92%B0%E5%A2%83" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>環境</h1>
<ul data-v-6f1598ec>
<li data-v-6f1598ec>エンジンバージョン: 4.22.3</li>
<li data-v-6f1598ec>プロジェクト名: MyProject</li>
<li data-v-6f1598ec>OS: Windows 10</li>
</ul>
<p data-v-6f1598ec>プロジェクト名や環境依存の名前などは適時読み替えてください。</p>
<h1 id="モジュール" data-v-6f1598ec><a href="#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>モジュール</h1>
<p data-v-6f1598ec>UE4 においてモジュールとは、エンジンを構成する構成単位そのものです。</p>
<p data-v-6f1598ec>エンジン自体が大きな塊ではなく、機能ごとにモジュールという形で分割されています。また、UE4 においてはプラグインもモジュールとして実装されます。</p>
<p data-v-6f1598ec>さらに、エンジンを用いて開発される C++プロジェクトのソースも、新たなモジュールとして扱われます。
以下にモジュールのイメージ図を示します。
<img alt="UE4Archtecture.png" src="/article-assets/unrealengine/a-little-more-about-the-ue4-module//module-architecture.png" data-v-6f1598ec></p>
<p data-v-6f1598ec>この図を見ていただくと、エンジンとして持っている大量のモジュールの中に、C++プロジェクトで実装した内容が新規モジュールとして追加されている構造がわかりやすいと思います。この C++プロジェクトで実装を行うモジュールのことを、ゲームモジュールといいます。特に、C++プロジェクト作成時にデフォルトで作成されるゲームモジュールのことをプライマリゲームモジュールと呼び、プライマリゲームモジュールはプロジェクトに 1 つしか存在できません。</p>
<p data-v-6f1598ec>UE4 におけるビルドは、モジュール単位で行われます。ビルドを行うと、1 モジュールにつき 1 つの<code data-v-6f1598ec>.dll</code>、つまりダイナミックリンクライブラリが出力されます。こうしてビルドされたダイナミックリンクライブラリを読み込んでいき、結果として UE4 という大きなシステムが動作していることになります。</p>
<p data-v-6f1598ec>UE4 はこのようなアーキテクチャによって、Unreal C++プログラマがお世話になっている<strong data-v-6f1598ec>ホットリロード</strong>を実現しています。本来 C++のような事前コンパイルを必要とする言語は、対象のプログラムを起動したままソースを再コンパイルして変更を反映するなどもちろんできません。しかし、UE4 ではこのようなモジュール単位でのビルドの仕組みがあるため、UE4 という大きな視点ではプログラムを起動したまま、変更のあったモジュールのみリビルドし、変更前に読み込んでいた dll をアンロード、変更後の dll を<strong data-v-6f1598ec>ホットリロード</strong>しているのです。モジュール様様、動的リンク様様ですね。</p>
<p data-v-6f1598ec>なお、モジュールのビルド結果である dll の場所は、UE4 上で<code data-v-6f1598ec>module list</code>というコマンドを打つと簡単に確認できます。
<img alt="image.png" src="/article-assets/unrealengine/a-little-more-about-the-ue4-module//module-list-console.png" data-v-6f1598ec></p>
<h2 id="ゲームモジュールを追加する意義" data-v-6f1598ec><a href="#%E3%82%B2%E3%83%BC%E3%83%A0%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B%E6%84%8F%E7%BE%A9" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>ゲームモジュールを追加する意義</h2>
<p data-v-6f1598ec>プライマリゲームモジュール以外にゲームモジュールを追加作成すべきシチュエーションの例を挙げておきます。
プロジェクト上で独自のアセットを実装し、ゲーム上で利用するとします。この独自アセットには、エディタ上での作成機能、インポート機能、独自エディタが実装されています。</p>
<p data-v-6f1598ec>この時、アセット自体に含まれるプロパティやメソッドは、ゲーム上に必要な情報です。しかし、エディタ機能やインポート機能などは、ゲーム上に必要な情報でしょうか？これはエディタを用いて制作を行う過程において必要な実装情報であって、Shipping ビルドを行ってユーザーにゲームを公開する際には含む必要のない情報です。しかしそんな都合はビルドシステムもコンパイラも察してくれないため、1 つのモジュールに愚直に実装してしまうと、エディタにしか必要のない情報をゲームに含めてしまいます。</p>
<p data-v-6f1598ec>ここで新規モジュールの登場です。UE4 のビルドシステムには、ビルド設定ごとにビルドに含めるモジュールを変更する機能が用意されています。このため、新規モジュールを用意しカスタムエディタや新規作成機能部分のみをこちらに実装、Editor ビルド時にのみ対象とするよう設定すれば、Game ビルド(Shipping ビルドなどのこと)時にはゲームに必要な実装のみを含めることができるようになります。</p>
<p data-v-6f1598ec>また、モジュールを分割することでビルド時のリンク速度を上げることができます。ただし、ゲーム実装自体を分割すると、リンク速度の向上とトレードオフとして実行時に読み込む DLL の数が増えるため、ゲームプレイにおいては悪影響を及ぼす恐れがあり（ますと公式に書いてあり）ます。実際の影響の程度は検証を行っていないためわかりませんが、そこまで大きな影響はなさそうな気もします。というか Game ビルド時にはサードパーティ製以外のバイナリは実行ファイルにまとめられているはずですが、モジュール数は影響するんでしょうか？</p>
<p data-v-6f1598ec>コードの結合度を下げて、使い回しを楽にしやすいという利点もあります。</p>
<h2 id="モジュールの構成" data-v-6f1598ec><a href="#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%AE%E6%A7%8B%E6%88%90" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>モジュールの構成</h2>
<p data-v-6f1598ec>C++プロジェクトを作成すると、Source 以下はこんな構成になっていると思います。</p>
<div class="remark-highlight" data-v-6f1598ec><pre class="language-treeview" data-v-6f1598ec><code class="language-treeview" data-v-6f1598ec>-- Source
    |-- MyProject
    |   |-- MyProject.Build.cs
    |   |-- MyProject.cpp
    |   `-- MyProject.h
    |-- MyProject.Target.cs
    `-- MyProjectEditor.Target.cs
</code></pre></div>
<p data-v-6f1598ec>ここで<code data-v-6f1598ec>MyProject</code>というディレクトリの中に入っているのが、C++プロジェクト作成時に生成されるプライマリゲームモジュールです。
<code data-v-6f1598ec>MyProject.cpp</code>, <code data-v-6f1598ec>MyProject.h</code>といった C++ファイルはモジュールについての実装を行うために用意されているファイルです。</p>
<h2 id="モジュールファイル" data-v-6f1598ec><a href="#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>モジュールファイル</h2>
<p data-v-6f1598ec>ここで重要なのは<code data-v-6f1598ec>MyProject.Build.cs</code>という C#ファイルです。このファイルは、モジュールに関する各種設定を行うためのファイルで、モジュールファイルと呼ばれるものです。UE4 でビルドを行う際には、ビルドツールがモジュールファイルを探索し、モジュールを認識することで、モジュールに含まれるコードが適切な設定でビルドされます。</p>
<p data-v-6f1598ec>では、デフォルトで生成されている<code data-v-6f1598ec>MyProject.Build.cs</code>を覗いてみましょう。</p>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>MyProject.Build.cs</div><pre data-v-6f1598ec><code class="language-csharp" data-v-6f1598ec>// Fill out your copyright notice in the Description page of Project Settings.

using UnrealBuildTool;

public class MyProject : ModuleRules
{
	public MyProject(ReadOnlyTargetRules Target) : base(Target)
	{
		PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;

		PublicDependencyModuleNames.AddRange(new string[] { "Core", "CoreUObject", "Engine", "InputCore" });

		PrivateDependencyModuleNames.AddRange(new string[] {  });
	}
}</code></pre></div>
<p data-v-6f1598ec>デフォルトでは、そこまで複雑な設定は行われていません。<code data-v-6f1598ec>PublicDependencyModuleNames</code>というメンバ変数の配列になにか文字列を追加しているところと、<code data-v-6f1598ec>PCHUsage</code>というメンバ変数になにか代入しているところだけです。順に説明します。</p>
<p data-v-6f1598ec>配列<code data-v-6f1598ec>PublicDependencyModuleNames</code>は、この<code data-v-6f1598ec>MyProject.Build.cs</code>が示すモジュールが依存するモジュールの名前をセットし、モジュール内で外部の依存するモジュールを利用できるように設定する変数です。依存しているモジュールがここに含まれていないと、ビルド時にエラーが出ます。</p>
<p data-v-6f1598ec><code data-v-6f1598ec>PCHUsage</code>というのは、IWYU(Include-What-You-Use)というシステムの利用方法について設定する変数です。IWYU についてはここでは解説しませんが、簡単に言えば依存関係をいい感じに整理することでビルド速度などを早くしてくれる機能です。詳細は以下の記事とドキュメントを御覧ください。</p>
<blockquote data-v-6f1598ec>
<p data-v-6f1598ec>IWYU でコーディングしよう
<a href="http://miyahuji111.hatenablog.com/entry/2017/04/03/081222" rel="nofollow noopener noreferrer" target="_blank" data-v-6f1598ec>http://miyahuji111.hatenablog.com/entry/2017/04/03/081222</a></p>
</blockquote>
<blockquote data-v-6f1598ec>
<p data-v-6f1598ec>IWYU リファレンス ガイド
<a href="https://api.unrealengine.com/JPN/Programming/UnrealBuildSystem/IWYUReferenceGuide/index.html" rel="nofollow noopener noreferrer" target="_blank" data-v-6f1598ec>https://api.unrealengine.com/JPN/Programming/UnrealBuildSystem/IWYUReferenceGuide/index.html</a></p>
</blockquote>
<p data-v-6f1598ec>ここではこの 2 つしか設定が行われていませんが、他にも多くの設定項目が存在します。
設定可能な項目については以下の記事とドキュメントが詳しいです。</p>
<blockquote data-v-6f1598ec>
<p data-v-6f1598ec>ModuleRules(XXX.build.cs ファイル)について
<a href="https://qiita.com/takayashiki2/items/db995c558024c3db8223" rel="nofollow noopener noreferrer" target="_blank" data-v-6f1598ec>https://qiita.com/takayashiki2/items/db995c558024c3db8223</a></p>
</blockquote>
<blockquote data-v-6f1598ec>
<p data-v-6f1598ec>アンリアル ビルド システムのモジュール ファイル
<a href="https://api.unrealengine.com/JPN/Programming/UnrealBuildSystem/ModuleFiles/index.html" rel="nofollow noopener noreferrer" target="_blank" data-v-6f1598ec>https://api.unrealengine.com/JPN/Programming/UnrealBuildSystem/ModuleFiles/index.html</a></p>
</blockquote>
<p data-v-6f1598ec>設定項目に代入すべき列挙型の中身が不明だったりして困惑することがありますが、そんなときにはエンジンソースに含まれているビルドツールのソースを読みに行きましょう！！</p>
<h2 id="ターゲットファイル" data-v-6f1598ec><a href="#%E3%82%BF%E3%83%BC%E3%82%B2%E3%83%83%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>ターゲットファイル</h2>
<p data-v-6f1598ec><code data-v-6f1598ec>Source</code>の直下にある<code data-v-6f1598ec>MyProject.Target.cs</code>,<code data-v-6f1598ec>MyProjectEditor.Target.cs</code>の 2 つの C#ファイルもやはりビルドに関する設定を行うファイルで、ターゲットファイルと呼ばれるものです。これらの中では、上記の<code data-v-6f1598ec>MyProject.Build.cs</code>等で発見されたモジュールのうち、”どれを”ビルド対象にするかという設定を行います。</p>
<p data-v-6f1598ec>つまり、モジュールとして完璧な形のコードを作成しても、ここに設定を追記しなければモジュールはビルドに含まれないということです。</p>
<p data-v-6f1598ec>では、なぜこのファイルは 2 つ生成されるのでしょうか。ここで、Game ビルド時と Editor ビルド時で含まれるモジュールを変えられるというところに話が戻ります。
<code data-v-6f1598ec>MyProjectEditor.Target.cs</code>に設定したモジュールは Editor ビルド時にビルド対象となり、<code data-v-6f1598ec>MyProject.Target.cs</code>に設定したモジュールは Game ビルド時にビルド対象となるといったように、使い分けることができます。
試しに、<code data-v-6f1598ec>MyProject.Target.cs</code>の方を見てみます。</p>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>MyProject.Target.cs</div><pre data-v-6f1598ec><code class="language-csharp" data-v-6f1598ec>// Fill out your copyright notice in the Description page of Project Settings.

using UnrealBuildTool;
using System.Collections.Generic;

public class MyProjectTarget : TargetRules
{
	public MyProjectTarget(TargetInfo Target) : base(Target)
	{
		Type = TargetType.Game;

		ExtraModuleNames.AddRange( new string[] { "MyProject" } );
	}
}
</code></pre></div>
<p data-v-6f1598ec>まず、<code data-v-6f1598ec>Type</code>という変数にこの<code data-v-6f1598ec>MyProject.Target.cs</code>によって行われるビルドの種類を指定しています。ちなみに、ビルドツールのコードではこの<code data-v-6f1598ec>TargetType</code>という型は以下のように列挙型として定義されています。</p>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>ビルドツールより抜粋(TargetRules.cs)</div><pre data-v-6f1598ec><code class="language-csharp" data-v-6f1598ec>	public enum TargetType
	{
		Game,
		Editor,
		Client,
		Server,
		Program,
	}</code></pre></div>
<p data-v-6f1598ec>生成される<code data-v-6f1598ec>MyProject.Target.cs</code>,<code data-v-6f1598ec>MyProjectEditor.Target.cs</code>は<code data-v-6f1598ec>TargetType</code>に<code data-v-6f1598ec>Game</code>,<code data-v-6f1598ec>Editor</code>が設定されたターゲットファイルですが、ビルドツールを見るとまだ他にもタイプがあるようです。</p>
<blockquote data-v-6f1598ec>
<p data-v-6f1598ec>アンリアルビルド システムのターゲット ファイル
<a href="https://api.unrealengine.com/JPN/Programming/UnrealBuildSystem/TargetFiles/index.html" rel="nofollow noopener noreferrer" target="_blank" data-v-6f1598ec>https://api.unrealengine.com/JPN/Programming/UnrealBuildSystem/TargetFiles/index.html</a></p>
</blockquote>
<p data-v-6f1598ec>公式から引用させていただくと、それぞれこんな意味があるそうです。</p>
<blockquote data-v-6f1598ec>
<p data-v-6f1598ec>Game - クック済みデータの実行を要求するスタンドアロン ゲームです。
Client - Game と同じですが、サーバー コードは含まれません。ネットワーク ゲームに役立ちます。
Server - Game と同じですが、クライアント コードは含まれません。ネットワーク ゲームのデディケイテッド サーバーに役立ちます。
Editor - アンリアル エディタを拡張するターゲットです。
Program - アンリアル エンジンに加えてビルドされているスタンドアロン ユーティリティ プログラムです。</p>
</blockquote>
<p data-v-6f1598ec>なお、引用元に重大な誤植があったため、引用文は一部修正を加えています。</p>
<p data-v-6f1598ec>これだけビルドタイプがあるにも関わらず、デフォルトでは 2 種類分しか生成されないということは、自分でターゲットファイルを追加することができるということです。ターゲットファイルの作成については流石に話がそれすぎるのでここでは解説しません。ちなみに、同じビルドタイプのターゲットファイルを複数作成しても、1 つしか認識されませんのでご注意ください。</p>
<p data-v-6f1598ec>次に、<code data-v-6f1598ec>ExtraModuleNames</code>です。ここが重要なところで、ビルドターゲットにするモジュールの識別名をセットする配列です。</p>
<p data-v-6f1598ec>デフォルトではゲームモジュールがプライマリゲームモジュール 1 つしかないので 1 つしか指定されておらず、<code data-v-6f1598ec>MyProject.Target.cs</code>と<code data-v-6f1598ec>MyProjectEditor.Target.cs</code>どちらも同じ設定になっていますが、前述のような都合でモジュールを追加した場合は大変便利です。</p>
<p data-v-6f1598ec>IDE などからビルドを行う際には、ターゲットファイルのクラス名が併記されたビルド設定が生成されているので、対応するものを選択すれば、どちらの設定でビルドを行うか指定することができます。</p>
<h2 id="uproject-ファイル" data-v-6f1598ec><a href="#uproject-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>.uproject ファイル</h2>
<p data-v-6f1598ec>UE4 のプロジェクト直下に生成される<code data-v-6f1598ec>.uproject</code>ファイルにもモジュールに関する設定項目が存在します。
今回生成された<code data-v-6f1598ec>MyProject.uproject</code>を覗いてみます。</p>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>MyProject.uproject</div><pre data-v-6f1598ec><code class="language-json" data-v-6f1598ec>{
	"FileVersion": 3,
	"EngineAssociation": "4.22",
	"Category": "",
	"Description": "",
	"Modules": [
		{
			"Name": "MyProject",
			"Type": "Runtime",
			"LoadingPhase": "Default"
		}
	]
}</code></pre></div>
<p data-v-6f1598ec>モジュールに関する項目は<code data-v-6f1598ec>"Modules"</code>の箇所です。ここには、プロジェクトで定義したモジュールを設定します。モジュールファイルやターゲットファイルには基本的にビルドに関する設定を行ってきましたが、<code data-v-6f1598ec>.uproject</code>に記述するのは起動時の読み込み対象のモジュールの識別名です。ここに記述しなくてもビルド対象にすることはできますが、起動時の読み込みやホットリロード等の対象にはなりません。</p>
<p data-v-6f1598ec>また、識別名だけでなく、そのモジュールを読み込む動作タイプと、読み込みタイミングも設定することができます。それぞれ以下のようになっています。</p>
<h3 id="type" data-v-6f1598ec><a href="#type" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>Type</h3>

















































<table data-v-6f1598ec><thead data-v-6f1598ec><tr data-v-6f1598ec><th data-v-6f1598ec>読み込み時タイプ名</th><th data-v-6f1598ec>概要</th></tr></thead><tbody data-v-6f1598ec><tr data-v-6f1598ec><td data-v-6f1598ec>Runtime</td><td data-v-6f1598ec>通常実行時には読み込む</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>RuntimeNoCommandlet</td><td data-v-6f1598ec>実行時、コマンドレットでない場合読み込む</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>RuntimeAndProgram</td><td data-v-6f1598ec>実行時かつビルドターゲットが Progarm である場合読み込む</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>CookedOnly</td><td data-v-6f1598ec>クックビルドされた後の場合読み込む</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>Developer</td><td data-v-6f1598ec>デベロッパツールをサポートしたエンジン上でのみ読み込む</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>Editor</td><td data-v-6f1598ec>エディタビルドの場合読み込む</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>EditorNoCommandlet</td><td data-v-6f1598ec>エディタビルドかつコマンドレットでない場合読み込む</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>Program</td><td data-v-6f1598ec>Program ビルドされた場合のみ読み込む</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>ServerOnly</td><td data-v-6f1598ec>Server ビルドされた場合のみ読み込む</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>ClientOnly</td><td data-v-6f1598ec>Client ビルドされた場合のみ読み込む</td></tr></tbody></table>
<h3 id="loadingphase" data-v-6f1598ec><a href="#loadingphase" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>LoadingPhase</h3>


















































<table data-v-6f1598ec><thead data-v-6f1598ec><tr data-v-6f1598ec><th data-v-6f1598ec>読み込み順</th><th data-v-6f1598ec>ローディングフェーズ名</th><th data-v-6f1598ec>タイミング</th></tr></thead><tbody data-v-6f1598ec><tr data-v-6f1598ec><td data-v-6f1598ec>1</td><td data-v-6f1598ec>EarliestPossible</td><td data-v-6f1598ec>可能な限り最も早く読み込みます</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>2</td><td data-v-6f1598ec>PostConfigInit</td><td data-v-6f1598ec>エンジン設定の初期化後に読み込みます</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>3</td><td data-v-6f1598ec>PreEaryLoadingScreen</td><td data-v-6f1598ec>PreLoadingScreen よりも前に読み込みます</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>4</td><td data-v-6f1598ec>PreLoadingScreen</td><td data-v-6f1598ec>画面が起動する前に読み込みます</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>5</td><td data-v-6f1598ec>PreDefault</td><td data-v-6f1598ec>Default の前に読み込みます</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>6</td><td data-v-6f1598ec>Default</td><td data-v-6f1598ec>通常のモジュールロードタイミングで読み込みます</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>7</td><td data-v-6f1598ec>PostDefault</td><td data-v-6f1598ec>Default の後に読み込みます</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>8</td><td data-v-6f1598ec>PostEngineInit</td><td data-v-6f1598ec>エンジンの初期化処理が終了したあとに読み込みます</td></tr></tbody></table>
<p data-v-6f1598ec>なお、モジュールを追加する際には以下のようにします。</p>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>MyProject.uproject</div><pre data-v-6f1598ec><code class="language-json" data-v-6f1598ec>{
	"FileVersion": 3,
	"EngineAssociation": "4.22",
	"Category": "",
	"Description": "",
	"Modules": [
		{
			"Name": "MyProject",
			"Type": "Runtime",
			"LoadingPhase": "Default"
		},
		{
			"Name": "NewModule",
			"Type": "Editor",
			"LoadingPhase": "Default"
		}
	]
}</code></pre></div>
<h2 id="なぜビルド設定が-c" data-v-6f1598ec><a href="#%E3%81%AA%E3%81%9C%E3%83%93%E3%83%AB%E3%83%89%E8%A8%AD%E5%AE%9A%E3%81%8C-c" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>なぜビルド設定が C#?</h2>
<p data-v-6f1598ec>設定ファイルが C#なのは、UE4 のビルドツールが本体が C#で書かれていることに由来します。</p>
<p data-v-6f1598ec>モジュールファイルや後述のターゲットファイルといった C#による設定ファイルは、Generate ~などのメニューからプロジェクトを生成する際にビルドが行われ、そのプロジェクトにおけるモジュールのビルドルールとなる DLL が生成されます。</p>
<p data-v-6f1598ec>これをビルドツール本体が動的リンクすることで、C++プロジェクトのゲームモジュールを含めた適切なビルドを行っているんだと思います。（間違っていたらごめんなさい）
謎のビルドエラーが起こったときに Intermediate を消すと動くのはここにも一因があると思われます。</p>
<p data-v-6f1598ec>コンテキストメニュー
<img alt="image.png" src="/article-assets/unrealengine/a-little-more-about-the-ue4-module//build-context-menu.png" data-v-6f1598ec></p>
<p data-v-6f1598ec>生成されたビルドルールの DLL
<img alt="image.png" src="/article-assets/unrealengine/a-little-more-about-the-ue4-module//build-rule-dlls.png" data-v-6f1598ec></p>
<p data-v-6f1598ec>単なる設定ファイルとしてだけでなく、ビルド時に行いたい処理なども記述できるので結構便利です。</p>
<h1 id="モジュールの実装を確認してみる" data-v-6f1598ec><a href="#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%AE%E5%AE%9F%E8%A3%85%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>モジュールの実装を確認してみる</h1>
<p data-v-6f1598ec>ここまでモジュールの設定方法とビルドについて詳しく見てきましたが、肝心のモジュールの宣言方法に触れていません。モジュール自体は C++実装なのですから、モジュールの宣言も C++で行ってやる必要があります。</p>
<p data-v-6f1598ec>改めてモジュールの構成を示します。</p>
<div class="remark-highlight" data-v-6f1598ec><pre class="language-treeview" data-v-6f1598ec><code class="language-treeview" data-v-6f1598ec>-- Source
    |-- MyProject
    |   |-- MyProject.Build.cs
    |   |-- MyProject.cpp
    |   `-- MyProject.h
    |-- MyProject.Target.cs
    `-- MyProjectEditor.Target.cs
</code></pre></div>
<p data-v-6f1598ec>C#のファイルたちは皆設定を行うファイルだったので、モジュールの実装を行うのは残った C++ファイル 2 つ、<code data-v-6f1598ec>MyProject.h</code>と<code data-v-6f1598ec>MyProject.cpp</code>です。</p>
<p data-v-6f1598ec>とりあえず、デフォルトの状態のこの 2 つのファイルを見てみましょう。</p>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>MyProject.h</div><pre data-v-6f1598ec><code class="language-cpp" data-v-6f1598ec>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"</code></pre></div>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>MyProject.cpp</div><pre data-v-6f1598ec><code class="language-cpp" data-v-6f1598ec>// Fill out your copyright notice in the Description page of Project Settings.

#include "MyProject.h"
#include "Modules/ModuleManager.h"

IMPLEMENT_PRIMARY_GAME_MODULE( FDefaultGameModuleImpl, MyProject, "MyProject" );</code></pre></div>
<p data-v-6f1598ec>もはや無です。というか、実装らしき箇所が 1 箇所しかありません。
これはこの C++プロジェクトが生成した、プライマリゲームモジュールをコードであるため、<code data-v-6f1598ec>IMPLEMENT_PRIMARY_GAME_MODULE</code>というマクロで、そのマクロ名の通りプライマリゲームモジュールが実装されています。
では、このマクロを含め、モジュール定義のためのマクロたちを紹介します。</p>
<h2 id="implement_primary_game_module" data-v-6f1598ec><a href="#implement_primary_game_module" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>IMPLEMENT_PRIMARY_GAME_MODULE</h2>
<p data-v-6f1598ec>これはたった今登場した、プライマリゲームモジュール実装のためのマクロです。
プライマリゲームモジュールはプロジェクト上に 1 つしか実装できないため、必然的にこのマクロもプロジェクトを通して 1 つのモジュールにしか書くことはありません。逆に、これがないと Shipping ビルドなどのモノリシックビルド時にビルドが通らないんじゃないかと思います。(試してないです)</p>
<div class="remark-highlight" data-v-6f1598ec><pre class="language-cpp" data-v-6f1598ec><code class="language-cpp" data-v-6f1598ec><span class="token function" data-v-6f1598ec>IMPLEMENT_PRIMARY_GAME_MODULE</span><span class="token punctuation" data-v-6f1598ec>(</span>ModuleImplClass<span class="token punctuation" data-v-6f1598ec>,</span> ModuleName<span class="token punctuation" data-v-6f1598ec>,</span> GameName<span class="token punctuation" data-v-6f1598ec>)</span>
</code></pre></div>
<p data-v-6f1598ec>このマクロは、第一引数に<strong data-v-6f1598ec>モジュールを実装したクラス</strong>、第二引数に<strong data-v-6f1598ec>モジュール名</strong>、第三引数に<strong data-v-6f1598ec>ゲーム(プロジェクト)名</strong>を取ります。</p>
<p data-v-6f1598ec>第一引数に渡すモジュールを実装したクラスは、後述の<code data-v-6f1598ec>IModuleInterface</code>というインターフェイスを継承して実装したモジュールクラスを渡すことができます。</p>
<p data-v-6f1598ec>第二引数に渡すモジュール名は、他のモジュールやエンジン上からこのモジュールを識別する際の名称として使われる文字列を決定します。実装クラスと同じ名前である必要はありません。例えば、ターゲットファイルの<code data-v-6f1598ec>ExtraModuleNames</code>に渡していたのはここで決定される識別名です。</p>
<p data-v-6f1598ec>第三引数はゲーム(プロジェクト)名を渡すのですが、実装を覗くと、この第三引数はもう利用されていません。昔はここに渡したゲーム名を利用した処理が行われていたようなのですが、現在は<code data-v-6f1598ec>.uproject</code>ファイルから自動的にプロジェクト名をパースしてくるようで、コード上でも廃止予定とされています。おそらく残っているのは後方互換性のためでしょう。現状も値を渡さなければエラーが出ますが、実際は文字列さえ渡しておけば良いと思われます。</p>
<h2 id="implement_game_module" data-v-6f1598ec><a href="#implement_game_module" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>IMPLEMENT_GAME_MODULE</h2>
<p data-v-6f1598ec>こちらはゲームモジュールを実装するためのマクロです。ゲームモジュールはプライマリゲームモジュールと異なり、プロジェクト上に複数個実装することが可能なため、このマクロも複数のモジュールに書くことができます。ゲームコードを含むモジュールはこれで実装しましょう。</p>
<div class="remark-highlight" data-v-6f1598ec><pre class="language-cpp" data-v-6f1598ec><code class="language-cpp" data-v-6f1598ec><span class="token function" data-v-6f1598ec>IMPLEMENT_GAME_MODULE</span><span class="token punctuation" data-v-6f1598ec>(</span>ModuleImplClass<span class="token punctuation" data-v-6f1598ec>,</span> ModuleName<span class="token punctuation" data-v-6f1598ec>)</span>
</code></pre></div>
<p data-v-6f1598ec>第一引数と第二引数はプライマリゲームモジュールの場合と同じで、実装クラスとその識別名を与えます。
(プライマリゲームモジュールの第三引数は廃止予定だったので、中身は異なりますが渡しているものは実質同じですね。)</p>
<h2 id="implement_module" data-v-6f1598ec><a href="#implement_module" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>IMPLEMENT_MODULE</h2>
<p data-v-6f1598ec>こちらはシンプルなモジュールを実装するためのマクロです。ゲームコードを含まないモジュールはこのマクロで実装されます。</p>
<div class="remark-highlight" data-v-6f1598ec><pre class="language-cpp" data-v-6f1598ec><code class="language-cpp" data-v-6f1598ec><span class="token function" data-v-6f1598ec>IMPLEMENT_MODULE</span><span class="token punctuation" data-v-6f1598ec>(</span>ModuleImplClass<span class="token punctuation" data-v-6f1598ec>,</span> ModuleName<span class="token punctuation" data-v-6f1598ec>)</span>
</code></pre></div>
<p data-v-6f1598ec>渡している引数は<code data-v-6f1598ec>IMPLEMENT_GAME_MODULE</code>と同様です。</p>
<p data-v-6f1598ec>ここで使われている<code data-v-6f1598ec>IMPLEMENT_PRIMARY_GAME_MODULE</code>というマクロはプライマリゲームモジュールを実装する(implement なので)マクロなのですが、実は初期状態では、はじめから用意されている<code data-v-6f1598ec>FDefaultGameModuleImpl</code>という最低限のクラスをゲームモジュールとして利用(代用？)しているだけです。もっとモジュールクラス自体に機能を持たせるために用意されている手段は後述しますので、とりあえず<code data-v-6f1598ec>FDefaultGameModuleImpl</code>の中身を見てみます。</p>
<h2 id="モジュール実装マクロの余談" data-v-6f1598ec><a href="#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%AE%9F%E8%A3%85%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E4%BD%99%E8%AB%87" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>モジュール実装マクロの余談</h2>
<font color="darkred" data-v-6f1598ec>
<strong data-v-6f1598ec>この節には不確定要素が多いです。</strong>
</font>

ここまで紹介してきたモジュール実装のためのマクロたちですが、実装を見るとこれらはビルド方式によって内部処理が変動しているようです。プラットフォームなどによる変動はもちろんあるのですが、最も大きいのが**Monolithic(一枚岩)
<strong data-v-6f1598ec>と</strong>
Modular(まとまりごと)**という 2 種類のリンクタイプのによる違いです。
リンクがわからない方は詳しくは調べてほしいのですが、ざっくり言えばコンパイルした複数のファイルや必要なライブラリを正しく関連付ける作業です。
<p data-v-6f1598ec>この 2 つのリンクタイプによって生まれるビルドの結果は「ビルド結果として得られるバイナリが実行ファイルにまとまっているか、多量の.dll などに分散しているか」の違いがあります。</p>
<p data-v-6f1598ec>パッケージングのビルドや Game ビルド(Shipping ビルド)などは実行ファイルとしてバイナリがまとまるため<strong data-v-6f1598ec>Monolithic</strong>で行われて、Editor ビルドの際などは.dll としてバイナリがモジュールごとに生成されるため<strong data-v-6f1598ec>Modular</strong>で行われていることがわかります。</p>
<p data-v-6f1598ec>そして、Modular でリンクが行われる際、前述の<code data-v-6f1598ec>IMPLEMENT_MODULE</code>,<code data-v-6f1598ec>IMPLEMENT_GAME_MODULE</code>,<code data-v-6f1598ec>IMPLEMENT_PRIMARY_GAME_MODULE</code>の 3 つのモジュール実装マクロの内部処理に<strong data-v-6f1598ec>差はありません</strong>。</p>
<p data-v-6f1598ec>すべての実装マクロが、リンクタイプが Modular 時の<code data-v-6f1598ec>IMPLEMENT_MODULE</code>の処理へと渡されています。これは推測ですが、Modular すなわち Editor 上で開発を行っている際には、エンジンというソフトウェアの管理はエンジン側にあるため、ゲームモジュールを含めすべてのモジュールは内部的には同等のプログラムとして扱われているのではないでしょうか。確かに、Game ビルド時のようにプライマリゲームモジュール中心で動作していたら、それ自身のホットリロードは困難な気がします。(怪しいです。違ったら指摘してほしいところ No.1 です)</p>
<p data-v-6f1598ec>一方 Monolithic 時の実装は<code data-v-6f1598ec>IMPLEMENT_PRIMARY_GAME_MODULE</code>が独自の複雑な処理に変わったり、<code data-v-6f1598ec>IMPLEMENT_MODULE</code>の処理からホットリロードの処理が外されたりしています。しかし、実装を見る限りでは<code data-v-6f1598ec>IMPLEMENT_MODULE</code>と<code data-v-6f1598ec>IMPLEMENT_GAME_MODULE</code>の間にはこちらでも差異は見られない気がします……。というか、<code data-v-6f1598ec>IMPLEMENT_GAME_MODULE</code>の実装は常に以下になっています。</p>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>ModuleManager.hより抜粋</div><pre data-v-6f1598ec><code class="language-cpp" data-v-6f1598ec>#define IMPLEMENT_GAME_MODULE( ModuleImplClass, ModuleName ) \
	IMPLEMENT_MODULE( ModuleImplClass, ModuleName )</code></pre></div>
<p data-v-6f1598ec>うーん。各所の説明を読むと別のものとされているのですが、表面上のものなのでしょうか？有識者の方、教えて下さい。</p>
<h1 id="モジュールクラスについて" data-v-6f1598ec><a href="#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>モジュールクラスについて</h1>
<p data-v-6f1598ec>ここでは、モジュール実装マクロに渡すモジュールクラスについて触れます。
例として、デフォルトで生成された<code data-v-6f1598ec>IMPLEMENT_PRIMARY_GAME_MODULE</code>に渡されていた<code data-v-6f1598ec>FDefaultGameModuleImpl</code>クラスの実装に注目しましょう。</p>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>ModuleManager.hより抜粋</div><pre data-v-6f1598ec><code class="language-cpp" data-v-6f1598ec>class FDefaultModuleImpl
	: public IModuleInterface
{ };

class FDefaultGameModuleImpl
	: public FDefaultModuleImpl
{
	virtual bool IsGameModule() const override
	{
		return true;
	}
};</code></pre></div>
<p data-v-6f1598ec>ここからわかることは、<code data-v-6f1598ec>IModuleInterface</code>というクラス(インターフェイス?)を継承して、先程の<code data-v-6f1598ec>FDefaultGameModuleImpl</code>は作られていたということです。そして、<code data-v-6f1598ec>FDefaultGameModuleImpl</code>は唯一つ、<code data-v-6f1598ec>IsGameModule</code>という<code data-v-6f1598ec>bool</code>を返すメソッドで<code data-v-6f1598ec>true</code>を返すというオーバーライドが実装されています。<code data-v-6f1598ec>IsGameModule</code>はその名と型の通り、自らがゲームモジュールである場合<code data-v-6f1598ec>true</code>を返すよう設定するためのメソッドです。</p>
<p data-v-6f1598ec>ここではこれ 1 つのみですが、<code data-v-6f1598ec>IModuleInterface</code>が宣言・定義されている<code data-v-6f1598ec>ModuleInterface.h</code>の実装を覗くと、他のオーバーライド可能なメソッドを知ることができます。自分でゲームモジュールを追加で宣言する場合には、このあたりを利用することが多いため、一度目を通しておくと良いです。一応ドキュメントもありますが、実装ファイル以上の情報はありません。</p>
<blockquote data-v-6f1598ec>
<p data-v-6f1598ec>IModuleInterface
<a href="https://api.unrealengine.com/INT/API/Runtime/Core/Modules/IModuleInterface/index.html" rel="nofollow noopener noreferrer" target="_blank" data-v-6f1598ec>https://api.unrealengine.com/INT/API/Runtime/Core/Modules/IModuleInterface/index.html</a></p>
</blockquote>
<h1 id="モジュール実装に多用されるメソッド" data-v-6f1598ec><a href="#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%AE%9F%E8%A3%85%E3%81%AB%E5%A4%9A%E7%94%A8%E3%81%95%E3%82%8C%E3%82%8B%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>モジュール実装に多用されるメソッド</h1>
<p data-v-6f1598ec><code data-v-6f1598ec>IModuleInterface</code>には、設定項目的なメソッド以外にも、モジュールの実装にあたって非常に重要なメソッドがいくつか定義されています。
それらをオーバライドすることで、独自モジュール実装に利用することができます。ここでは、特に使用頻度の高いメソッドについて触れます。</p>
<h2 id="startupmodule" data-v-6f1598ec><a href="#startupmodule" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>StartupModule</h2>
<p data-v-6f1598ec>モジュールの DLL がロードが開始された直後に呼び出されるメソッドです。モジュールのオブジェクトが作成されて真っ先に呼び出されると考えれば良いです。ここには、依存関係にあるモジュールの読み込みや、このモジュールで行う実装の初期化処理などを行うことができます。</p>
<h2 id="postloadcallback" data-v-6f1598ec><a href="#postloadcallback" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>PostLoadCallback</h2>
<p data-v-6f1598ec>モジュールのロードが後に実行されるメソッドです。</p>
<h2 id="shutdonwmodule" data-v-6f1598ec><a href="#shutdonwmodule" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>ShutdonwModule</h2>
<p data-v-6f1598ec>モジュールが完全にアンロードされる直前に呼び出されます。終了時処理などを行うことができます。</p>
<h2 id="preunloadcallback" data-v-6f1598ec><a href="#preunloadcallback" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>PreUnloadCallback</h2>
<p data-v-6f1598ec>モジュールのアンロード開始前に呼び出されるメソッドです。</p>
<p data-v-6f1598ec>この 4 つのメソッドを以下のような実装でオーバーライドしてビルドの上、ホットリロードが行われた場合の出力を確認してみます。</p>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>実装例.cpp</div><pre data-v-6f1598ec><code class="language-cpp" data-v-6f1598ec>
/*
** このコードは単体では動作しません。また、ShutdownModuleとPreUnloadCallbackについては
** 前回ビルドの結果が出力されるため、2回以上リビルドしなければ後述の出力は得られません。
*/

class FMyProjectModule : public FDefaultGameModuleImpl
{
public:
    virtual void StartupModule() override
    {
        UE_LOG(LogTemp, Log, TEXT("StartupModule"))
    }

    virtual void PostLoadCallback() override
    {
        UE_LOG(LogTemp, Log, TEXT("PostLoadCallback"))
    }

    virtual void ShutdownModule() override
    {
        UE_LOG(LogTemp, Log, TEXT("ShutdonwModule"))
    }

    virtual void PreUnloadCallback() override
    {
        UE_LOG(LogTemp, Log, TEXT("PreUnloadCallback"))
    }
};

IMPLEMENT_PRIMARY_GAME_MODULE(FMyProjectModule, MyProjectModule, "MyProject")
</code></pre></div>
<div class="code-extra" data-v-6f1598ec><div class="filename" data-v-6f1598ec>ホットリロード時の出力</div><pre data-v-6f1598ec><code class="language-text" data-v-6f1598ec>LogTemp: PreUnloadCallback
LogTemp: ShutdonwModule
LogTemp: StartupModule
LogTemp: PostLoadCallback</code></pre></div>
<p data-v-6f1598ec>つまり、以下のような実行順で実行されるということがわかります。</p>





























<table data-v-6f1598ec><thead data-v-6f1598ec><tr data-v-6f1598ec><th data-v-6f1598ec>実行順</th><th data-v-6f1598ec>メソッド名</th></tr></thead><tbody data-v-6f1598ec><tr data-v-6f1598ec><td data-v-6f1598ec>1</td><td data-v-6f1598ec>StartupModule</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>2</td><td data-v-6f1598ec>PostLoadCallback</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>-</td><td data-v-6f1598ec>(モジュール動作中)</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>3</td><td data-v-6f1598ec>PreUnloadCallback</td></tr><tr data-v-6f1598ec><td data-v-6f1598ec>4</td><td data-v-6f1598ec>ShutdonwModule</td></tr></tbody></table>
<p data-v-6f1598ec>これらは本当によく使うため、覚えておきましょう。</p>
<h1 id="まとめ" data-v-6f1598ec><a href="#%E3%81%BE%E3%81%A8%E3%82%81" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>まとめ</h1>
<ul data-v-6f1598ec>
<li data-v-6f1598ec>UE4 はモジュールの集合体！</li>
<li data-v-6f1598ec>モジュールには種類があって、使い分ける</li>
<li data-v-6f1598ec>モジュールは自作できる。</li>
<li data-v-6f1598ec>モジュール実装のための便利なものが親として提供されているから、頑張って使いこなそう！</li>
</ul>
<h1 id="おわりに" data-v-6f1598ec><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB" aria-hidden="true" tabindex="-1" data-v-6f1598ec><span class="icon icon-link" data-v-6f1598ec></span></a>おわりに</h1>
<p data-v-6f1598ec>粗く長くやりましたが、モジュールの宣言のされかたやビルドツールとの関わりなどが少しわかっていただけたら嬉しいです。</p></div></div></article> <section data-v-6bc0f40a data-v-71d61762><h2 data-v-6bc0f40a>share</h2> <ul class="share-list" data-v-6bc0f40a><li data-v-6bc0f40a><a href="https://twitter.com/share?
url=https://strv.dev/blog/unrealengine--a-little-more-about-the-ue4-module&
text=ちょっとだけくわしくUE4 モジュールの話&
via=strvert" rel="nofollow" target="_blank" data-v-6bc0f40a><span class="im icon" data-v-6bc0f40a></span></a></li> <li data-v-6bc0f40a><a href="http://www.facebook.com/share.php?u=https://strv.dev/blog/unrealengine--a-little-more-about-the-ue4-module" rel="nofollow" target="_blank" data-v-6bc0f40a><span class="im icon" data-v-6bc0f40a></span></a></li></ul></section> <div class="surround-menu" data-v-6f1598ec data-v-71d61762><section data-fetch-key="data-v-08b63208:0" class="wrapper" data-v-08b63208 data-v-71d61762><div class="prev button" data-v-08b63208><!----></div> <div class="seriesname button" data-v-08b63208><a href="/blog/series/undefined" data-v-08b63208>
      
    </a></div> <div class="next button" data-v-08b63208><!----></div></section></div> <article class="giscus-wrapper" data-v-6f1598ec data-v-71d61762><div data-v-71d61762><div class="giscus"></div></div></article></div></div></div></div></main> <div class="footer-wrapper" data-v-194ed6b2 data-v-32d9e426><footer class="footer-main" data-v-194ed6b2><section class="contact" data-v-b716246c data-v-194ed6b2><h2 data-v-b716246c>コンタクト</h2> <address data-v-b716246c><p data-v-b716246c><span class="im icon" data-v-b716246c></span> <span data-v-b716246c><a href="https://github.com/strvert" class="display" data-v-b716246c>strvert</a></span></p><p data-v-b716246c><span class="im icon" data-v-b716246c></span> <span data-v-b716246c><a href="https://twitter.com/strvert" class="display" data-v-b716246c>@strvert</a></span></p><p data-v-b716246c><span class="im icon" data-v-b716246c></span> <span class="display" data-v-b716246c><div class="container msgbox" data-v-e0d516b2 data-v-753eb174 data-v-4e732b52 data-v-b716246c><div class="msgbox hide" data-v-e0d516b2><span data-v-e0d516b2>コピー完了！</span></div> <div data-v-e0d516b2><div class="content" data-v-e0d516b2 data-v-753eb174><span data-v-e0d516b2 data-v-4e732b52><span class="head" data-v-e0d516b2 data-v-4e732b52>strv</span><span class="tail" data-v-e0d516b2 data-v-4e732b52>strv.dev</span></span></div></div></div></span></p></address></section> <div class="infos" data-v-194ed6b2><p data-v-194ed6b2><span class="copyright" data-v-194ed6b2>© 2021 stonriver (Riku Ishikawa).</span></p></div></footer></div></div></div></div><script defer src="/_nuxt/static/1650903231/blog/unrealengine--a-little-more-about-the-ue4-module/state.js"></script><script src="/_nuxt/runtime.5493da2.js" defer></script><script src="/_nuxt/pages/blog/_blogpost.f2e9a06.js" defer></script><script src="/_nuxt/components/atoms-blogpost-frame.bfd4ae4.js" defer></script><script src="/_nuxt/commons/app.d8c8a15.js" defer></script><script src="/_nuxt/vendors/app.50be47b.js" defer></script><script src="/_nuxt/app.421d0ed.js" defer></script>
  </body>
</html>
