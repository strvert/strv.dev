<!doctype html>
<html data-n-head-ssr lang="ja" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22ja%22%7D%7D">
  <head>
    <title>OpenGL入門から3DCGレンダラ実装まで その3 - strv.dev</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><meta data-n-head="ssr" data-hid="og:locale" property="og:locale" content="ja_jp"><meta data-n-head="ssr" data-hid="og:site_name" property="og:site_name" content="strv.dev"><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="article"><meta data-n-head="ssr" name="twitter:card" content="summary_large_image"><meta data-n-head="ssr" name="twitter:creator" content="@strvert"><meta data-n-head="ssr" data-hid="description" name="description" content="OpenGL入門から3DCGレンダラ実装まで"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="OpenGL入門から3DCGレンダラ実装まで"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https://strv.dev/blog/series-opengl--opengl-3"><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="strv.dev"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://strv.dev/images/ogp/generated/series-opengl--opengl-3.png"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="apple-touch-icon" type="image/png" href="/apple-touch-icon-180x180.png"><link data-n-head="ssr" rel="icon" type="image/png" href="/icon-192x192.png"><link data-n-head="ssr" data-hid="gf-prefetch" rel="dns-prefetch" href="https://fonts.gstatic.com/"><link data-n-head="ssr" data-hid="gf-preconnect" rel="preconnect" href="https://fonts.gstatic.com/" crossorigin=""><link data-n-head="ssr" data-hid="gf-preload" rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=M PLUS Rounded 1c:wght@300;400;500&family=Source Code Pro:wght@300;400&display=swap"><script data-n-head="ssr" src="https://polyfill.io/v3/polyfill.min.js?features=WebAnimations"></script><script data-n-head="ssr" data-hid="gf-script">!function(){var e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=M PLUS Rounded 1c:wght@300;400;500&family=Source Code Pro:wght@300;400&display=swap",document.querySelector("head").appendChild(e)}()</script><noscript data-n-head="ssr" data-hid="gf-noscript"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=M PLUS Rounded 1c:wght@300;400;500&family=Source Code Pro:wght@300;400&display=swap"></noscript><link rel="preload" href="/_nuxt/runtime.830c5ca.js" as="script"><link rel="preload" href="/_nuxt/commons/app.420d51d.js" as="script"><link rel="preload" href="/_nuxt/vendors/app.9c2c6c3.js" as="script"><link rel="preload" href="/_nuxt/app.4b6f5c2.js" as="script"><link rel="preload" href="/_nuxt/pages/blog/_blogpost.c22916d.js" as="script"><link rel="preload" href="/_nuxt/vendors/pages/blog/_blogpost.390c1eb.js" as="script"><style data-vue-ssr-id="0aa7b55a:0 0d958c9e:0 7e9a2abe:0 dbf98e90:0 7873d54e:0 bd74dace:0 298082d8:0 63cff6fc:0 6a5e1810:0 4da618ab:0 b0b29ba2:0 9fa04012:0">*,:after,:before{box-sizing:border-box}:after,:before{text-decoration:inherit;vertical-align:inherit}html{cursor:default;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;word-break:break-word}body{margin:0}h1{font-size:2em;margin:.67em 0}dl dl,dl ol,dl ul,ol dl,ol ol,ol ul,ul dl,ul ol,ul ul{margin:0}hr{height:0;overflow:visible}main{display:block}nav ol,nav ul{list-style:none;padding:0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}audio,canvas,iframe,img,svg,video{vertical-align:middle}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}iframe,img{border-style:none}svg:not([fill]){fill:currentColor}svg:not(:root){overflow:hidden}table{border-collapse:collapse}button,input,select{margin:0}button{overflow:visible;text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}fieldset{border:1px solid #a0a0a0;padding:.35em .75em .625em}input{overflow:visible}legend{color:inherit;display:table;max-width:100%;white-space:normal}progress{display:inline-block;vertical-align:baseline}select{text-transform:none}textarea{margin:0;overflow:auto;resize:vertical}[type=checkbox],[type=radio]{padding:0}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}details,dialog{display:block}dialog{background-color:#fff;border:solid;color:#000;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;left:0;margin:auto;padding:1em;position:absolute;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}dialog:not([open]){display:none}summary{display:list-item}canvas{display:inline-block}template{display:none}[tabindex],a,area,button,input,label,select,summary,textarea{touch-action:manipulation}[hidden]{display:none}[aria-busy=true]{cursor:progress}[aria-controls]{cursor:pointer}[aria-disabled=true],[disabled]{cursor:not-allowed}[aria-hidden=false][hidden]{display:inline;display:initial}[aria-hidden=false][hidden]:not(:focus){clip:rect(0,0,0,0);position:absolute}html{font-family:-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN","Hiragino Sans",Meiryo,sans-serif,"Segoe UI Emoji";font-size:15px;word-wrap:break-word;word-break:break-word;color:var(--strvdev-text-color);background-color:var(--strvdev-bg-color);height:100%}body{overflow-x:hidden}a{color:var(--strvdev-link-color);-webkit-text-decoration-line:none;text-decoration-line:none;text-decoration-thickness:.07em}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline;-webkit-text-decoration-style:dashed;text-decoration-style:dashed}.rounded-font{font-weight:500;font-family:"M PLUS Rounded 1c",sans-serif}::-webkit-scrollbar{background:#c9c9c9;width:7.5px;height:7.5px}::-webkit-scrollbar-thumb{background:#808494;border-radius:5px}::-moz-selection{text-shadow:none;background:#a3c4fc}::selection{text-shadow:none;background:#a3c4fc}.blogpost .nuxt-content{--header-height:44px}.blogpost .nuxt-content .headers-border,.blogpost .nuxt-content h1{border-bottom:2px solid;border-color:rgba(0,0,0,.13333)}.blogpost .nuxt-content .headers-margin,.blogpost .nuxt-content h1,.blogpost .nuxt-content h2,.blogpost .nuxt-content h3,.blogpost .nuxt-content h4,.blogpost .nuxt-content h5,.blogpost .nuxt-content h6{padding-top:var(--header-height);margin-top:calc(var(--header-height)*-1 + 1.7rem)}.blogpost .nuxt-content h1{font-size:1.7rem}.blogpost .nuxt-content h1,.blogpost .nuxt-content h2,.blogpost .nuxt-content h3,.blogpost .nuxt-content h4,.blogpost .nuxt-content h5,.blogpost .nuxt-content h6{position:relative}.blogpost .nuxt-content h1:hover a:before,.blogpost .nuxt-content h2:hover a:before,.blogpost .nuxt-content h3:hover a:before,.blogpost .nuxt-content h4:hover a:before,.blogpost .nuxt-content h5:hover a:before,.blogpost .nuxt-content h6:hover a:before{content:"§";display:block;width:2em;position:absolute;font-size:1em;left:-1em;bottom:.05em}.blogpost .nuxt-content .inline-code,.blogpost .nuxt-content li code,.blogpost .nuxt-content p code{font-family:var(--source-code-font);background-color:hsla(0,0%,100%,.56471);border-radius:4px;margin:0 .2em;padding:0 .2em}.blogpost .nuxt-content p{font-size:1.08rem;letter-spacing:.03em;line-height:3ex}.blogpost .nuxt-content .panel-shadow,.blogpost .nuxt-content img,.blogpost .nuxt-content pre,.blogpost .nuxt-content table{box-shadow:5px 5px 7px 2px rgba(0,0,0,.03922)}.blogpost .nuxt-content pre{margin:0;border-radius:5px;border:2px solid rgba(0,0,0,.13333);padding-top:2rem;padding-bottom:2rem}.blogpost .nuxt-content pre code{font-family:var(--source-code-font)}.blogpost .nuxt-content .nuxt-content-highlight{position:relative}.blogpost .nuxt-content .filename{position:absolute;right:7px;transform:translateY(7px);font-size:.85rem;padding-left:5px;padding-right:4px;border-radius:4px;background-color:rgba(0,0,0,.03922);font-family:var(--source-code-font)}.blogpost .nuxt-content img{display:block;margin:0 auto;max-width:100%;min-width:70%;border-radius:4px}.blogpost .nuxt-content table{width:100%}.blogpost .nuxt-content table thead{border-radius:40px;background-color:var(--strvdev-palette-4);color:hsla(0,0%,100%,.85098)}.blogpost .nuxt-content table tbody tr:nth-child(2n){background-color:#ccc}.blogpost .nuxt-content table tbody td{padding:.5em}.blogpost .nuxt-content .footnotes li{padding-top:var(--header-height);margin-top:calc(var(--header-height)*-1)}:root{--source-code-font:"Source Code Pro";--strvdev-palette-1:#d9dbd9;--strvdev-palette-2:#7ac292;--strvdev-palette-3:#505464;--strvdev-palette-4:#273134;--strvdev-palette-5:#5184a5;--strvdev-palette-6:#a61010;--strvdev-bg-color:var(--strvdev-palette-1);--strvdev-text-color:var(--strvdev-palette-4);--strvdev-link-color:var(--strvdev-palette-5)}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.header[data-v-1c0c2ae1]{position:fixed;z-index:100;top:0;left:0}.content[data-v-1c0c2ae1]{max-width:800px;margin:0 auto}@media screen and (max-width:700px){.content[data-v-1c0c2ae1]{margin-left:10px;margin-right:10px}}.header-main[data-v-b321685e]{display:grid;grid-template-columns:repeat(5,1fr);grid-template-areas:"a b c d e";align-content:center;background-color:var(--strvdev-palette-1);box-shadow:0 0 3px 0 var(--strvdev-palette-3);width:100%;height:44px}.strvdev-logo[data-v-b321685e]{grid-area:c}svg[data-v-cc499a28]{display:block;margin:0 auto}.container-base[data-v-bdd67452]{margin-top:80px}.blogpost>header>.post-title[data-v-f027adea]{font-size:2rem;margin-bottom:1rem}.blogpost>header>.publish-time[data-v-f027adea]{font-size:.95rem;color:rgba(0,0,0,.53333);margin:0}.surround-menu[data-v-f027adea]{display:block;margin-top:4rem}.wrapper[data-v-be034c16]{display:flex;justify-content:space-between}.button[data-v-be034c16]{display:block}</style><link rel="preload" href="/_nuxt/static/1632324359/blog/series-opengl--opengl-3/state.js" as="script"><link rel="preload" href="/_nuxt/static/1632324359/blog/series-opengl--opengl-3/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1632324359/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div data-v-1c0c2ae1><div class="header-main header" data-v-b321685e data-v-1c0c2ae1><div class="strvdev-logo" data-v-b321685e><a href="/" class="nuxt-link-active" data-v-b321685e><div data-v-cc499a28 data-v-b321685e><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 35.893 6.419" width="170" height="30.43" style="isolation:isolate" data-v-cc499a28><defs data-v-cc499a28><clipPath id="_clipPath_wRGPbw1kW50q8FvcamYb3Hxr115iy0Iy" data-v-cc499a28><rect width="35.893" height="6.419" data-v-cc499a28></rect></clipPath></defs> <g clip-path="url(#_clipPath_wRGPbw1kW50q8FvcamYb3Hxr115iy0Iy)" data-v-cc499a28><clipPath id="_clipPath_I8fUhl3gs6z6fOmYoJZCtzdbffHu72Ll" data-v-cc499a28><rect x="0" y="0" width="35.893" height="6.419" transform="matrix(1,0,0,1,0,0)" fill="rgb(255,255,255)" data-v-cc499a28></rect></clipPath> <g clip-path="url(#_clipPath_I8fUhl3gs6z6fOmYoJZCtzdbffHu72Ll)" data-v-cc499a28><g class="characters" data-v-cc499a28><path d=" M 35.059 1.474 L 35.017 1.474 L 33.893 5.978 C 33.853 6.139 33.686 6.269 33.52 6.269 L 31.39 6.269 C 31.225 6.269 31.058 6.139 31.018 5.978 L 29.892 1.469 L 29.892 1.469 L 31.726 1.474 L 31.647 1.474 L 32.339 4.298 C 32.378 4.459 32.431 4.589 32.455 4.589 L 32.455 4.589 C 32.48 4.589 32.532 4.459 32.572 4.298 L 33.265 1.469 L 35.059 1.474 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 27.535 1.469 L 27.56 1.469 L 27.535 1.469 L 27.535 2.199 C 27.535 2.365 27.669 2.499 27.835 2.499 L 29.315 2.499 C 29.48 2.499 29.615 2.634 29.615 2.799 L 29.615 3.489 C 29.615 3.655 29.48 3.789 29.315 3.789 L 27.835 3.789 C 27.669 3.789 27.535 3.924 27.535 4.089 L 27.535 4.519 C 27.535 4.685 27.669 4.819 27.835 4.819 L 29.675 4.819 C 29.84 4.819 29.975 4.954 29.975 5.119 L 29.975 5.969 C 29.975 6.135 29.84 6.269 29.675 6.269 L 26.075 6.269 C 25.909 6.269 25.775 6.135 25.775 5.969 L 25.775 1.469 L 25.775 1.469 L 27.535 1.469 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 25.396 1.469 Q 25.414 1.537 25.43 1.609 L 25.43 1.609 L 25.43 1.609 Q 25.56 2.219 25.56 3.149 L 25.56 3.149 L 25.56 3.149 Q 25.56 4.069 25.43 4.679 L 25.43 4.679 L 25.43 4.679 Q 25.3 5.289 24.985 5.639 L 24.985 5.639 L 24.985 5.639 Q 24.67 5.989 24.12 6.129 L 24.12 6.129 L 24.12 6.129 Q 23.57 6.269 22.72 6.269 L 22.72 6.269 L 20.37 6.269 C 20.204 6.269 20.07 6.135 20.07 5.969 L 20.07 1.474 L 20.07 1.474 L 20.07 1.474 L 20.07 1.474 L 21.83 1.469 L 21.83 4.589 C 21.83 4.755 21.964 4.889 22.13 4.889 L 22.89 4.889 L 22.89 4.889 Q 23.33 4.889 23.5 4.744 L 23.5 4.744 L 23.5 4.744 Q 23.67 4.599 23.67 4.229 L 23.67 4.229 L 23.67 2.059 L 23.67 2.059 Q 23.67 1.689 23.5 1.544 L 23.5 1.544 L 23.5 1.544 Q 23.452 1.503 23.382 1.474 L 23.317 1.474 L 23.317 1.474 L 25.396 1.469 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 19.15 5.008 L 19.411 5.008 C 19.687 5.008 19.911 5.232 19.911 5.508 L 19.911 5.769 C 19.911 6.045 19.687 6.269 19.411 6.269 L 19.15 6.269 C 18.874 6.269 18.65 6.045 18.65 5.769 L 18.65 5.508 C 18.65 5.232 18.874 5.008 19.15 5.008 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 19.49 1.474 L 18.365 5.978 C 18.325 6.139 18.158 6.269 17.993 6.269 L 15.863 6.269 C 15.697 6.269 15.53 6.139 15.49 5.978 L 14.366 1.474 L 16.118 1.469 L 16.811 4.298 C 16.851 4.459 16.903 4.589 16.928 4.589 L 16.928 4.589 C 16.952 4.589 17.005 4.459 17.044 4.298 L 17.737 1.469 L 19.49 1.474 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 14.014 1.469 Q 14.082 1.826 14.096 2.276 L 14.096 2.276 L 14.096 2.276 Q 14.017 3.359 13.517 3.859 L 13.517 3.859 L 13.517 3.859 Q 13.396 3.981 13.376 3.994 C 13.24 4.088 13.194 4.281 13.273 4.426 L 14.143 6.006 C 14.223 6.151 14.153 6.269 13.987 6.269 L 12.677 6.269 C 12.512 6.269 12.32 6.148 12.249 5.998 L 11.602 4.63 C 11.531 4.481 11.339 4.359 11.173 4.359 L 11.037 4.359 C 10.872 4.359 10.737 4.494 10.737 4.659 L 10.737 5.969 C 10.737 6.135 10.603 6.269 10.437 6.269 L 9.277 6.269 C 9.112 6.269 8.977 6.135 8.976 5.969 L 8.946 1.469 L 10.737 1.469 L 10.737 2.769 C 10.737 2.935 10.872 3.069 11.037 3.069 L 11.707 3.069 L 11.707 3.069 Q 11.977 3.069 12.077 2.979 L 12.077 2.979 L 12.077 2.979 Q 12.177 2.889 12.177 2.649 L 12.177 2.649 L 12.177 1.889 L 12.177 1.889 Q 12.177 1.649 12.077 1.559 L 12.077 1.559 L 12.077 1.559 L 11.859 1.469 L 14.014 1.469 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 7.663 1.469 L 7.663 5.969 C 7.663 6.135 7.529 6.269 7.363 6.269 L 6.203 6.269 C 6.038 6.269 5.903 6.135 5.903 5.969 L 5.903 1.469 L 7.663 1.469 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 2.033 1.474 C 1.978 1.474 1.933 1.519 1.933 1.574 L 1.933 2.169 C 1.933 2.224 1.978 2.273 2.033 2.278 L 2.753 2.339 L 2.753 2.339 Q 3.553 2.409 4.048 2.639 L 4.048 2.639 L 4.048 2.639 Q 4.543 2.869 4.768 3.284 L 4.768 3.284 L 4.768 3.284 Q 4.993 3.699 4.993 4.349 L 4.993 4.349 L 4.993 4.349 Q 4.993 5.079 4.728 5.534 L 4.728 5.534 L 4.728 5.534 Q 4.463 5.989 3.898 6.204 L 3.898 6.204 L 3.898 6.204 Q 3.333 6.419 2.423 6.419 L 2.423 6.419 L 2.423 6.419 Q 1.753 6.419 1.138 6.339 L 1.138 6.339 L 1.138 6.339 L 0.247 6.151 C 0.085 6.117 -0.024 5.957 0.004 5.793 L 0.152 4.935 C 0.181 4.772 0.332 4.678 0.49 4.727 Q 0.693 4.789 1.203 4.864 L 1.203 4.864 L 1.203 4.864 Q 1.713 4.939 2.213 4.939 L 2.213 4.939 L 2.213 4.939 Q 2.473 4.939 2.673 4.929 L 2.673 4.929 L 2.673 4.929 L 2.805 4.914 C 2.97 4.895 3.103 4.745 3.103 4.579 L 3.103 4.319 C 3.103 4.154 2.97 4.007 2.805 3.993 L 2.193 3.939 L 2.193 3.939 Q 1.593 3.889 1.178 3.764 L 1.178 3.764 L 1.178 3.764 Q 0.763 3.639 0.513 3.414 L 0.513 3.414 L 0.513 3.414 Q 0.263 3.189 0.153 2.854 L 0.153 2.854 L 0.153 2.854 Q 0.043 2.519 0.043 2.039 L 0.043 2.039 L 0.043 2.039 Q 0.043 1.239 0.263 0.764 L 0.263 0.764 L 0.263 0.764 Q 0.521 0.163 1.036 0.019 L 1.036 0.019 L 1.036 0.019 L 1.036 0.019 L 1.036 1.469 L 1.728 1.469 L 2.033 1.474 L 2.033 1.474 Z " fill="rgb(51,60,73)" data-v-cc499a28></path></g> <g class="barcode" data-v-cc499a28><path d=" M 23.116 1.48 L 23.116 0 L 23.393 0 L 23.393 1.48 L 23.116 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 25.06 1.48 L 25.06 0 L 24.782 0 L 24.782 1.48 L 25.06 1.48 L 25.06 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 24.227 1.48 L 24.227 0 L 23.671 0 L 23.671 1.48 L 24.227 1.48 L 24.227 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 27.282 1.48 L 27.282 0 L 26.171 0 L 26.171 1.48 L 27.282 1.48 L 27.282 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 27.838 0 L 27.838 1.475 L 27.838 1.48 L 27.56 1.48 L 27.56 1.475 L 27.56 0 L 27.838 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 28.671 0 L 28.671 1.475 L 28.671 1.48 L 28.393 1.48 L 28.393 1.475 L 28.393 0 L 28.671 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 29.226 1.475 L 29.226 1.48 L 29.782 1.48 L 29.782 1.475 L 29.782 0 L 29.226 0 L 29.226 1.475 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 35.059 1.48 L 35.059 0 L 34.782 0 L 34.782 1.48 L 35.059 1.48 L 35.059 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 34.504 1.48 L 34.504 0 L 33.671 0 L 33.671 1.48 L 34.504 1.48 L 34.504 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 31.726 1.48 L 31.726 0 L 30.893 0 L 30.893 1.48 L 31.726 1.48 L 31.726 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 30.615 1.48 L 30.615 0 L 30.337 0 L 30.337 1.48 L 30.615 1.48 L 30.615 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 32.837 0 L 32.837 1.48 L 32.282 1.48 L 32.282 0 L 32.837 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 35.893 0.201 L 35.893 1.28 C 35.893 1.39 35.803 1.48 35.693 1.48 L 35.337 1.48 L 35.337 0 L 35.693 0 C 35.803 0 35.893 0.089 35.893 0.201 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 2.283 1.48 L 2.283 1.48 L 2.283 1.48 L 2.283 1.48 L 2.283 0 L 1.728 0 L 1.728 1.48 L 2.283 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 2.839 0 L 2.839 1.48 L 2.561 1.48 L 2.561 0 L 2.839 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 3.672 0 L 3.672 1.48 L 3.394 1.48 L 3.394 0 L 3.672 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 5.061 0 L 5.061 1.48 L 4.783 1.48 L 4.783 0 L 5.061 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 6.45 1.475 L 6.45 0 L 5.339 0 L 5.339 1.48 L 6.45 1.48 L 6.45 1.475 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 7.283 1.48 L 7.283 0.777 L 7.283 0 L 7.005 0 L 7.005 1.48 L 7.283 1.48 L 7.283 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 10.338 1.48 L 10.338 0 L 10.061 0 L 10.061 1.478 L 10.338 1.48 L 10.338 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 9.783 1.48 L 9.783 0 L 8.672 0 L 8.672 1.475 L 8.672 1.475 L 8.672 1.475 L 8.672 1.475 L 8.672 1.48 L 9.783 1.475 L 9.783 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 8.116 1.475 L 8.116 0 L 7.839 0 L 7.839 0.918 L 7.839 1.475 L 8.116 1.475 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 21.727 1.475 L 21.727 0 L 21.449 0 L 21.449 1.475 L 21.727 1.475 L 21.727 1.475 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 20.338 1.48 L 20.338 0 L 20.06 0 L 20.06 1.48 L 20.338 1.48 L 20.338 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 13.949 1.48 L 13.949 0 L 15.06 0 L 15.06 1.48 L 13.949 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 19.782 1.48 L 19.782 0 L 18.949 0 L 18.949 1.48 L 19.782 1.48 L 19.782 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 18.394 1.48 L 18.394 0 L 17.838 0 L 17.838 1.48 L 18.394 1.48 L 18.394 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 15.616 1.48 L 15.616 0 L 15.338 0 L 15.338 1.48 L 15.616 1.48 L 15.616 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 13.672 1.48 L 13.672 0 L 12.561 0 L 12.561 1.48 L 13.672 1.48 L 13.672 1.48 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 12.005 0 L 11.727 0 L 11.727 1.48 L 12.005 1.48 L 12.005 0 Z " fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 11.172 0 L 11.172 1.48 L 10.894 1.48 L 10.894 0 L 11.172 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 16.449 0 L 16.449 1.48 L 16.172 1.48 L 16.172 0 L 16.449 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 17.283 0 L 17.283 1.48 L 17.005 1.48 L 17.005 0 L 17.283 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path> <path d=" M 22.838 0 L 22.838 1.48 L 22.282 1.48 L 22.282 0 L 22.838 0 Z " fill-rule="evenodd" fill="rgb(51,60,73)" data-v-cc499a28></path></g></g></g></svg></div></a></div></div> <div class="content" data-v-1c0c2ae1><div class="container-base" data-v-bdd67452 data-v-1c0c2ae1><div data-fetch-key="data-v-f027adea:0" data-v-f027adea data-v-1c0c2ae1><article data-v-f027adea><div class="blogpost" data-v-f027adea><header data-v-f027adea><h1 class="post-title" data-v-f027adea>OpenGL入門から3DCGレンダラ実装まで その3</h1> <p class="publish-time" data-v-f027adea><time datetime="2021-09-23T00:24:33+09:00" data-v-f027adea>2021.09.23</time>に公開
        </p></header> <div class="nuxt-content" data-v-f027adea data-v-f027adea><h2 id="補助ライブラリ" data-v-f027adea data-v-f027adea><a href="#%E8%A3%9C%E5%8A%A9%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>補助ライブラリ</h2>
<p data-v-f027adea data-v-f027adea>ここまでOpenGLについて記述してきましたが、OpenGLがハードウェアやOSと近いものである特性上、ライブラリとしての取り扱いも特殊な箇所があります。直接的にプラットフォーム間の環境の差異を受けるため、OpenGLを用いたプログラミングでは本来プラットフォーム固有の実装を記述する必要があります。
しかし、これはかなり面倒なことですし、情報共有やクロスプラットフォーム性と言った面でも非常に効率が悪くなります。そこで、OpenGLにはいくつかの領域において補助ライブラリが存在します。</p>
<p data-v-f027adea data-v-f027adea>これは公式の仕様によるものではありませんが、一般的に広く使われており、公式もこういった補助ライブラリの利用を強く推奨しています。とはいえ、決してOpenGLを簡単な描画ライブラリとしてラップするような性質のものではなく、様々な種類があるOSやGPUを”GPUを使って描画や処理を行う環境”として抽象化してくれるに過ぎないという点には注意が必要です。</p>
<h3 id="opengl-load-library" data-v-f027adea data-v-f027adea><a href="#opengl-load-library" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>OpenGL Load Library</h3>
<p data-v-f027adea data-v-f027adea>一般的なC/C++のライブラリであれば、そのライブラリのヘッダをインクルードし、適切にリンカが参照を解決できるように設定すればライブラリの関数を利用することができます。
しかし、OpenGLはそれでは利用できません。これはプラットフォームによってOSやハードウェアの実行可能な命令が異なることに由来しているようで、OpenGLは実行時に利用する関数のポインタを生成し、変数に割り当てることで呼び出し可能オブジェクトの作成を行います。本来、プログラマはこの初期化処理を実装しないとOpenGLの関数を使うことすらできません。更に、このロード処理自体もプラットフォームによって異なる実装が必要となります。</p>
<p data-v-f027adea data-v-f027adea>これらは**OpenGL ロードライブラリ(OpenGL Loading Library)**と呼ばれる部類の補助ライブラリを利用することで自動化することが可能で、クロスプラットフォーム対応も容易となります。
以下に、いくつかの主要なOpenGLロードライブラリを紹介します。</p>
<h4 id="glewopengl-extension-wrangler" data-v-f027adea data-v-f027adea><a href="#glewopengl-extension-wrangler" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>GLEW（OpenGL Extension Wrangler）</h4>
<p data-v-f027adea data-v-f027adea>公式ページ: <a href="http://glew.sourceforge.net/" rel="nofollow noopener noreferrer" target="_blank" data-v-f027adea data-v-f027adea>http://glew.sourceforge.net/</a></p>
<p data-v-f027adea data-v-f027adea>Windows, Linux, Mac OS X, FreeBSD, Irix, Solarisなど多くのプラットフォームをサポートするOpenGLロードライブラリです。
インクルードして以下のように初期化関数を呼び出すことで、そのプラットフォームで利用可能なOpenGLの関数を読み込んで利用可能にすることができます。</p>
<div class="nuxt-content-highlight" data-v-f027adea data-v-f027adea><span class="filename" data-v-f027adea data-v-f027adea>Example</span><pre class="line-numbers language-cpp" data-v-f027adea data-v-f027adea><code data-v-f027adea data-v-f027adea>GLenum err <span class="token operator" data-v-f027adea data-v-f027adea>=</span> <span class="token function" data-v-f027adea data-v-f027adea>glewInit</span><span class="token punctuation" data-v-f027adea data-v-f027adea>(</span><span class="token punctuation" data-v-f027adea data-v-f027adea>)</span><span class="token punctuation" data-v-f027adea data-v-f027adea>;</span>
<span class="token keyword" data-v-f027adea data-v-f027adea>if</span> <span class="token punctuation" data-v-f027adea data-v-f027adea>(</span>GLEW_OK <span class="token operator" data-v-f027adea data-v-f027adea>!=</span> err<span class="token punctuation" data-v-f027adea data-v-f027adea>)</span>
<span class="token punctuation" data-v-f027adea data-v-f027adea>{</span>
  <span class="token comment" data-v-f027adea data-v-f027adea>/* 初期化に失敗した場合の処理 */</span>
  <span class="token function" data-v-f027adea data-v-f027adea>fprintf</span><span class="token punctuation" data-v-f027adea data-v-f027adea>(</span><span class="token constant" data-v-f027adea data-v-f027adea>stderr</span><span class="token punctuation" data-v-f027adea data-v-f027adea>,</span> <span class="token string" data-v-f027adea data-v-f027adea>"Error: %s\n"</span><span class="token punctuation" data-v-f027adea data-v-f027adea>,</span> <span class="token function" data-v-f027adea data-v-f027adea>glewGetErrorString</span><span class="token punctuation" data-v-f027adea data-v-f027adea>(</span>err<span class="token punctuation" data-v-f027adea data-v-f027adea>)</span><span class="token punctuation" data-v-f027adea data-v-f027adea>)</span><span class="token punctuation" data-v-f027adea data-v-f027adea>;</span>
<span class="token punctuation" data-v-f027adea data-v-f027adea>}</span>
</code></pre></div>
<h4 id="glad-multi-language-vulkanglgleseglglxwgl-loader-generator" data-v-f027adea data-v-f027adea><a href="#glad-multi-language-vulkanglgleseglglxwgl-loader-generator" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>glad (Multi-Language Vulkan/GL/GLES/EGL/GLX/WGL Loader-Generator)</h4>
<p data-v-f027adea data-v-f027adea>公式ページ: <a href="https://github.com/Dav1dde/glad" rel="nofollow noopener noreferrer" target="_blank" data-v-f027adea data-v-f027adea>https://github.com/Dav1dde/glad</a></p>
<p data-v-f027adea data-v-f027adea>多言語対応のロードライブラリ<strong data-v-f027adea data-v-f027adea>ジェネレータ</strong>です。ジェネレータというのはどういうことかと言うと、利用したい機能やプロファイル、APIバージョンなどを指定することで、使いたい機能のみを含んだロードライブラリを生成できるバックエンドであるということです。
このバックエンドのインターフェースはコマンドラインやWebサービスなど複数用意されており、利用したい手段を選んでローダーを生成することができます。
以下の画像はgladのWebインターフェースで、各設定を簡単に選択できるようになっていることがわかります。
<img alt="DeepinScreenshot_select-area_20191216071639.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/225893/0ac6b6d5-88d0-cf63-83d4-1d07715b90b0.png" data-v-f027adea data-v-f027adea></p>
<p data-v-f027adea data-v-f027adea>必要なものだけを選んでライブラリを生成することができるため、GLEWと比較してライブラリサイズが小さく軽量です。また、C/C++以外の言語やOpenGL以外のGL系インターフェースへの対応も行なわれているため、そういった利用の場合にも便利です。</p>
<p data-v-f027adea data-v-f027adea>今回の実装ではgladを利用します。</p>
<h3 id="contextwindow-toolkits-library" data-v-f027adea data-v-f027adea><a href="#contextwindow-toolkits-library" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>Context/Window Toolkits Library</h3>
<p data-v-f027adea data-v-f027adea>OpenGLはコンテキストを対象としてGPUを利用した処理を記述することができますが、コンテキスト自体の作成や、出来上がった画像をウィンドウとして画面に表示したりするところはサポートしてくれません。コンテキストの作成やウィンドウ表示/管理、入出力などはOS固有の手法が必要とされるため、この部分でも補助ライブラリを利用することが推奨されています。</p>
<h4 id="freeglut" data-v-f027adea data-v-f027adea><a href="#freeglut" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>freeglut</h4>
<p data-v-f027adea data-v-f027adea>公式ページ: <a href="http://freeglut.sourceforge.net/" rel="nofollow noopener noreferrer" target="_blank" data-v-f027adea data-v-f027adea>http://freeglut.sourceforge.net/</a></p>
<p data-v-f027adea data-v-f027adea>過去に主流だったGLUTというライブラリの後継で、ウィンドウ管理やキーボード/マウス入力などに対するサポートが含まれています。OpenGLコンテキストの生成にも対応しています。GLUTの後継であるというポリシーから、GLUTのインターフェースをあまり変えないように設計されています。GLUTから遡るとOpenGL自体と同じくらい歴史があり、情報が比較的豊富なようです。</p>
<h4 id="glfw" data-v-f027adea data-v-f027adea><a href="#glfw" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>GLFW</h4>
<p data-v-f027adea data-v-f027adea>公式ページ: <a href="https://www.glfw.org/" rel="nofollow noopener noreferrer" target="_blank" data-v-f027adea data-v-f027adea>https://www.glfw.org/</a></p>
<p data-v-f027adea data-v-f027adea>GLUTよりも新しく、GLUTなど他のライブラリでの経験を踏まえて設計されています。Linux, macOS, Microsoft Windows, FreeBSD, NetBSD, OpenBSDに対応し、頻繁にアップデートされています。マウス/キーボードに加えてジョイスティック入力へのサポートなども存在しています。
freeglutと比較してコンテキスト作成により詳細な属性設定が可能であったり、イベントループの扱いの違いによってより低レイテンシな入力処理対応が可能であったりするようです。</p>
<p data-v-f027adea data-v-f027adea>今回の実装ではGLFWを利用します。</p>
<h1 id="環境構築" data-v-f027adea data-v-f027adea><a href="#%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>環境構築</h1>
<p data-v-f027adea data-v-f027adea>さて、説明も終わって早速実装と行きたいところですが、まずは環境を作らなければなりません。以下では、今回使用するものについて簡単に触れます。</p>
<h2 id="インストールするもの" data-v-f027adea data-v-f027adea><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E3%82%82%E3%81%AE" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>インストールするもの</h2>
<h3 id="opengl本体" data-v-f027adea data-v-f027adea><a href="#opengl%E6%9C%AC%E4%BD%93" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>OpenGL本体</h3>
<p data-v-f027adea data-v-f027adea>だいたい入ってるんじゃないかと思いますが、お使いの環境で利用可能な実装をインストールしてください。僕は今回NVIDIAのプロプライエタリドライバに含まれているOpenGL 4.6の実装を利用しています。古いデバイスをお使いの場合4.6が利用できない可能性がありますが、今回の記事では最新の拡張などは利用しないので3.x以上であれば問題ないと思われます。</p>
<h3 id="補助ライブラリ系" data-v-f027adea data-v-f027adea><a href="#%E8%A3%9C%E5%8A%A9%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E7%B3%BB" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>補助ライブラリ系</h3>
<p data-v-f027adea data-v-f027adea>以下のものを利用します。</p>
<ul data-v-f027adea data-v-f027adea>
<li data-v-f027adea data-v-f027adea>glad</li>
<li data-v-f027adea data-v-f027adea>GLFW</li>
<li data-v-f027adea data-v-f027adea>glm</li>
</ul>
<p data-v-f027adea data-v-f027adea>上で説明した補助ライブラリに加えて、行列演算など数学系の処理を実装したライブラリであるglmも利用します。また、GLFWはご利用のディスプレイサーバに合ったものを選択するよう注意してください。</p>
<p data-v-f027adea data-v-f027adea>GLFWとglmについては、僕はArch Linux公式のリポジトリからパッケージマネージャを用いてインストールしました。
gladは各ディストロのリポジトリに存在しない可能性が高いためセットアップを説明します。
まず、<a href="https://glad.dav1d.de/" rel="nofollow noopener noreferrer" target="_blank" data-v-f027adea data-v-f027adea>このサイト</a>で以下のような設定を行なった上でGENERATEボタンを押すことで必要なものを含んだライブラリを生成することができます。プロファイルはコアプロファイルで固定ですが、OpenGLのバージョンについてはご自身の環境に合ったものを選択してください。僕と同じ環境で大丈夫な場合は、<a href="http://glad.dav1d.de/#profile=core&specification=gl&api=gl%3D4.6&api=gles1%3Dnone&api=gles2%3Dnone&api=glsc2%3Dnone&language=c&loader=on" rel="nofollow noopener noreferrer" target="_blank" data-v-f027adea data-v-f027adea>このパーマリンク</a>から僕が生成したものと全く同じものにアクセスすることもできます。
<img alt="DeepinScreenshot_select-area_20191217222125.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/225893/0c8ac0ee-e109-7f72-53ae-3121e334b339.png" data-v-f027adea data-v-f027adea></p>
<p data-v-f027adea data-v-f027adea>ファイルが生成されるとページが遷移し表示されるので、zipファイルをクリックしてダウンロードします。ダウンロードが完了したら、今回の開発で利用する作業ディレクトリをお好きなところに作成し、その直下にglad.zipを以下のように展開します。</p>
<div class="nuxt-content-highlight" data-v-f027adea data-v-f027adea><pre class="line-numbers language-text" data-v-f027adea data-v-f027adea><code data-v-f027adea data-v-f027adea>advent_gl/
└── glad/
    ├── include/
    └── src/
</code></pre></div>
<p data-v-f027adea data-v-f027adea>以上です。この配置を前提にこの後CMakeのセットアップなどを行います。</p>
<h3 id="コンパイラビルドツール系" data-v-f027adea data-v-f027adea><a href="#%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%A9%E3%83%93%E3%83%AB%E3%83%89%E3%83%84%E3%83%BC%E3%83%AB%E7%B3%BB" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>コンパイラ/ビルドツール系</h3>
<p data-v-f027adea data-v-f027adea>適当に入れます。僕はArch Linux公式のリポジトリからパッケージマネージャを用いてインストールしました。今回の開発ではビルド等はCUIから行います。</p>
<ul data-v-f027adea data-v-f027adea>
<li data-v-f027adea data-v-f027adea>CMake</li>
<li data-v-f027adea data-v-f027adea>make</li>
<li data-v-f027adea data-v-f027adea>gcc</li>
</ul>
<h2 id="ビルド環境の作成" data-v-f027adea data-v-f027adea><a href="#%E3%83%93%E3%83%AB%E3%83%89%E7%92%B0%E5%A2%83%E3%81%AE%E4%BD%9C%E6%88%90" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>ビルド環境の作成</h2>
<p data-v-f027adea data-v-f027adea>今回はCMakeを用いたビルド環境で開発を行います。CMakeについての細かい解説は行いませんので、わからなければ適時調べてください。</p>
<h3 id="cmakeliststxtの作成" data-v-f027adea data-v-f027adea><a href="#cmakeliststxt%E3%81%AE%E4%BD%9C%E6%88%90" aria-hidden="true" tabindex="-1" data-v-f027adea data-v-f027adea><span class="icon icon-link" data-v-f027adea data-v-f027adea></span></a>CMakeLists.txtの作成</h3>
<p data-v-f027adea data-v-f027adea>CMakeを用いたビルドを行うため、CMakeLists.txtを作製します。また、gladはプロジェクトと一緒にソースからビルドを行う必要があるため、サブディレクトリとして専用のCMakeLists.txtを用意します。作業ディレクトリ内の構成は以下のようになります。</p>
<div class="nuxt-content-highlight" data-v-f027adea data-v-f027adea><pre class="line-numbers language-text" data-v-f027adea data-v-f027adea><code data-v-f027adea data-v-f027adea>advent_ogl/
├── CMakeLists.txt
└── glad/
    ├── CMakeLists.txt
    ├── include/
    └── src/
</code></pre></div>
<p data-v-f027adea data-v-f027adea>追加した2つのCMakeLists.txtの内容は、以下に添付しておきます。このCMakeLists.txtは、作業ディレクトリ直下に配置されたmain.cppファイルを実行ファイルとしてビルドするように記述されています。</p>
<p data-v-f027adea data-v-f027adea>まずはメインとなる、プロジェクトビルド用のCMakeLists.txtです。</p>
<div class="nuxt-content-highlight" data-v-f027adea data-v-f027adea><pre class="line-numbers language-text" data-v-f027adea data-v-f027adea><code data-v-f027adea data-v-f027adea>cmake_minimum_required(VERSION 3.12)

# プロジェクト名の設定
project(advent_gl)

# 必須ライブラリの存在チェック
find_package(glfw3 REQUIRED)
find_package(glm REQUIRED)

# glad関係
include_directories(glad/include)
add_subdirectory(glad)

# コンパイルオプション
add_compile_options(-O2 -Wall)

# 実行ファイルの指定
add_executable(advent_gl main.cpp)

# 実行ファイルにリンクするライブラリの指定
target_link_libraries(advent_gl glad glfw glm ${CMAKE_DL_LIBS})

# c++17を使う
set_property(TARGET advent_gl PROPERTY CXX_STANDARD 17)
</code></pre></div>
<p data-v-f027adea data-v-f027adea>続いて、gladをライブラリとして認識させてリンクするためのCMakeLists.txtです。</p>
<div class="nuxt-content-highlight" data-v-f027adea data-v-f027adea><pre class="line-numbers language-text" data-v-f027adea data-v-f027adea><code data-v-f027adea data-v-f027adea>cmake_minimum_required(VERSION 3.12)

# gladという名前でCMakeに認識させるライブラリを作成
# 静的ライブラリとしてコンパイル。含まれるソースを指定。
add_library(glad STATIC
    src/glad.c
)
</code></pre></div>
<p data-v-f027adea data-v-f027adea>以上CMakeによるプロジェクトのセットアップです。大変シンプルですね。</p></div></div> <div class="surround-menu" data-v-f027adea><section data-fetch-key="data-v-be034c16:0" class="wrapper" data-v-be034c16 data-v-f027adea><div data-v-be034c16><a href="/blog/series-opengl--opengl-4" title="OpenGL入門から3DCGレンダラ実装まで その4" class="button" data-v-be034c16>＜＜ PREV</a></div> <div data-v-be034c16><!----></div></section></div></article></div></div></div></div></div></div><script defer src="/_nuxt/static/1632324359/blog/series-opengl--opengl-3/state.js"></script><script src="/_nuxt/runtime.830c5ca.js" defer></script><script src="/_nuxt/pages/blog/_blogpost.c22916d.js" defer></script><script src="/_nuxt/vendors/pages/blog/_blogpost.390c1eb.js" defer></script><script src="/_nuxt/commons/app.420d51d.js" defer></script><script src="/_nuxt/vendors/app.9c2c6c3.js" defer></script><script src="/_nuxt/app.4b6f5c2.js" defer></script>
  </body>
</html>
