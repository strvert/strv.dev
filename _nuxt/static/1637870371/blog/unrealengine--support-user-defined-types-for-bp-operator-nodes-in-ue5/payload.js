__NUXT_JSONP__("/blog/unrealengine--support-user-defined-types-for-bp-operator-nodes-in-ue5", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch){return {data:[{}],fetch:{"blogpost-content:0":{page:{slug:"support-user-defined-types-for-bp-operator-nodes-in-ue5",description:"UE5で追加されたType promotion機能付き演算子ノードに、ユーザー定義型サポートを追加する方法について",title:"UE5のBP演算子ノードにユーザー定義型を対応させる",createdAt:bf,updatedAt:bf,tags:["Unreal Engine","Blueprint","Unreal C+++","Unreal Engine 5"],toc:[{id:bg,depth:S,text:bh},{id:ar,depth:S,text:ar},{id:as,depth:S,text:as},{id:at,depth:S,text:at},{id:bi,depth:S,text:bj},{id:au,depth:S,text:au},{id:bk,depth:S,text:bl}],body:{type:"root",children:[{type:b,tag:ag,props:{id:bm},children:[{type:b,tag:F,props:{href:"#%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:bm}]},{type:a,value:h},{type:b,tag:T,props:{id:bg},children:[{type:b,tag:F,props:{href:"#ue5%E3%81%AE%E6%BC%94%E7%AE%97%E5%AD%90%E3%83%8E%E3%83%BC%E3%83%89%E3%81%A3%E3%81%A6%E3%81%AA%E3%81%AB",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:bh}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"先日Early Accessが開始されたUE5には、仮想化されたジオメトリを扱うシステムであるNaniteや、動的かつ高度なライティングを行うLumenなど目を引く新機能が満載です。\nそんな華々しい機能の裏に隠れがちですが、同時に"},{type:b,tag:ah,props:{},children:[{type:a,value:"ブループリントのType promotion"}]},{type:a,value:"というBlueprintに関する地味ながら便利な変更も追加されています。この変更は、これまでそれぞれの型ごとに別々のノードとして実装されていた各種演算子(Operator)ノードを、任意の型を演算可能な統一された演算子ノードで行えるようにするというものです。"}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"例えばUE4の時点では、加算に関するノードだけで以下のような状況になっていました。\n"},{type:b,tag:ai,props:{alt:aj,src:"\u002Farticle-assets\u002Funrealengine\u002Fsupport-user-defined-types-for-bp-operator-nodes-in-ue5\u002Fue4-operator-nodes.png"},children:[]}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"しかし、UE5以降では基本的な演算子ノードの入力ピンがすべてワイルドカードとなり、接続されたデータ型に対する加算処理を行うノードへと自動的に型をpromoteしてくれるようになったのです。\n"},{type:b,tag:ai,props:{alt:aj,src:"\u002Farticle-assets\u002Funrealengine\u002Fsupport-user-defined-types-for-bp-operator-nodes-in-ue5\u002Fue5-operator-node.png"},children:[]}]},{type:a,value:h},{type:b,tag:ag,props:{id:bn},children:[{type:b,tag:F,props:{href:"#%E7%B4%A0%E6%9C%B4%E3%81%AA%E7%96%91%E5%95%8F",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:bn}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"Type promotionは簡便かつ整理された状態を提供してくれる素晴らしい変更ですが、この仕様を見ると「"},{type:b,tag:ah,props:{},children:[{type:a,value:"ユーザーが追加した演算可能なデータ型に対してUE5の演算子ノードは対応可能なのか？？"}]},{type:a,value:"」という疑問が湧いてきます。\nC++を用いてワイルドカードを入力として持つBPノードを実装するためには、UFUNCTIONにCustomThunk等のmeta指定子とThunk関数の実装を用いるか、K2_Nodeを継承した独自ノードをUFUNCTIONマクロを用いずに実装する必要があります。Type promotionを行うUE5の演算子ノードも同様に実装されていることは容易に推察ができますが、データ型に対する演算処理のように後からユーザーが追加する可能性があり、かつ内部処理が常に自動生成できるとは限らない処理をワイルドカード化して問題ないのでしょうか。"}]},{type:a,value:h},{type:b,tag:ag,props:{id:bo},children:[{type:b,tag:F,props:{href:"#%E8%AA%BF%E6%9F%BB%E7%B5%90%E6%9E%9C",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:bo}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"エンジンのソースを追った結果、非常に簡単にユーザー定義型をUE5の演算子ノードで扱うことができることがわかりました。以下では、ユーザー定義型をUE5のType promotionに対応させるために踏まえるべき点を記載します。"}]},{type:a,value:h},{type:b,tag:T,props:{id:ar},children:[{type:b,tag:F,props:{href:"#%E5%AF%BE%E8%B1%A1%E3%81%A8%E3%81%99%E3%82%8B%E3%83%87%E3%83%BC%E3%82%BF%E5%9E%8B",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:ar}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"実装例を提示するため、以下のようなサンプルのデータ型を定義しました。このデータ型を複素数型と見做して、UE5の演算子ノードで複素数に定義されるいくつかの演算を実装してみます。"}]},{type:a,value:h},{type:b,tag:av,props:{className:[aw]},children:[{type:b,tag:c,props:{className:[ax]},children:[{type:a,value:"ComplexNumber.h"}]},{type:b,tag:ay,props:{className:[az,aA]},children:[{type:b,tag:A,props:{},children:[{type:b,tag:c,props:{className:[d,_,$]},children:[{type:b,tag:c,props:{className:[d,aa]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,ac,l]},children:[{type:a,value:bp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bq]},children:[{type:a,value:br}]}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,_,$]},children:[{type:b,tag:c,props:{className:[d,aa]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,ac,l]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"ComplexNumber.generated.h\""}]}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"USTRUCT"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"BlueprintType"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"struct"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:ad}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bs}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,aP]},children:[{type:a,value:bt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,aP]},children:[{type:a,value:bt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:a,value:bu},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:a,value:" Imaginary"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"Imaginary"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:bw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:a,value:bu},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:bw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:a,value:" Imag"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:T,props:{id:as},children:[{type:b,tag:F,props:{href:"#%E5%AE%9F%E8%A3%85%E4%BE%8B",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:as}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"詳細な説明に先んじて、実装例を提示します。"}]},{type:a,value:h},{type:b,tag:av,props:{className:[aw]},children:[{type:b,tag:c,props:{className:[ax]},children:[{type:a,value:"ComplexNumberBlueprintLibrary.h"}]},{type:b,tag:ay,props:{className:[az,aA]},children:[{type:b,tag:A,props:{},children:[{type:b,tag:c,props:{className:[d,_,$]},children:[{type:b,tag:c,props:{className:[d,aa]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,ac,l]},children:[{type:a,value:bp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bq]},children:[{type:a,value:br}]}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,_,$]},children:[{type:b,tag:c,props:{className:[d,aa]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,ac,l]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"CoreMinimal.h\""}]}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,_,$]},children:[{type:b,tag:c,props:{className:[d,aa]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,ac,l]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"ComplexNumber.h\""}]}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,_,$]},children:[{type:b,tag:c,props:{className:[d,aa]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,ac,l]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"ComplexNumberBlueprintLibrary.generated.h\""}]}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"UCLASS"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"class"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"UComplexNumberBlueprintLibrary"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,"base-clause"]},children:[{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:by}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:aQ}]}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bs}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F ---------演算の実装はここから-----------"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F ComplexNumber + ComplexNumber (加算)"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aR},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"ComplexNumber + ComplexNumber\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aG},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aI}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"Add_ComplexNumberComplexNumber"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:bA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aW}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aW}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F ComplexNumber - ComplexNumber (減算)"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aR},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"ComplexNumber - ComplexNumber\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aG},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aI}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"Subtract_ComplexNumberComplexNumber"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:bA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aY}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aY}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F ComplexNumber * float (floatとの乗算)"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aR},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"ComplexNumber * float\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"*\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aG},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aI}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"Multiply_ComplexNumberFloat"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F ---------------ここまで---------------"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F ToString (ComplexNumber)"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"DisplayName "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"ToString (ComplexNumber)\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"-\u003E\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" BlueprintAutoCast"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aG},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aI}]},{type:a,value:" FString "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"ToString"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:" FComplexNumber In"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"FString"}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"Printf"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"%.3f %s %.3fi\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aP]},children:[{type:a,value:"0"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"?"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:a_},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"FMath"}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"Abs"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"In"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aC}]}]}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"たったこれだけです。このコードをコンパイルすると、BPエディタにおいて"},{type:b,tag:ah,props:{},children:[{type:a,value:"ComplexNumber同士の加算"}]},{type:a,value:bD},{type:b,tag:ah,props:{},children:[{type:a,value:"ComplexNumber同士の減算"}]},{type:a,value:bD},{type:b,tag:ah,props:{},children:[{type:a,value:"ComplexNumberとfloatの乗算"}]},{type:a,value:"が演算子ノードによって行えるようになります。"}]},{type:a,value:h},{type:b,tag:a$,props:{},children:[{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"接続が許可されるようになって……\n"},{type:b,tag:ai,props:{alt:aj,src:"\u002Farticle-assets\u002Funrealengine\u002Fsupport-user-defined-types-for-bp-operator-nodes-in-ue5\u002Fcomplex-type-1.png"},children:[]},{type:a,value:"\n繋ぐとComplexNumberの加算ノードになる！\n"},{type:b,tag:ai,props:{alt:aj,src:"\u002Farticle-assets\u002Funrealengine\u002Fsupport-user-defined-types-for-bp-operator-nodes-in-ue5\u002Fcomplex-type-2.png"},children:[]}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"こうして演算子ノードと接続した際に行われる処理は、当然ながら先程示したコードで実装されていた関数の内部の処理に置き換わっています。"}]},{type:a,value:h},{type:b,tag:T,props:{id:at},children:[{type:b,tag:F,props:{href:"#%E5%AF%BE%E5%BF%9C%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E6%9D%A1%E4%BB%B6",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:at}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"なんと、UE5の演算子ノードのType promotionに対応するにあたって必要な点は以下の3つのみです。"}]},{type:a,value:h},{type:b,tag:"ul",props:{},children:[{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"対象のデータ型に対して、"},{type:b,tag:A,props:{},children:[{type:a,value:am}]},{type:a,value:"を指定されたstaticなUFUNCTIONの実装がどこかに存在すること。"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"演算を実装したUFUNCTIONに戻り値が存在すること。"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"演算を実装したUFUNCTIONの名前が"},{type:b,tag:A,props:{},children:[{type:a,value:"[演算名Prefix]_"}]},{type:a,value:"で始まること。"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:a$,props:{},children:[{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:bE}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"必要となる"},{type:b,tag:A,props:{},children:[{type:a,value:"演算名Prefix"}]},{type:a,value:"については次節で触れます。"}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"先の実装についていたその他の指定子などは、全て細かなノードの見た目やカテゴリ表示に関するものであり、Type promotionとは一切関係がありません。条件を満たしたUFUNCTIONが存在するだけで、勝手にBPエディタがその存在を認識して、演算子ノードが処理の呼び分けを行ってくれるようになるのです。"}]},{type:a,value:h},{type:b,tag:T,props:{id:bi},children:[{type:b,tag:F,props:{href:"#type-promotion%E3%81%8C%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B%E6%BC%94%E7%AE%97",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:bj}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"以下に、Type promotionがサポートする演算と、その実装をするために必要なUFUNCTIONのPrefixとなる演算名の対応表を示します。"}]},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:"table",props:{},children:[{type:b,tag:"thead",props:{},children:[{type:b,tag:M,props:{},children:[{type:b,tag:bF,props:{},children:[{type:a,value:"演算"}]},{type:b,tag:bF,props:{},children:[{type:a,value:"Prefix"}]}]}]},{type:b,tag:"tbody",props:{},children:[{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:aW}]},{type:b,tag:y,props:{},children:[{type:a,value:"Add"}]}]},{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:D}]},{type:b,tag:y,props:{},children:[{type:a,value:"Multiply"}]}]},{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:aY}]},{type:b,tag:y,props:{},children:[{type:a,value:"Subtract"}]}]},{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:"\u002F"}]},{type:b,tag:y,props:{},children:[{type:a,value:"Divide"}]}]},{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:P}]},{type:b,tag:y,props:{},children:[{type:a,value:"Greater"}]}]},{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:"\u003E="}]},{type:b,tag:y,props:{},children:[{type:a,value:"GreaterEqual"}]}]},{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:O}]},{type:b,tag:y,props:{},children:[{type:a,value:"Less"}]}]},{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:"\u003C="}]},{type:b,tag:y,props:{},children:[{type:a,value:"LessEqual"}]}]},{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:bG}]},{type:b,tag:y,props:{},children:[{type:a,value:"NotEqual"}]}]},{type:b,tag:M,props:{},children:[{type:b,tag:y,props:{},children:[{type:a,value:"=="}]},{type:b,tag:y,props:{},children:[{type:a,value:"EqualEqual"}]}]}]}]},{type:a,value:h},{type:b,tag:a$,props:{},children:[{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:bE}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"このPrefixをUFUNCTIONの関数名の頭に付加することで、対応する演算の実装として認識してもらうことが出来ます。簡単ですね！"}]},{type:a,value:h},{type:b,tag:ag,props:{id:bH},children:[{type:b,tag:F,props:{href:"#%E3%81%8A%E3%81%BE%E3%81%91",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:bH}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"簡単に動くのはいいですが、一体どんな仕組みで動いているのか気になってしまうと思いますので、少し見てみましょう。"}]},{type:a,value:h},{type:b,tag:T,props:{id:au},children:[{type:b,tag:F,props:{href:"#%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E5%AE%9F%E8%A3%85%E3%82%92%E5%8F%8E%E9%9B%86%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%8B",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:au}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"実装を覗くと、この部分はなかなかのパワー的処理によって実現されています。以下はエンジンのソースコードからの抜粋です。"}]},{type:a,value:h},{type:b,tag:av,props:{className:[aw]},children:[{type:b,tag:c,props:{className:[ax]},children:[{type:a,value:"BlueprintTypePromotion.cpp(抜粋)"}]},{type:b,tag:ay,props:{className:[az,aA]},children:[{type:b,tag:A,props:{},children:[{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"void"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"TRACE_CPUPROFILER_EVENT_SCOPE"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:" UEdGraphSchema_K2"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:" Schema "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aL]},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetDefault"}]},{type:b,tag:c,props:{className:[d,aM,q]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:"UEdGraphSchema_K2"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n    OperatorTable"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"Empty"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n    TArray"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:bI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetDerivedClasses"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:aQ}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:bI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:" Library "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F Ignore abstract libraries\u002Fclasses"}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:X}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:bK}]},{type:a,value:"Library "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"||"}]},{type:a,value:" Library"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"HasAnyClassFlags"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"CLASS_Abstract"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"\n\n        "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:" Function "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aL]},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"TFieldRange"}]},{type:b,tag:c,props:{className:[d,aM,q]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"Library"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:a,value:"ExcludeSuper"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:a,value:"ExcludeDeprecated"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"IsPromotableFunction"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:a_},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"\n\n            FEdGraphPinType FuncPinType"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n            FName OpName "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n            "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:X}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"OpName "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:bG}]},{type:a,value:" OperatorNames"},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:a,value:"NoOp "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aN}]},{type:a,value:" Schema"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"ConvertPropertyToPinType"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetReturnProperty"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F* out *\u002F"}]},{type:a,value:" FuncPinType"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:a_},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"AddOpFunction"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"この"},{type:b,tag:A,props:{},children:[{type:a,value:aK}]},{type:a,value:"というメソッドが何をしているかをざっくりまとめると、以下のようになります。"}]},{type:a,value:h},{type:b,tag:bO,props:{},children:[{type:a,value:h},{type:b,tag:N,props:{},children:[{type:b,tag:A,props:{},children:[{type:a,value:aQ}]},{type:a,value:"を継承しているすべてのUClassを取得して配列に詰める。"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"UClassの配列をループして走査しながら、それぞれのUClassが持っているUFUNCTIONを走査する。"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"前述の3つの条件を満たすUFUNCTIONが現れたら、それを演算子ノードの実装に利用可能であると見做してルックアップテーブルに詰める！"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"パワーを感じます。パワーです。とてもメタメタしています。楽しいですね。\nなお、この"},{type:b,tag:A,props:{},children:[{type:a,value:aK}]},{type:a,value:"メソッドは、所属している"},{type:b,tag:A,props:{},children:[{type:a,value:K}]},{type:a,value:"クラスのコンストラクタで呼び出されている他、エンジンのモジュール構成に変化があったとき(ホットリロード時など)に呼び出されるようになっています。"}]},{type:a,value:h},{type:b,tag:T,props:{id:bk},children:[{type:b,tag:F,props:{href:"#%E3%81%AA%E3%81%9C%E6%9C%AC%E6%9D%A5%E3%81%AE%E5%AE%9F%E8%A3%85%E3%83%8E%E3%83%BC%E3%83%89%E3%81%8Cbp%E3%81%AE%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E3%81%AB%E7%8F%BE%E3%82%8C%E3%81%AA%E3%81%84%E3%81%8B",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:bl}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"先程の実装例のUFUNCTIONは、ここまで述べてきたUE5以降のType promotionシステムの知識を無いものとして考えると、ただのBPから利用可能なUFUNCTION定義です。つまり、従来の考え方からするとそれ自体もBPのノードリストに登録されていなければおかしいはずです。しかし、実際にはそうなっておらず、「"},{type:b,tag:A,props:{},children:[{type:a,value:"ComplexNumber"}]},{type:a,value:"用の演算ノード」は現れなくなっています。以下の画像のように、統合されたものしか表示されません。"}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:b,tag:ai,props:{alt:aj,src:"\u002Farticle-assets\u002Funrealengine\u002Fsupport-user-defined-types-for-bp-operator-nodes-in-ue5\u002Fquestion.png"},children:[]}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"これは、以下の部分のエンジンコードを見るとわかります。このメソッドは長いため、今回の内容にとって重要ではない場所は省いています。"}]},{type:a,value:h},{type:b,tag:av,props:{className:[aw]},children:[{type:b,tag:c,props:{className:[ax]},children:[{type:a,value:"BlueprintFunctionNodeSpawner.cpp"}]},{type:b,tag:ay,props:{className:[az,aA]},children:[{type:b,tag:A,props:{},children:[{type:a,value:ao},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"UFunction "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ap}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bR}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:bS},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n    TSubclassOf"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:bW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:X}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:bX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"UK2Node_PromotableOperator"}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ap}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bZ}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"NodeClass"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"\n\n\nUBlueprintFunctionNodeSpawner"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"TSubclassOf"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:bW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" UFunction "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ap}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bR}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:bS},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aN}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n    FName OpName "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F If a spawner for this operator has been created already, than just return that"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:X}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"bIsPromotableFunction "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"IsOperatorSpawnerRegistered"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:X}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:" OpSpawner "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetOperatorSpawner"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:" OpSpawner"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"\n\n    UBlueprintFunctionNodeSpawner"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:" NodeSpawner "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aL]},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"NewObject"}]},{type:b,tag:c,props:{className:[d,aM,q]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"Outer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n    NodeSpawner"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"SetField"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,aL]},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"const_cast"}]},{type:b,tag:c,props:{className:[d,aM,q]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ap}]},{type:a,value:"\n\n    FBlueprintActionUiSpec"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"&"}]},{type:a,value:" MenuSignature "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:be},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:a,value:"DefaultMenuSignature"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:bX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ca},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"LOCTEXT"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"UtilityOperatorCategory\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"\"Utilities|Operators\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F Possibly generate some special tooltips for promotable operators?"}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:cc},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetKeywordsForOperator"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"RegisterOperatorSpawner"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:be},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bZ}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetUserFacingFunctionName"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ca},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetDefaultCategoryForFunction"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetEmpty"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"FromString"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetDefaultTooltipForFunction"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"\u002F\u002F add at least one character, so that PrimeDefaultUiSpec() doesn't attempt to query the template node"}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:cc},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,r,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"GetKeywordsForFunction"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ap}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:be},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"このコードには2つの"},{type:b,tag:A,props:{},children:[{type:a,value:Q}]},{type:a,value:"というメソッドのオーバーロード定義が含まれており、上の"},{type:b,tag:A,props:{},children:[{type:a,value:Q}]},{type:a,value:"の定義の最終行で下の"},{type:b,tag:A,props:{},children:[{type:a,value:Q}]},{type:a,value:"を呼び出してもいるという構造になっています。\nこれらはBPエディタで右クリックした際に表示されるノードリスト(など)で利用される情報を作成するメソッドです。作成される情報の内容には、名前やTooltipなどの表示情報のほか、ユーザーによってそのリストからノードが選択されたときにエディタ上に実際にノードをSpawnさせるためのSpawnerオブジェクトなどが含まれます。BPエディタが初期化・変更されるなどして全体のリフレッシュ処理が実行されると、BPエディタは存在するすべてのUClassを走査して、それらが持っているAction(エディタからアクセス可能なUPropertyやUFunction、そしてそれらが持っている表示情報や利用時の処理など……)を収集します。その処理の流れの中で、UFunctionに関するものの一部はこの"},{type:b,tag:A,props:{},children:[{type:a,value:Q}]},{type:a,value:"メソッドのところにUFunctionに関する情報を作成させ、取得しにやってくるのです。このとき呼ばれるのは、上の方の"},{type:b,tag:A,props:{},children:[{type:a,value:Q}]},{type:a,value:"の定義からになります。この前提のもとにこの処理をまとめると、以下のようになります。"}]},{type:a,value:h},{type:b,tag:bO,props:{},children:[{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"あるUFunctionが渡されてくる。Type promotionが有効化されていて、かつ受け取ったUFunctionがType promotionの条件を満たしてる場合、SpawnするBPノードのクラスを問答無用でUK2Node_PromotableOperatorノードにする。UK2Node_PromotableOperatorノードは統合後の演算子ノードの実装クラスである。"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"また、同じく受け取ったUFunctionが条件を満たしている場合、作成するActionの情報もUFunctionのものは直接利用せず、受け取ったUFunctionが「定義している演算が属する」演算の名前や表示名、検索キーワードが設定される。この時に作成された情報やSpawnerは登録される。"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"再び、データ型は違うが属する演算は同じUFunctionが渡されてきたとする(例えば、Add_IntIntとAdd_FloatFloatはデータ型は違うがAdd演算に属する定義)。すると、登録処理の前に既に同じ演算のUK2Node_PromotableOperatorノードが登録されていることが検出され、新規に情報を作成するのではなく既に登録した情報を返すようになる。"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"結果として、「ある演算に対して１つも実装が存在しないと、UE5のType promotionする演算子ノードも一つも存在しない。」「ある演算に対して１つ以上の実装が存在すると、それらに共通する演算子ノードが１つだけ登録される」という処理となる。"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:ag,props:{id:ce},children:[{type:b,tag:F,props:{href:"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB",ariaHidden:G,tabIndex:H},children:[{type:b,tag:c,props:{className:[I,J]},children:[]}]},{type:a,value:ce}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"楽しい機能で大変良いですね。正直、はじめは新たなmeta指定子でも追加されたんだろうと思って実装を見始めたのですが、一切プリプロセスに変更を加えないで対応していて面白かったです。長くなりそうで面倒だったので触れませんでしたが、UK2Node_PromotableOperatorノードが行っている、収集した関数の実装から、渡されてきたピンの型情報に最も合致する関数を探し出す処理などもこの機能の根幹を占めている部分ですので、興味があれば実装を読んでみると面白いと思います。"}]},{type:a,value:h},{type:b,tag:t,props:{},children:[{type:a,value:"ところで、こういう方面進めるなら、はやく部分的にでもUFUNCTIONをtemplateに対応させてくれないかなあという個人的な気持ちがあります。みなさんでこのPRを応援しましょう(他人任せ)。\n"},{type:b,tag:F,props:{href:cf,rel:["nofollow","noopener","noreferrer"],target:"_blank"},children:[{type:a,value:cf}]}]}]},dir:"\u002Farticles\u002Funrealengine",path:cg,extension:".md"},path:cg},"data-v-08b63208:0":{prevTitle:aq,nextTitle:aq,existPrev:ch,existNext:ch,prevSlug:aq,nextSlug:aq,seriesPage:aq}},mutations:void 0}}("text","element","span","token","punctuation","operator"," ","\n","(",")","function","keyword",",","\n    ",";","=","class-name","double-colon","::","p","{","}",".","string","td","comment","code","\n\n    ","const","*","\n        ","a","true",-1,"icon","icon-link","FTypePromotion","Function","tr","li","\u003C","\u003E","Create","\n        MenuSignature",2,"h2",":","return"," B","if","\n            ","UK2Node_CallFunction","macro","property","directive-hash","#","directive","FComplexNumber","Real","OpName","h1","strong","img","image.png","Imag","float","BlueprintPure","-\u003E","UBlueprintFunctionNodeSpawner","\u002F\u002F 略","","対象とするデータ型","実装例","対応のための条件","どうやって実装を収集しているのか","div","nuxt-content-highlight","filename","pre","language-cpp","line-numbers","include","\n\n","UFUNCTION"," meta"," CompactNodeTitle"," Category","\"ComplexNumber\"","static","Imag ","CreateOpTable","generic-function","generic","&&"," Function","number","UBlueprintFunctionLibrary","DisplayName"," FComplexNumber "," FComplexNumber A","A","Real ","+"," A","-","TEXT","\n                ","blockquote"," Libraries","StaticClass","UFunction"," Outer"," NodeSpawner","2021-11-25T19:56:59.000Z","ue5の演算子ノードってなに","UE5の演算子ノードってなに？","type-promotionがサポートする演算","Type promotionがサポートする演算","なぜ本来の実装ノードがbpのメニューに現れないか","なぜ本来の実装ノードがBPのメニューに現れないか","まえがき","素朴な疑問","調査結果","pragma","expression","once","GENERATED_BODY","0.0f"," Real","UPROPERTY","BlueprintReadWrite"," EditAnywhere","public","\"+\""," FComplexNumber B","\"-\"","\n                In","、","参考: Engine\\Source\\Editor\\BlueprintGraph\\Private\\BlueprintTypePromotion.cpp","th","!=","おまけ","UClass","for","!","continue"," EFieldIteratorFlags","GetOpNameFromFunction","ol"," UObject","\u002F* = nullptr*\u002F","bool"," bIsPromotableFunction ","TypePromoDebug","IsTypePromoEnabled","IsFunctionPromotionReady"," NodeClass","bIsPromotableFunction","\n        NodeClass ","else","MenuName ","GetUserFacingOperatorName","Category ","Tooltip ","Keywords ","FText","おわりに","https:\u002F\u002Fgithub.com\u002FEpicGames\u002FUnrealEngine\u002Fpull\u002F6902","\u002Farticles\u002Funrealengine\u002Fsupport-user-defined-types-for-bp-operator-nodes-in-ue5",false)));