__NUXT_JSONP__("/blog/unrealengine--lets-implement-a-single-mesh-renderer", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv){return {data:[{page:{slug:"lets-implement-a-single-mesh-renderer",description:"アイテムの描画とか、一つだけのメッシュをレンダリングするのに便利なツールを実装してみる記事",title:"単一 Static Meshレンダラを FPreviewScene で実装する",enforceCreatedAt:aX,enforceUpdatedAt:aX,tags:["Unreal Engine","Unreal C++","RHI","RDG","Advent Calendar"],assets:"\u002Farticle-assets\u002Funrealengine\u002Flets-implement-a-single-mesh-renderer",advent_calendar:{name:"Unreal Engine (UE) Advent Calendar 2023",link:"https:\u002F\u002Fqiita.com\u002Fadvent-calendar\u002F2023\u002Fue",day:24},toc:[{id:_,depth:G,text:_},{id:$,depth:G,text:$},{id:aa,depth:G,text:aa},{id:aY,depth:P,text:aE},{id:aZ,depth:P,text:as},{id:a_,depth:P,text:ab},{id:a$,depth:G,text:aF},{id:ba,depth:P,text:ac},{id:bb,depth:P,text:ad},{id:bc,depth:G,text:at},{id:bd,depth:G,text:ae},{id:be,depth:G,text:au},{id:af,depth:P,text:af},{id:ag,depth:P,text:ag},{id:ah,depth:G,text:ah},{id:ai,depth:G,text:ai},{id:bf,depth:G,text:aG},{id:bg,depth:G,text:aH},{id:bh,depth:G,text:aI},{id:bi,depth:P,text:aJ},{id:aj,depth:G,text:aj},{id:ak,depth:G,text:ak}],body:{type:"root",children:[{type:b,tag:T,props:{id:"introduction"},children:[{type:b,tag:l,props:{href:"#introduction",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:"Introduction"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Unreal Engine の売りの一つは広大なワールドを扱うことができるシステムや、それをリアルタイムにレンダリングする高度なグラフィックス機能です。しかし、常にそこまで高度なワールドシステムやレンダラが必要なわけではありません。\nたとえば、ゲームインベントリ画面でアイテムのメッシュをUI上に表示したい！みたいな需要はしばしばあるでしょう。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"この記事は、単一メッシュを描画するのに特化した描画をUEで実装してみる実験記録です。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:al,props:{alt:N,src:"\u002Farticle-assets\u002Funrealengine\u002Flets-implement-a-single-mesh-renderer\u002F\u002Ftop.png"},children:[]}]},{type:a,value:f},{type:b,tag:T,props:{id:bj},children:[{type:b,tag:l,props:{href:"#%E7%9B%AE%E6%AC%A1",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:bj}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bk},children:[{type:a,value:bl}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bm},children:[{type:a,value:_}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bn},children:[{type:a,value:$}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bo},children:[{type:a,value:aa}]}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bp},children:[{type:a,value:bq}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:br},children:[{type:a,value:aE}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bs},children:[{type:a,value:as}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bt},children:[{type:a,value:ab}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bu},children:[{type:a,value:aF}]}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bv},children:[{type:a,value:ac}]}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bw},children:[{type:a,value:bx}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:by},children:[{type:a,value:ad}]}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bz},children:[{type:a,value:bA}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bB},children:[{type:a,value:at}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bC},children:[{type:a,value:ae}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bD},children:[{type:a,value:au}]}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bE},children:[{type:a,value:af}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bF},children:[{type:a,value:ag}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bG},children:[{type:a,value:ah}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bH},children:[{type:a,value:ai}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bI},children:[{type:a,value:aG}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bJ},children:[{type:a,value:aH}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bK},children:[{type:a,value:aI}]}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bL},children:[{type:a,value:aJ}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bM},children:[{type:a,value:aj}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:bN},children:[{type:a,value:ak}]}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{href:bO},children:[{type:a,value:bP}]}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:T,props:{id:"本題の前に-一般的な解決策scenecapture2dとその問題"},children:[{type:b,tag:l,props:{href:bk,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:bl}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"UI の上などにメッシュを描画したいときの一般的(？)な解決策は、 "},{type:b,tag:"strong",props:{},children:[{type:a,value:"SceneCapture2D"}]},{type:a,value:" を利用することです。この手法については多くの情報があるため、説明はそちらに委ねます。"}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fhistoria.co.jp\u002Farchives\u002F13380\u002F",rel:[bQ,bR,bS],target:bT},children:[{type:a,value:"[UE4]アルファ付きキャプチャー画像の簡単作成"}]},{type:a,value:" - 株式会社ヒストリア様"}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fyou1dan.hatenablog.com\u002Fentry\u002F2022\u002F09\u002F09\u002F113633",rel:[bQ,bR,bS],target:bT},children:[{type:a,value:"UE5 で Render Target と SceneCapture(Component)2D で背景透過でメッシュをキャプチャする"}]},{type:a,value:" - You are done! 様"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"この方法は大変簡便ですが、以下のような課題点があります。"}]},{type:a,value:f},{type:b,tag:I,props:{id:_},children:[{type:b,tag:l,props:{href:bm,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:_}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"SceneCapture2D をアクティブにするためには、配置したワールドと同じワールドにプレイヤーが存在しなければなりません。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"すると必然、地面の下など見えない場所に SceneCapture2D 用の撮影場所を用意してあげる必要が出てきます。ワールドのライティングやポストプロセスの影響を受けないように箱で囲ったり、ボリュームを設定したりなど、地味に面倒なセットアップが必要です。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"また、多数のレベルを持つゲームの場合には、すべてのレベルに撮影場所を配置してあげないとメッシュがレンダリングできず、煩雑です。"}]},{type:a,value:f},{type:b,tag:I,props:{id:$},children:[{type:b,tag:l,props:{href:bn,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:$}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"SceneCapture2D を利用した状態は、通常の画面の他にもう一つ画面がある状態となります。単一メッシュを簡単に描画するだけなら、そこにかける処理コストは可能な限り削りたいでしょう。\nしかし当然ながら、SceneCapture2D で制御できるレンダリング機能は設定に表示されているものだけであり、最適化するにも限界があります。"}]},{type:a,value:f},{type:b,tag:I,props:{id:aa},children:[{type:b,tag:l,props:{href:bo,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aa}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"背景は不要な場合もあるので、SceneDepth や CustomStencil を使って背景を除去する必要があります。そのためにパスが増えてしまうと、さらなるコストが嵩んでいきます。"}]},{type:a,value:f},{type:b,tag:T,props:{id:"ue-のレンダリングの登場人物を理解する"},children:[{type:b,tag:l,props:{href:bp,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:bq}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"後の実装法を理解するために、レンダリングの仕組みについて簡単に触れておきます。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"また、以前作成した以下の資料の情報を踏まえるとより理解しやすくなると思います。"}]},{type:a,value:f},{type:b,tag:"script",props:{async:bU,className:["docswell-embed"],src:"https:\u002F\u002Fwww.docswell.com\u002Fassets\u002Flibs\u002Fdocswell-embed\u002Fdocswell-embed.min.js",dataSrc:"https:\u002F\u002Fwww.docswell.com\u002Fslide\u002FK38NEM\u002Fembed",dataAspect:"0.5625"},children:[]},{type:b,tag:J,props:{className:["docswell-link"]},children:[]},{type:a,value:f},{type:b,tag:"br",props:{},children:[]},{type:a,value:f},{type:b,tag:Q,props:{id:aY},children:[{type:b,tag:l,props:{href:br,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aE}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"UWorld とは、AActor が配置されたり、マルチプレイが実行されたりする、UE のゲームロジックの進行を取りまとめるシーン表現オブジェクトです。「UWorld ← ULevel ← AActor ← UComponent」の関係性があり、ゲームスレッド側の処理に必要な全情報が含まれます。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"FScene とは、レンダースレッド用のシーン表現オブジェクトです。FScene には描画すべきプリミティブ、ライト、デカールなどの情報が格納されます。FScene の情報は UWorld の変更に追従する形で更新されていきます。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"このように、ゲーム処理用とレンダリング処理用で個別のシーン表現を持っていることを理解する必要があります。"}]},{type:a,value:f},{type:b,tag:Q,props:{id:aZ},children:[{type:b,tag:l,props:{href:bs,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:as}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"FSceneView は、FScene 内部での視点を定義するオブジェクトです。シーン内での位置のほか、投影方法、ポストプロセス設定、利用するレンダリング機能のレベルなどを保持します。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"普段利用する UE の機能でいうと、Camera に近いと言えるでしょう。"}]},{type:a,value:f},{type:b,tag:Q,props:{id:a_},children:[{type:b,tag:l,props:{href:bt,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ab}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"FSceneViewFamily は、 FScene や FSceneView などのオブジェクトを保持して取りまとめるオブジェクトです。FSceneViewFamily が保持する FScene は 1 つですが、FSceneView は1つ以上含むことができます。\nその Family 内のオブジェクトによるレンダリング全体に影響する描画設定なども含んでいます。"}]},{type:a,value:f},{type:b,tag:I,props:{id:a$},children:[{type:b,tag:l,props:{href:bu,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aF}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"FSceneViewFamily の派生クラスで、スコープベースで FSceneView リソースを管理する機能を持っています。\n視点を追加するとき、 FSceneView の生ポインタを FSceneViewFamily に渡しますが、使い終わったタイミングで自分で片付ける必要があります。\nスコープで寿命が区切れる場合には、 FSceneViewFamilyContext を使っておくと、渡した FSceneView の管理を移譲できるので便利です。"}]},{type:a,value:f},{type:b,tag:Q,props:{id:ba},children:[{type:b,tag:l,props:{href:bv,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ac}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"レンダラ実装の本体です。毎フレームこのインスタンスが生成\u002F破棄されます。\nFSceneViewFamily を受け取って、Family が含む Scene を、各 View について描画します。\n派生クラスとして以下のクラスがあり、モバイルプラットフォームとそれ以外とで切り替わるようになっています。"}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:u,props:{},children:[{type:a,value:bV}]}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:b,tag:u,props:{},children:[{type:a,value:bW}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"これらのクラスの命名は致命的に誤解を招きやすいものであることに注意してください。 "},{type:b,tag:u,props:{},children:[{type:a,value:bV}]},{type:a,value:" はディファードレンダラだけでなく、フォワードレンダラも実装しています。\nまた、"},{type:b,tag:u,props:{},children:[{type:a,value:bW}]},{type:a,value:" も同様に、ディファード\u002Fフォワードの両方を実装しています。"}]},{type:a,value:f},{type:b,tag:T,props:{id:"独自の専用シーンを用意できないか"},children:[{type:b,tag:l,props:{href:bw,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:bx}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"さて、前節で UE のレンダリングの登場人物を紹介しました。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"通常、UE 製のゲームは World も Scene も同時に1つしか持ちません。しかし、これは制約ではなく、自分で用意すれば同時に複数の World や Scene を運用することができます。\n独自にそれらが用意できれば、 SceneCapture2D の課題として挙げられたワールドが同一であるという問題が解決します。"}]},{type:a,value:f},{type:b,tag:Q,props:{id:bb},children:[{type:b,tag:l,props:{href:by,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ad}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"ゼロから用意することもできるのですが、FPreviewScene クラスを利用すると簡単に World と Scene を用意することができます。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"実は、FPreviewScene クラスはいつもお世話になっているもので、アセットのサムネイルや、Unreal Editor 上のアセット編集画面などの Viewport をレンダリングするのに利用されています。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:al,props:{alt:N,src:"\u002Farticle-assets\u002Funrealengine\u002Flets-implement-a-single-mesh-renderer\u002F\u002Ffpreviewscene.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"名前や用途からして Editor 専用機能のように思えますが、 Game でも使うことが可能で、World と Scene の初期化や管理をカプセル化したクラスとして活用できます。"}]},{type:a,value:f},{type:b,tag:T,props:{id:"fpreviewscene-を使ったレンダリングを実装してみる"},children:[{type:b,tag:l,props:{href:bz,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:bA}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"BP から簡単に利用できるように、次のようなクラスを宣言します。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[aK]},children:[{type:b,tag:J,props:{className:[aL]},children:[{type:a,value:"StaticMeshRenderer.h"}]},{type:b,tag:O,props:{},children:[{type:b,tag:u,props:{className:[C]},children:[{type:a,value:"UCLASS(BlueprintType)\nclass RENDERINGPRACTICE_API UStaticMeshRenderer : public UObject\n{\n\tGENERATED_BODY()\n\npublic:\n\t\u002F**\n\t * @brief StaticMeshRendererを作成する\n\t *\u002F\n\tUFUNCTION(BlueprintCallable, Category = \"Static Mesh Renderer\", meta = (AutoCreateRefTerm = \"BackgroundColor\"))\n\tstatic UStaticMeshRenderer* CreateStaticMeshRenderer(UTextureRenderTarget2D* RenderTarget, const FLinearColor& BackgroundColor);\n\n\t\u002F**\n\t * @brief StaticMeshとそのTransformを設定する\n\t *\u002F\n\tUFUNCTION(BlueprintCallable, Category = \"Static Mesh Renderer\")\n\tvoid SetStaticMesh(UStaticMesh* InStaticMesh, const FTransform& InTransform);\n\n\t\u002F**\n\t * @brief StaticMeshを1フレームだけ描画する。\n\t *\u002F\n\tUFUNCTION(BlueprintCallable, Category = \"Static Mesh Renderer\")\n\tvoid Render();\n\n\t\u002F**\n\t * @brief 描画するカメラの情報\n\t *\u002F\n\tUPROPERTY(BlueprintReadWrite, Category = \"Static Mesh Renderer\")\n\tFMinimalViewInfo ViewInfo;\n\nprivate:\n\t\u002F**\n\t * @brief 描画に使用するWorldとSceneを保持するFPreviewScene\n\t *\u002F\n\tTUniquePtr\u003CFPreviewScene\u003E RenderScene;\n\t\n\t\u002F**\n\t * @brief 描画先のRenderTarget\n\t *\u002F\n\tUPROPERTY()\n\tTObjectPtr\u003CUTextureRenderTarget2D\u003E RenderTarget;\n\n\t\u002F**\n\t * @brief 描画するStaticMesh\n\t *\u002F\n\tUPROPERTY()\n\tTObjectPtr\u003CUStaticMeshComponent\u003E StaticMeshComponent;\n\n\t\u002F**\n\t * @brief 背景色\n\t *\u002F\n\tFLinearColor BackgroundColor;\n};"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"それぞれの関数の実装を紹介しつつ説明します。"}]},{type:a,value:f},{type:b,tag:I,props:{id:bc},children:[{type:b,tag:l,props:{href:bB,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:at}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"単一メッシュレンダラのインスタンスを作成します。 FPreviewScene の初期化もここで行います。\nまた、描画先の RenderTarget もセットできるようにしておきます。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[U]},children:[{type:b,tag:O,props:{className:[C]},children:[{type:b,tag:u,props:{className:[C]},children:[{type:a,value:W},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:X}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:at}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"UTextureRenderTarget2D"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:X}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n                                                                   "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:an}]},{type:a,value:" FLinearColor"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:"\n\tUStaticMeshRenderer"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:X}]},{type:a,value:" StaticMeshRenderer "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,av]},children:[{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:bX}]},{type:b,tag:c,props:{className:[d,B,aw]},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ax}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ay}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"GetTransientPackage"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" NAME_None"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" RF_Transient"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:"RenderScene "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,av]},children:[{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"MakeUnique"}]},{type:b,tag:c,props:{className:[d,B,aw]},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ax}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ay}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SetEditor"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,ap]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SetLightRotation"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"FRotator"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"304.736"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"39.84"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SetSkyBrightness"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"1.69f"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SetCreatePhysicsScene"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,ap]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SetTransactional"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,ap]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:"RenderTarget "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bZ}]},{type:a,value:" StaticMeshRenderer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"重要なのは、 FPreviewScene の構築パラメータに "},{type:b,tag:u,props:{},children:[{type:a,value:".SetEditor(false)"}]},{type:a,value:" を渡すことです。こうすることで、Game時でも動作する World と Scene を内部で構築してくれます。\nライトの設定なども行うことができるので、実現したい見た目に対して調整すると良いでしょう。BP にパラメータとして公開してもいいかもしれません。"}]},{type:a,value:f},{type:b,tag:I,props:{id:bd},children:[{type:b,tag:l,props:{href:bC,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ae}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"描画する StaticMesh をセットします。World に直接 StaticMesh は追加できないので、StaticMeshComponent を作成して Mesh をセットしてから追加します。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[U]},children:[{type:b,tag:O,props:{className:[C]},children:[{type:b,tag:u,props:{className:[C]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"UStaticMesh"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:X}]},{type:a,value:" InStaticMesh"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:an}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:a,value:" InTransform"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aP}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aQ}]},{type:a,value:b$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:"\n\t\tStaticMeshComponent "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,av]},children:[{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:bX}]},{type:b,tag:c,props:{className:[d,B,aw]},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ax}]},{type:a,value:"UStaticMeshComponent"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ay}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"RenderScene"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\t\tRenderScene"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"AddComponent"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:b$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:a,value:"Identity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:a,value:ca},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"InStaticMesh"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ca},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SetRelativeTransform"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"InTransform"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\tRenderScene"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"UpdateStaticDrawLists"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:I,props:{id:be},children:[{type:b,tag:l,props:{href:bD,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:au}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"レンダリングを実行します。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[U]},children:[{type:b,tag:O,props:{className:[C]},children:[{type:b,tag:u,props:{className:[C]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aP}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aQ}]},{type:a,value:"StaticMeshComponent "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"||"}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aQ}]},{type:a,value:"RenderTarget"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"UE_LOG"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"LogTemp"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" Warning"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"\"UStaticMeshRenderBP::RenderStaticMesh: Invalid parameters\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:a,value:"\n\n\tFTextureRenderTargetResource"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:X}]},{type:a,value:" RenderTargetResource "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"GameThread_GetRenderTargetResource"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n\tFSceneViewFamilyContext "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cc},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:ce},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n  ViewFamily"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:cf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"AntiAliasing "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,ap]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:cf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"ScreenPercentage "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,ap]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SetScreenPercentageInterface"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ch}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"FLegacyScreenPercentageDriver"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"1.0f"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:an}]},{type:a,value:" FIntRect "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:ci}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:"SizeX"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:"SizeY"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\tFSceneViewInitOptions ViewInitOptions"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SetViewRectangle"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:ci},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"ViewFamily "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"ViewOrigin "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"Location"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"ViewRotationMatrix "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"FInverseRotationMatrix"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:cj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"Rotation"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:X}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"FMatrix"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"FOV "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"DesiredFOV "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"FMinimalViewInfo"}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"CalculateProjectionMatrixGivenViewRectangle"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:cj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\t                                                              AspectRatio_MaintainYFOV"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\t                                                              ViewRect"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\t                                                              ViewInitOptions"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n\tViewFamily"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"Views"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"Add"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ch}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:as}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"ViewInitOptions"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\tFCanvas "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"RenderTargetResource"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\t               "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"nullptr"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cl},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cl},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"GetFeatureLevel"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\t               FCanvas"},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:a,value:"CDM_DeferDrawing"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:cm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:cn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"※ このコードでは省いていますが、実際には不要なポストプロセスやパスを切る設定を入れることができます"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"RenderTarget から取得した RHIリソース、カメラ設定から構築した FSceneView などを使って FSceneViewFamily を用意します。\nそれらを "},{type:b,tag:u,props:{},children:[{type:a,value:"GetRendererModule().BeginRenderingViewFamily()"}]},{type:a,value:" に渡すと、内部でプラットフォームに適した "},{type:b,tag:u,props:{},children:[{type:a,value:ac}]},{type:a,value:" を構築してレンダリングを実行してくれます。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"思ったよりずっと簡単なのではないでしょうか？"}]},{type:a,value:f},{type:b,tag:Q,props:{id:af},children:[{type:b,tag:l,props:{href:bE,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:af}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"以下のBPグラフは、描画先の RenderTarget を Image Widget セットして StaticMesh が UI 上に表示されるようするサンプルです"}]},{type:a,value:f},{type:b,tag:"iframe",props:{src:"https:\u002F\u002Fblueprintue.com\u002Frender\u002Ffrw9dthw\u002F",scrolling:"no",allowFullScreen:bU,width:"100%",height:"500px"},children:[]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"ViewInfo にカメラ設定、 Mesh に描画したい StaticMesh を入れています。ここでは少しずつ回転しながら毎フレーム描画されるようにしています。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:al,props:{alt:N,src:"\u002Farticle-assets\u002Funrealengine\u002Flets-implement-a-single-mesh-renderer\u002F\u002Ffirst.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"ちゃんと描画されているようです！"}]},{type:a,value:f},{type:b,tag:Q,props:{id:ag},children:[{type:b,tag:l,props:{href:bF,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ag}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"続いて、上で実装した描画機能に背景除去機能を拡張しましょう。ここでは、 "},{type:b,tag:u,props:{},children:[{type:a,value:co}]},{type:a,value:" という機能を使って描画のポストプロセスにパスを追加してみます。\n"},{type:b,tag:u,props:{},children:[{type:a,value:co}]},{type:a,value:" とは、主に "},{type:b,tag:u,props:{},children:[{type:a,value:ac}]},{type:a,value:" のレンダリング処理への拡張を提供する仕組みのことで、様々なタイミングでGBufferにアクセスして値を読み書きすることができます。"}]},{type:a,value:f},{type:b,tag:I,props:{id:ah},children:[{type:b,tag:l,props:{href:bG,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ah}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"まずはプロジェクトやプラグイン内に "},{type:b,tag:u,props:{},children:[{type:a,value:"Shaders\u002FPrivate\u002F"}]},{type:a,value:" ディレクトリを作成し、以下のようなファイルを作成します。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[aK]},children:[{type:b,tag:J,props:{className:[aL]},children:[{type:a,value:"BackgroundEraseShader.usf"}]},{type:b,tag:O,props:{},children:[{type:b,tag:u,props:{className:["language-hlsl"]},children:[{type:a,value:"#pragma once\n\n#include \"\u002FEngine\u002FPublic\u002FPlatform.ush\"\n#include \"\u002FEngine\u002FPrivate\u002FScreenPass.ush\"\n#include \"\u002FEngine\u002FPrivate\u002FCommon.ush\"\n\nSamplerState Sampler;\nSCREEN_PASS_TEXTURE_VIEWPORT(OutputViewport)\n\nstruct FInput\n{\n\tnoperspective float4 UVAndScreenPos: TEXCOORD0;\n\tfloat4 Position: SV_POSITION;\n};\n\nvoid BackgroundEraseMainPS(in FInput Input, out float4 OutColor: SV_Target0)\n{\n\tconst float2 ViewportUV = (Input.Position.xy - OutputViewport_ViewportMin.xy) * OutputViewport_ViewportSizeInverse.xy;\n\tconst float2 BufferUV = ViewportUVToBufferUV(ViewportUV);\n\n\tconst float Depth = Texture2DSample(SceneTexturesStruct.SceneDepthTexture, Sampler, BufferUV).r;\n\tconst float4 Color = Texture2DSample(SceneTexturesStruct.SceneColorTexture, Sampler, BufferUV);\n\n\tOutColor = float4(Color.rgb, Depth \u003E 0.0f ? 1.0f : 0.0f);\n}"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"非常に単純なピクセルシェーダです。深度情報と色情報を両方 GBuffer からサンプルした上で、深度情報が書き込まれているピクセル以外の Alpha 値を 0 にしているだけです。\nこのピクセルシェーダによるパスを上で作成したレンダラの最後に接続することで背景を除去できますが、もうちょっと C++ 側での作業が必要です。"}]},{type:a,value:f},{type:b,tag:I,props:{id:ai},children:[{type:b,tag:l,props:{href:bH,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ai}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Module の Startup 時に、エンジンが認識する Shader ディレクトリを追加しておきます。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[U]},children:[{type:b,tag:O,props:{className:[C]},children:[{type:b,tag:u,props:{className:[C]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:cp}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:"\n\tIPluginManager"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:a,value:" PluginManager "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"IPluginManager"}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"Get"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:an}]},{type:a,value:" FString PluginShaderDir "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:" PluginManager"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"FindPlugin"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"\"RenderingPractice\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"GetBaseDir"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"\u002F"}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"\"Shaders\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"AddShaderSourceDirectoryMapping"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"\"\u002FStaticMeshRendererShaders\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" PluginShaderDir"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"自分はプラグイン内に入れたので、プラグインのRootディレクトリから "},{type:b,tag:u,props:{},children:[{type:a,value:"Shaders\u002F"}]},{type:a,value:" のパスを決定し、"},{type:b,tag:u,props:{},children:[{type:a,value:"StaticMeshRendererShadres\u002F"}]},{type:a,value:" という別名を定義することにしました。"}]},{type:a,value:f},{type:b,tag:I,props:{id:bf},children:[{type:b,tag:l,props:{href:bI,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aG}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"C++ でシェーダーによる処理を呼び出せるようにするために、C++側の対応するクラスを作成する必要があります。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[U]},children:[{type:b,tag:O,props:{className:[C]},children:[{type:b,tag:u,props:{className:[C]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"class"}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:aD}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:":"}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,"base-clause"]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"public"}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"FGlobalShader"}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"DECLARE_GLOBAL_SHADER"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SHADER_USE_PARAMETER_STRUCT"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" FGlobalShader"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"BEGIN_SHADER_PARAMETER_STRUCT"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"FParameters"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SHADER_PARAMETER_STRUCT_REF"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"FViewUniformShaderParameters"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" View"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SHADER_PARAMETER_STRUCT"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"FScreenPassTextureViewportParameters"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" OutputViewport"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SHADER_PARAMETER_STRUCT_INCLUDE"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"FSceneTextureShaderParameters"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" SceneTextures"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"SHADER_PARAMETER_SAMPLER"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"SamplerState"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,w,"type-opencl-host-cpp"]},children:[{type:a,value:"Sampler"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"RENDER_TARGET_BINDING_SLOTS"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"END_SHADER_PARAMETER_STRUCT"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"IMPLEMENT_GLOBAL_SHADER"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cr},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"\"\u002FStaticMeshRendererShaders\u002FPrivate\u002FBackgroundEraseShader.usf\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cr},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"\"BackgroundEraseMainPS\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" SF_Pixel"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"最近の UE が採用している RDG のマクロを利用することで、パラメータ定義が非常に簡潔に行なえていることがわかります。\nこのシェーダーは、SceneView のパラメータ、出力先 Viewport、GBufferなど SceneTextures、テクスチャサンプラをパラメータとして渡すことで利用できます。"}]},{type:a,value:f},{type:b,tag:I,props:{id:bg},children:[{type:b,tag:l,props:{href:bJ,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aH}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"上記のシェーダーを、ポストプロセスパスとして追加する SceneViewExtension を作成します。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[aK]},children:[{type:b,tag:J,props:{className:[aL]},children:[{type:a,value:"StaticMeshRendererSceneViewExtension.h"}]},{type:b,tag:O,props:{},children:[{type:b,tag:u,props:{className:[C]},children:[{type:a,value:"struct FStaticMeshRendererSceneViewExtensionContext : FSceneViewExtensionContext\n{\nprivate:\n\tvirtual FName GetRTTI() const override;\n  {\n    return RTTIName;\n  }\npublic:\n\tinline static const FName RTTIName = TEXT(\"FStaticMeshRendererSceneViewExtensionContext\");\n};\n\nclass FStaticMeshRendererSceneViewExtension final : public FSceneViewExtensionBase\n{\npublic:\n\tFStaticMeshRendererSceneViewExtension(const FAutoRegister& AutoRegister);\n\t\n\tvirtual void SetupViewFamily(FSceneViewFamily& InViewFamily) override {}\n\tvirtual void SetupView(FSceneViewFamily& InViewFamily, FSceneView& InView) override {}\n\tvirtual void BeginRenderViewFamily(FSceneViewFamily& InViewFamily) override {}\n\t\n\tvirtual void SubscribeToPostProcessingPass(EPostProcessingPass Pass, FAfterPassCallbackDelegateArray& InOutPassCallbacks, bool bIsPassEnabled) override;\n\nprivate:\n\tstatic FScreenPassTexture AfterTonemapPass(FRDGBuilder& GraphBuilder, const FSceneView& View, const FPostProcessMaterialInputs& Inputs);\n};\n\nFStaticMeshRendererSceneViewExtension::FStaticMeshRendererSceneViewExtension(const FAutoRegister& AutoRegister):\n\tFSceneViewExtensionBase(AutoRegister)\n{\n\tFSceneViewExtensionIsActiveFunctor IsActiveFunctor;\n\n\tIsActiveFunctor.IsActiveFunction = [](const ISceneViewExtension* SceneViewExtension,\n\t                                      const FSceneViewExtensionContext& Context)\n\t{\n\t\treturn Context.IsA(FStaticMeshRendererSceneViewExtensionContext());\n\t};\n\n\tIsActiveThisFrameFunctions.Add(IsActiveFunctor);\n}\n\nvoid FStaticMeshRendererSceneViewExtension::SubscribeToPostProcessingPass(EPostProcessingPass Pass,\n                                                                          FAfterPassCallbackDelegateArray&\n                                                                          InOutPassCallbacks, bool bIsPassEnabled)\n{\n\tif (Pass == EPostProcessingPass::Tonemap)\n\t{\n\t\tInOutPassCallbacks.Add(\n\t\t\tFAfterPassCallbackDelegate::CreateStatic(&FStaticMeshRendererSceneViewExtension::AfterTonemapPass));\n\t}\n}\n\nFORCENOINLINE FScreenPassTexture FStaticMeshRendererSceneViewExtension::AfterTonemapPass(FRDGBuilder& GraphBuilder,\n\tconst FSceneView& View,\n\tconst FPostProcessMaterialInputs& Inputs)\n{\n\tconst FScreenPassTexture& SceneColor = Inputs.GetInput(EPostProcessMaterialInput::SceneColor);\n\n\tFScreenPassRenderTarget Output = Inputs.OverrideOutput;\n\n\tif (!Output.IsValid())\n\t{\n\t\tOutput = FScreenPassRenderTarget::CreateFromInput(GraphBuilder,\n\t\t                                                  SceneColor,\n\t\t                                                  View.GetOverwriteLoadAction(),\n\t\t                                                  TEXT(\"StaticMeshRendererSceneViewExtension\"));\n\t}\n\n\tconst FScreenPassTextureViewport SceneColorViewport(SceneColor);\n\tconst FScreenPassTextureViewport OutputViewport(Output);\n\n\tFBackgroundErasePS::FParameters* PassParameters = GraphBuilder.AllocParameters\u003CFBackgroundErasePS::FParameters\u003E();\n\tPassParameters-\u003EView = View.ViewUniformBuffer;\n\tPassParameters-\u003EOutputViewport = GetScreenPassTextureViewportParameters(OutputViewport);\n\tPassParameters-\u003ESceneTextures = Inputs.SceneTextures;\n\tPassParameters-\u003ESampler = TStaticSamplerState\u003CSF_Bilinear\u003E::GetRHI();\n\tPassParameters-\u003ERenderTargets[0] = Output.GetRenderTargetBinding();\n\n\tTShaderMapRef\u003CFBackgroundErasePS\u003E PixelShader(GetGlobalShaderMap(View.FeatureLevel));\n\n\tAddDrawScreenPass(GraphBuilder,\n\t                  RDG_EVENT_NAME(\"BackgroundErase\"),\n\t                  View,\n\t                  OutputViewport,\n\t                  SceneColorViewport,\n\t                  PixelShader,\n\t                  PassParameters);\n\n\treturn MoveTemp(Output);\n}"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"ここでは、 "},{type:b,tag:u,props:{},children:[{type:a,value:"SubscribeToPostProcessingPass()"}]},{type:a,value:" をオーバーライドして、 ポスプロの"},{type:b,tag:u,props:{},children:[{type:a,value:"ToneMap"}]},{type:a,value:" のタイミングにパスの処理を行うようにしています。\nパスの処理では、 RDG が提供している "},{type:b,tag:u,props:{},children:[{type:a,value:"AddDrawScreenPass()"}]},{type:a,value:" というスクリーンパス(画面全体に対して処理をするPixelShaderが主役のパス)向けの追加関数を使うことで、簡潔に追加処理を記述できています。\n"},{type:b,tag:u,props:{},children:[{type:a,value:"Context"}]},{type:a,value:" は、多数の SceneViewExtension の中からこの Extension を選択するためのマーカーとして実装しています。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Module の Startup で Extension を登録するようにしておきます。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[U]},children:[{type:b,tag:O,props:{className:[C]},children:[{type:b,tag:u,props:{className:[C]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:cp}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"\u002F* -------"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"  *  省略"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"  ------- *\u002F"}]},{type:a,value:"\n\n\tFCoreDelegates"},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:a,value:"OnPostEngineInit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"AddLambda"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"["}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"this"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"]"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:"\n\t\tStaticMeshRendererSceneViewExtension\n\t\t\t"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:" FSceneViewExtensions"},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,av]},children:[{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"NewExtension"}]},{type:b,tag:c,props:{className:[d,B,aw]},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ax}]},{type:a,value:"FStaticMeshRendererSceneViewExtension"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ay}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"これで、SceneViewExtension が利用可能になりました。"}]},{type:a,value:f},{type:b,tag:I,props:{id:bh},children:[{type:b,tag:l,props:{href:bK,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aI}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"作成した Extension を、単一メッシュレンダリング向けに用意した ViewFamily で利用するよう設定するには、以下の行を "},{type:b,tag:u,props:{},children:[{type:a,value:"Render()"}]},{type:a,value:" 関数に書き足すだけで OK です。"}]},{type:a,value:f},{type:b,tag:J,props:{className:[U]},children:[{type:b,tag:O,props:{className:[C]},children:[{type:b,tag:u,props:{className:[C]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"RenderWithAlpha"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"bool"}]},{type:a,value:" bEnableAlpha"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:aW}]},{type:a,value:"\n\tFSceneViewFamilyContext "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e,D]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cc},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:ce},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cs},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:aW}]},{type:a,value:cs},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"\u002F\u002F ↓↓以下を追加"}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aP}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"bEnableAlpha"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"static"}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:an}]},{type:a,value:" FStaticMeshRendererSceneViewExtensionContext ExtensionContext"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\t\tViewFamily"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:"ViewExtensions "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:z}]},{type:a,value:" GEngine"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:"ViewExtensions"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"GatherActiveExtensions"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"ExtensionContext"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:A},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"\u002F\u002F ↑↑以上を追加"}]},{type:a,value:"\n\t\n  "},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:aW}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:cm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:cn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:m},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:M}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Extension の利用を引数からのフラグで制御可能にしたので、BPで背景の処理をパスごと有無を切り替えられます。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:al,props:{alt:N,src:"\u002Farticle-assets\u002Funrealengine\u002Flets-implement-a-single-mesh-renderer\u002F\u002Fwith-alpha.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"きちんと背景が抜けました。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:al,props:{alt:N,src:"\u002Farticle-assets\u002Funrealengine\u002Flets-implement-a-single-mesh-renderer\u002F\u002Fwith-alpha-pic.png"},children:[]}]},{type:a,value:f},{type:b,tag:Q,props:{id:bi},children:[{type:b,tag:l,props:{href:bL,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aJ}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"FScenePreview を使った単一メッシュレンダリングを実験してみて、以下のようなことがわかりました。"}]},{type:a,value:f},{type:b,tag:I,props:{id:aj},children:[{type:b,tag:l,props:{href:bM,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aj}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:"簡単に実装できる"}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:"隔離したシーンをセットアップしてキャプチャが行えるので便利。BP上だけで画像が作れる。"}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:"SceneCapture2d などよりはレンダリング機能へ深くアクセスできる"}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:"毎フレーム更新ではなく、メッシュ画像をランタイム生成する用途などには十分使える。"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{id:ak},children:[{type:b,tag:l,props:{href:bN,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ak}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:"パフォーマンス的に優れてるわけではない。また、数が増えると World \u002F Scene のオーバーヘッドが目立ちそう"}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:"FSceneRenderer の内部をいじり回すことはできない"}]},{type:a,value:f},{type:b,tag:p,props:{},children:[{type:a,value:"アルファ抜きは結局Extensionなどでパスを追加して対応するしか無い"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:T,props:{id:"ということで"},children:[{type:b,tag:l,props:{href:bO,ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:bP}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"実はこの記事は前座なのです。次回「独自メッシュパス編」では、より下のほうから手を入れることで、解決できなかった問題を回避したバージョンを実装していきます。"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"幸いまだアドベントカレンダーの記事の枠(過去)は空いているようなので、数日以内にタイムリープして投稿したいと思います。"}]}]},dir:"\u002Farticles\u002Funrealengine",path:ct,extension:".md",createdAt:cu,updatedAt:cu,gitCreatedAt:"2023-12-24T08:48:16.000Z",gitUpdatedAt:"2023-12-25T00:02:30.000Z"},path:ct}],fetch:{"data-v-08b63208:0":{prevTitle:N,nextTitle:N,existPrev:cv,existNext:cv,prevSlug:N,nextSlug:N,seriesPage:N}},mutations:void 0}}("text","element","span","token","punctuation","\n","(",")","function","p","operator","a"," ",",",";","li","true",-1,"icon","icon-link","code",".","keyword","number","-\u003E","=","\n\t","class-name","language-cpp","double-colon","::","0",3,"ul","h3","div","\n\t\t","{","}","","pre",2,"h2","&","comment","h1","remark-highlight","\n\tViewInitOptions","UStaticMeshRenderer","*","string","ViewFamily","ゲームと同じワールドでキャプチャしなければならない","すぐに最適化の限界にぶち当たる","アルファ抜きもハイコスト","FSceneViewFamily","FSceneRenderer","FPreviewScene","SetStaticMesh","一旦使ってみる","背景を除去する","背景除去シェーダーを実装する","モジュールにシェーダーのパスを通す","利点","欠点","img"," RenderTarget","const","\n\t                                                            ","boolean","false","void","FSceneView","CreateStaticMeshRenderer","Render","generic-function","generic","\u003C","\u003E","\n\n\t","TEXT","FPlane","1","FBackgroundErasePS","UWorld \u002F FScene","FSceneViewFamilyContext","C++ 側のシェーダー対応実装を追加","作成したシェーダーを使ったパスを SceneViewExtension で拡張機能化","Extension を適用する","FScenePreview を使ったメッシュレンダリングの所感","code-extra","filename"," BackgroundColor","\n\tStaticMeshRenderer","ConstructionValues","if","!","GetWorld","GetScene"," ViewInfo","Canvas","\n  ","\u002F\u002F 略","2023\u002F12\u002F24","uworld--fscene","fsceneview","fsceneviewfamily","fsceneviewfamilycontext","fscenerenderer","fpreviewscene","createstaticmeshrenderer","setstaticmesh","render","c-側のシェーダー対応実装を追加","作成したシェーダーを使ったパスを-sceneviewextension-で拡張機能化","extension-を適用する","fscenepreview-を使ったメッシュレンダリングの所感","目次","#%E6%9C%AC%E9%A1%8C%E3%81%AE%E5%89%8D%E3%81%AB-%E4%B8%80%E8%88%AC%E7%9A%84%E3%81%AA%E8%A7%A3%E6%B1%BA%E7%AD%96scenecapture2d%E3%81%A8%E3%81%9D%E3%81%AE%E5%95%8F%E9%A1%8C","本題の前に: 一般的な解決策(SceneCapture2D)とその問題","#%E3%82%B2%E3%83%BC%E3%83%A0%E3%81%A8%E5%90%8C%E3%81%98%E3%83%AF%E3%83%BC%E3%83%AB%E3%83%89%E3%81%A7%E3%82%AD%E3%83%A3%E3%83%97%E3%83%81%E3%83%A3%E3%81%97%E3%81%AA%E3%81%91%E3%82%8C%E3%81%B0%E3%81%AA%E3%82%89%E3%81%AA%E3%81%84","#%E3%81%99%E3%81%90%E3%81%AB%E6%9C%80%E9%81%A9%E5%8C%96%E3%81%AE%E9%99%90%E7%95%8C%E3%81%AB%E3%81%B6%E3%81%A1%E5%BD%93%E3%81%9F%E3%82%8B","#%E3%82%A2%E3%83%AB%E3%83%95%E3%82%A1%E6%8A%9C%E3%81%8D%E3%82%82%E3%83%8F%E3%82%A4%E3%82%B3%E3%82%B9%E3%83%88","#ue-%E3%81%AE%E3%83%AC%E3%83%B3%E3%83%80%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%AE%E7%99%BB%E5%A0%B4%E4%BA%BA%E7%89%A9%E3%82%92%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B","UE のレンダリングの登場人物を理解する","#uworld--fscene","#fsceneview","#fsceneviewfamily","#fsceneviewfamilycontext","#fscenerenderer","#%E7%8B%AC%E8%87%AA%E3%81%AE%E5%B0%82%E7%94%A8%E3%82%B7%E3%83%BC%E3%83%B3%E3%82%92%E7%94%A8%E6%84%8F%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84%E3%81%8B","独自の専用シーンを用意できないか？","#fpreviewscene","#fpreviewscene-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%AC%E3%83%B3%E3%83%80%E3%83%AA%E3%83%B3%E3%82%B0%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B","FPreviewScene を使ったレンダリングを実装してみる","#createstaticmeshrenderer","#setstaticmesh","#render","#%E4%B8%80%E6%97%A6%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B","#%E8%83%8C%E6%99%AF%E3%82%92%E9%99%A4%E5%8E%BB%E3%81%99%E3%82%8B","#%E8%83%8C%E6%99%AF%E9%99%A4%E5%8E%BB%E3%82%B7%E3%82%A7%E3%83%BC%E3%83%80%E3%83%BC%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B","#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%AB%E3%82%B7%E3%82%A7%E3%83%BC%E3%83%80%E3%83%BC%E3%81%AE%E3%83%91%E3%82%B9%E3%82%92%E9%80%9A%E3%81%99","#c-%E5%81%B4%E3%81%AE%E3%82%B7%E3%82%A7%E3%83%BC%E3%83%80%E3%83%BC%E5%AF%BE%E5%BF%9C%E5%AE%9F%E8%A3%85%E3%82%92%E8%BF%BD%E5%8A%A0","#%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B7%E3%82%A7%E3%83%BC%E3%83%80%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%91%E3%82%B9%E3%82%92-sceneviewextension-%E3%81%A7%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD%E5%8C%96","#extension-%E3%82%92%E9%81%A9%E7%94%A8%E3%81%99%E3%82%8B","#fscenepreview-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%A1%E3%83%83%E3%82%B7%E3%83%A5%E3%83%AC%E3%83%B3%E3%83%80%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%AE%E6%89%80%E6%84%9F","#%E5%88%A9%E7%82%B9","#%E6%AC%A0%E7%82%B9","#%E3%81%A8%E3%81%84%E3%81%86%E3%81%93%E3%81%A8%E3%81%A7","ということで……","nofollow","noopener","noreferrer","_blank",true,"FDeferredShadingSceneRenderer","FMobileSceneRenderer","NewObject","BackgroundColor ","return"," FTransform","StaticMeshComponent","\n\tStaticMeshComponent","\n\t\tRenderTargetResource"," RenderScene","FEngineShowFlags","ESFIM_Game","EngineShowFlags","\n\tViewFamily","new","ViewRect","ViewInfo","FOV","\n\t               RenderScene","GetRendererModule","BeginRenderingViewFamily","SceneViewExtension","FRenderingPracticeModule","StartupModule","\n                        ","\n\n  ","\u002Farticles\u002Funrealengine\u002Flets-implement-a-single-mesh-renderer","2023-12-24T00:00:00.000Z",false)));