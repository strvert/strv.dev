__NUXT_JSONP__("/blog/unrealengine--draw-rectangles-lines-on-uv-coords", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$){return {data:[{page:{slug:"draw-rectangles-lines-on-uv-coords",description:"UEのマテリアルを使って、UV座標上に図形を描画するメモ",title:"マテリアルでUV座標上に図形を描く",tags:["Unreal Engine","UE Material"],assets:"\u002Farticle-assets\u002Funrealengine\u002Fdraw-rectangles-lines-on-uv-coords",toc:[{id:ax,depth:Z,text:ay},{id:ae,depth:Z,text:ae},{id:af,depth:Z,text:af},{id:ag,depth:Z,text:ag},{id:ah,depth:Z,text:ah},{id:ai,depth:Z,text:ai}],body:{type:"root",children:[{type:a,tag:aa,props:{id:az},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E8%B6%A3%E6%97%A8",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:az}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"UV 座標空間に長方形とかの図形を描くマテリアルを遊びで作ったのでメモとして記事にしておきます。以下のようなことになります。"}]},{type:c,value:d},{type:a,tag:aA,props:{controls:aB,src:"\u002Farticle-assets\u002Funrealengine\u002Fdraw-rectangles-lines-on-uv-coords\u002F\u002Frectangles.mp4"},children:[{type:c,value:"draw-rect-mask-internal"}]},{type:c,value:d},{type:a,tag:aa,props:{id:aC},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E7%92%B0%E5%A2%83",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:aC}]},{type:c,value:d},{type:a,tag:"ul",props:{},children:[{type:c,value:d},{type:a,tag:"li",props:{},children:[{type:c,value:"Engine Version: 5.0.0 Early Access 2"}]},{type:c,value:d}]},{type:c,value:d},{type:a,tag:aa,props:{id:aD},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E9%95%B7%E6%96%B9%E5%BD%A2",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:aD}]},{type:c,value:d},{type:a,tag:_,props:{id:ax},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#uv-%E5%BA%A7%E6%A8%99%E3%81%8B%E3%82%89%E9%95%B7%E6%96%B9%E5%BD%A2%E3%83%9E%E3%82%B9%E3%82%AF%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:ay}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"まず、以下のような Material Function を作成しました。Custom ノード内部の内部で各ピクセルの UV 座標に基づいて長方形の内外を判定し、マスクを作成しています。\n"},{type:a,tag:ab,props:{alt:"draw-rect-mask-internal.png",src:"\u002Farticle-assets\u002Funrealengine\u002Fdraw-rectangles-lines-on-uv-coords\u002F\u002Fdraw-rect-mask-internal.png"},children:[]}]},{type:c,value:d},{type:a,tag:$,props:{className:[aE]},children:[{type:a,tag:$,props:{className:[aF]},children:[{type:c,value:aG}]},{type:a,tag:aH,props:{},children:[{type:a,tag:m,props:{className:[aI]},children:[{type:c,value:"float range = abs(UVs.x - 0.5 + Offset.x);\nfloat half_w = Width \u002F 2;\n\nfloat ubGrad = (0.5 - abs(UVs.y - 0.5 + Offset.y)) * 2;\nfloat mask = int((ubGrad - CutOut*2) + 0.999999);\n\nfloat lineBase = 1-int(range - half_w + 0.999999);\n\nreturn mask * lineBase;"}]}]}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"シェーダーにおいては、if などによる分岐命令パイプライン上で分岐が発生する機能を使用すると大きな性能低下が見られるため、if を用いない形で記述しています。\nそのため少しわかりにくくなっていますが、やっていることは"},{type:a,tag:m,props:{},children:[{type:c,value:aJ}]},{type:c,value:"の幅を持ち、上下を"},{type:a,tag:m,props:{},children:[{type:c,value:"CutOut"}]},{type:c,value:"の大きさだけカットされ、"},{type:a,tag:m,props:{},children:[{type:c,value:"Offset"}]},{type:c,value:"分描画位置をオフセットされた長方形を想定し、該当ピクセルに対応する UV 座標がその内側か外側かを判定しているだけです。これだけで、長方形のマスクを作成することができます。\n(ノードを見ると CustomRotator による入力 UV の回転を行い、長方形を回転させる機能が入っていますが、汎用性のために入れただけで今回は使っていません)"}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"しかし、このパラメータだとすこし使いにくいので、より長方形マスクを作成することに特化したマテリアル関数でラップします。"}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:a,tag:ab,props:{alt:"draw-rect-mask.png",src:"\u002Farticle-assets\u002Funrealengine\u002Fdraw-rectangles-lines-on-uv-coords\u002F\u002Fdraw-rect-mask.png"},children:[]}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"こちらは極めて単純です。先程のマテリアル関数の入力パラメータを"},{type:a,tag:m,props:{},children:[{type:c,value:aK}]},{type:c,value:aj},{type:a,tag:m,props:{},children:[{type:c,value:aJ}]},{type:c,value:aj},{type:a,tag:m,props:{},children:[{type:c,value:"Height"}]},{type:c,value:aj},{type:a,tag:m,props:{},children:[{type:c,value:"Left"}]},{type:c,value:aj},{type:a,tag:m,props:{},children:[{type:c,value:"Top"}]},{type:c,value:" という扱いやすいものにするための前処理を加えただけです。"}]},{type:c,value:d},{type:a,tag:_,props:{id:ae},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E8%89%B2%E4%BB%98%E3%81%8D%E9%95%B7%E6%96%B9%E5%BD%A2%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:ae}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"せっかくですので、長方形マスクだけでなく、透明度と色を持った長方形を描画するマテリアル関数も作ってみましょう。"}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:a,tag:ab,props:{alt:"draw-color-rect.png",src:"\u002Farticle-assets\u002Funrealengine\u002Fdraw-rectangles-lines-on-uv-coords\u002F\u002Fdraw-color-rect.png"},children:[]},{type:c,value:"\nこのネットワークでは、先ほど作成した長方形マスク関数を元に、長方形の色と背景の色を透明度付きで指定できるようにしています。\nこれで位置・サイズ・色が指定可能な長方形が作れたので、これを素材に何かを生成するなり、テクスチャに合成するなりして自由に使うことができます。"}]},{type:c,value:d},{type:a,tag:_,props:{id:af},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:af}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"今回はテストですので、テクスチャに対して異なる色・透明度を持つ複数の正方形をアルファブレンドするサンプル(冒頭に示していたもの)を作成しました。"}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:a,tag:ab,props:{alt:"final-node.png",src:"\u002Farticle-assets\u002Funrealengine\u002Fdraw-rectangles-lines-on-uv-coords\u002F\u002Ffinal-node.png"},children:[]},{type:c,value:"\nこちらがサンプルのネットワークです。(動きをつけている部分は今回の本質ではないので入れていません)"}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"すると、冒頭に示したこちらの動画のように、テクスチャが配置された UV 座標に基づいて長方形の描画ができます。"}]},{type:c,value:d},{type:a,tag:aa,props:{id:aL},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E5%86%86",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:aL}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"今度は円を描画してみます。"}]},{type:c,value:d},{type:a,tag:_,props:{id:ag},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E5%86%86%E3%81%AE%E6%95%B0%E5%AD%A6%E7%9A%84%E3%81%AA%E8%A1%A8%E7%A4%BA",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:ag}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"円はベクトルとして表すと、以下のようになります。\nここで、"},{type:a,tag:b,props:{className:[l,ac]},children:[{type:a,tag:b,props:{className:[Q]},children:[{type:a,tag:b,props:{className:[R]},children:[{type:a,tag:l,props:{xmlns:S},children:[{type:a,tag:T,props:{},children:[{type:a,tag:U,props:{},children:[{type:a,tag:x,props:{accent:g},children:[{type:a,tag:k,props:{},children:[{type:c,value:f}]},{type:a,tag:n,props:{},children:[{type:c,value:y}]}]}]},{type:a,tag:V,props:{encoding:W},children:[{type:c,value:aM}]}]}]}]},{type:a,tag:b,props:{className:[X],ariaHidden:g},children:[{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:aN},children:[]},{type:a,tag:b,props:{className:[e,z]},children:[{type:a,tag:b,props:{className:[A,ak]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:B},children:[{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,w]},children:[{type:c,value:f}]}]}]},{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[C],style:al},children:[{type:a,tag:b,props:{className:[D],style:E},children:[{type:a,tag:F,props:{width:G,height:H,style:I,viewBox:J,preserveAspectRatio:K},children:[{type:a,tag:L,props:{d:M},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:an}]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:ao},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]},{type:c,value:"は円周上の任意の点、"},{type:a,tag:b,props:{className:[l,ac]},children:[{type:a,tag:b,props:{className:[Q]},children:[{type:a,tag:b,props:{className:[R]},children:[{type:a,tag:l,props:{xmlns:S},children:[{type:a,tag:T,props:{},children:[{type:a,tag:U,props:{},children:[{type:a,tag:x,props:{accent:g},children:[{type:a,tag:k,props:{},children:[{type:c,value:N}]},{type:a,tag:n,props:{},children:[{type:c,value:y}]}]}]},{type:a,tag:V,props:{encoding:W},children:[{type:c,value:aO}]}]}]}]},{type:a,tag:b,props:{className:[X],ariaHidden:g},children:[{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:aP},children:[]},{type:a,tag:b,props:{className:[e,z]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:B},children:[{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,w]},children:[{type:c,value:N}]}]}]},{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[C],style:ap},children:[{type:a,tag:b,props:{className:[D],style:E},children:[{type:a,tag:F,props:{width:G,height:H,style:I,viewBox:J,preserveAspectRatio:K},children:[{type:a,tag:L,props:{d:M},children:[]}]}]}]}]}]}]}]}]}]}]}]}]},{type:c,value:"は円の中心、"},{type:a,tag:b,props:{className:[l,ac]},children:[{type:a,tag:b,props:{className:[Q]},children:[{type:a,tag:b,props:{className:[R]},children:[{type:a,tag:l,props:{xmlns:S},children:[{type:a,tag:T,props:{},children:[{type:a,tag:U,props:{},children:[{type:a,tag:k,props:{},children:[{type:c,value:Y}]}]},{type:a,tag:V,props:{encoding:W},children:[{type:c,value:Y}]}]}]}]},{type:a,tag:b,props:{className:[X],ariaHidden:g},children:[{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:av},children:[]},{type:a,tag:b,props:{className:[e,w],style:aw},children:[{type:c,value:Y}]}]}]}]}]},{type:c,value:"は半径です。"}]},{type:c,value:d},{type:a,tag:$,props:{className:[l,aQ]},children:[{type:a,tag:b,props:{className:[aR]},children:[{type:a,tag:b,props:{className:[Q]},children:[{type:a,tag:b,props:{className:[R]},children:[{type:a,tag:l,props:{xmlns:S,display:aS},children:[{type:a,tag:T,props:{},children:[{type:a,tag:U,props:{},children:[{type:a,tag:k,props:{mathvariant:aq},children:[{type:c,value:O}]},{type:a,tag:x,props:{accent:g},children:[{type:a,tag:k,props:{},children:[{type:c,value:f}]},{type:a,tag:n,props:{},children:[{type:c,value:y}]}]},{type:a,tag:n,props:{},children:[{type:c,value:ar}]},{type:a,tag:x,props:{accent:g},children:[{type:a,tag:k,props:{},children:[{type:c,value:N}]},{type:a,tag:n,props:{},children:[{type:c,value:y}]}]},{type:a,tag:k,props:{mathvariant:aq},children:[{type:c,value:O}]},{type:a,tag:n,props:{},children:[{type:c,value:aT}]},{type:a,tag:k,props:{},children:[{type:c,value:Y}]}]},{type:a,tag:V,props:{encoding:W},children:[{type:c,value:"\\|\\vec{p}-\\vec{c}\\| = r"}]}]}]}]},{type:a,tag:b,props:{className:[X],ariaHidden:g},children:[{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:as},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:c,value:O}]},{type:a,tag:b,props:{className:[e,z]},children:[{type:a,tag:b,props:{className:[A,ak]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:B},children:[{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,w]},children:[{type:c,value:f}]}]}]},{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[C],style:al},children:[{type:a,tag:b,props:{className:[D],style:E},children:[{type:a,tag:F,props:{width:G,height:H,style:I,viewBox:J,preserveAspectRatio:K},children:[{type:a,tag:L,props:{d:M},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:an}]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:ao},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[P],style:at},children:[]},{type:a,tag:b,props:{className:[aU]},children:[{type:c,value:ar}]},{type:a,tag:b,props:{className:[P],style:at},children:[]}]},{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:as},children:[]},{type:a,tag:b,props:{className:[e,z]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:B},children:[{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,w]},children:[{type:c,value:N}]}]}]},{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[C],style:ap},children:[{type:a,tag:b,props:{className:[D],style:E},children:[{type:a,tag:F,props:{width:G,height:H,style:I,viewBox:J,preserveAspectRatio:K},children:[{type:a,tag:L,props:{d:M},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[e]},children:[{type:c,value:O}]},{type:a,tag:b,props:{className:[P],style:au},children:[]},{type:a,tag:b,props:{className:[aV]},children:[{type:c,value:aT}]},{type:a,tag:b,props:{className:[P],style:au},children:[]}]},{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:av},children:[]},{type:a,tag:b,props:{className:[e,w],style:aw},children:[{type:c,value:Y}]}]}]}]}]}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"これは"},{type:a,tag:b,props:{className:[l,ac]},children:[{type:a,tag:b,props:{className:[Q]},children:[{type:a,tag:b,props:{className:[R]},children:[{type:a,tag:l,props:{xmlns:S},children:[{type:a,tag:T,props:{},children:[{type:a,tag:U,props:{},children:[{type:a,tag:x,props:{accent:g},children:[{type:a,tag:k,props:{},children:[{type:c,value:f}]},{type:a,tag:n,props:{},children:[{type:c,value:y}]}]}]},{type:a,tag:V,props:{encoding:W},children:[{type:c,value:aM}]}]}]}]},{type:a,tag:b,props:{className:[X],ariaHidden:g},children:[{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:aN},children:[]},{type:a,tag:b,props:{className:[e,z]},children:[{type:a,tag:b,props:{className:[A,ak]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:B},children:[{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,w]},children:[{type:c,value:f}]}]}]},{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[C],style:al},children:[{type:a,tag:b,props:{className:[D],style:E},children:[{type:a,tag:F,props:{width:G,height:H,style:I,viewBox:J,preserveAspectRatio:K},children:[{type:a,tag:L,props:{d:M},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:an}]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:ao},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]},{type:c,value:"と"},{type:a,tag:b,props:{className:[l,ac]},children:[{type:a,tag:b,props:{className:[Q]},children:[{type:a,tag:b,props:{className:[R]},children:[{type:a,tag:l,props:{xmlns:S},children:[{type:a,tag:T,props:{},children:[{type:a,tag:U,props:{},children:[{type:a,tag:x,props:{accent:g},children:[{type:a,tag:k,props:{},children:[{type:c,value:N}]},{type:a,tag:n,props:{},children:[{type:c,value:y}]}]}]},{type:a,tag:V,props:{encoding:W},children:[{type:c,value:aO}]}]}]}]},{type:a,tag:b,props:{className:[X],ariaHidden:g},children:[{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:aP},children:[]},{type:a,tag:b,props:{className:[e,z]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:B},children:[{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,w]},children:[{type:c,value:N}]}]}]},{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[C],style:ap},children:[{type:a,tag:b,props:{className:[D],style:E},children:[{type:a,tag:F,props:{width:G,height:H,style:I,viewBox:J,preserveAspectRatio:K},children:[{type:a,tag:L,props:{d:M},children:[]}]}]}]}]}]}]}]}]}]}]}]}]},{type:c,value:"の距離が r と等しくなるような点の集合が円であるということなので、結果として線状の円周を示します。今回指定したいのは円の内側の面領域なので、不等式にすればよいです。"}]},{type:c,value:d},{type:a,tag:$,props:{className:[l,aQ]},children:[{type:a,tag:b,props:{className:[aR]},children:[{type:a,tag:b,props:{className:[Q]},children:[{type:a,tag:b,props:{className:[R]},children:[{type:a,tag:l,props:{xmlns:S,display:aS},children:[{type:a,tag:T,props:{},children:[{type:a,tag:U,props:{},children:[{type:a,tag:k,props:{mathvariant:aq},children:[{type:c,value:O}]},{type:a,tag:x,props:{accent:g},children:[{type:a,tag:k,props:{},children:[{type:c,value:f}]},{type:a,tag:n,props:{},children:[{type:c,value:y}]}]},{type:a,tag:n,props:{},children:[{type:c,value:ar}]},{type:a,tag:x,props:{accent:g},children:[{type:a,tag:k,props:{},children:[{type:c,value:N}]},{type:a,tag:n,props:{},children:[{type:c,value:y}]}]},{type:a,tag:k,props:{mathvariant:aq},children:[{type:c,value:O}]},{type:a,tag:n,props:{},children:[{type:c,value:aW}]},{type:a,tag:k,props:{},children:[{type:c,value:Y}]}]},{type:a,tag:V,props:{encoding:W},children:[{type:c,value:"\\|\\vec{p}-\\vec{c}\\| \\leq r"}]}]}]}]},{type:a,tag:b,props:{className:[X],ariaHidden:g},children:[{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:as},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:c,value:O}]},{type:a,tag:b,props:{className:[e,z]},children:[{type:a,tag:b,props:{className:[A,ak]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:B},children:[{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,w]},children:[{type:c,value:f}]}]}]},{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[C],style:al},children:[{type:a,tag:b,props:{className:[D],style:E},children:[{type:a,tag:F,props:{width:G,height:H,style:I,viewBox:J,preserveAspectRatio:K},children:[{type:a,tag:L,props:{d:M},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:an}]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:ao},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[P],style:at},children:[]},{type:a,tag:b,props:{className:[aU]},children:[{type:c,value:ar}]},{type:a,tag:b,props:{className:[P],style:at},children:[]}]},{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:as},children:[]},{type:a,tag:b,props:{className:[e,z]},children:[{type:a,tag:b,props:{className:[A]},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:B},children:[{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[e]},children:[{type:a,tag:b,props:{className:[e,w]},children:[{type:c,value:N}]}]}]},{type:a,tag:b,props:{style:h},children:[{type:a,tag:b,props:{className:[i],style:j},children:[]},{type:a,tag:b,props:{className:[C],style:ap},children:[{type:a,tag:b,props:{className:[D],style:E},children:[{type:a,tag:F,props:{width:G,height:H,style:I,viewBox:J,preserveAspectRatio:K},children:[{type:a,tag:L,props:{d:M},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[e]},children:[{type:c,value:O}]},{type:a,tag:b,props:{className:[P],style:au},children:[]},{type:a,tag:b,props:{className:[aV]},children:[{type:c,value:aW}]},{type:a,tag:b,props:{className:[P],style:au},children:[]}]},{type:a,tag:b,props:{className:[u]},children:[{type:a,tag:b,props:{className:[v],style:av},children:[]},{type:a,tag:b,props:{className:[e,w],style:aw},children:[{type:c,value:Y}]}]}]}]}]}]},{type:c,value:d},{type:a,tag:_,props:{id:ah},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E5%86%86%E3%81%AE%E3%83%9E%E3%82%B9%E3%82%AF%E3%82%92%E6%8F%8F%E7%94%BB%E3%81%99%E3%82%8B",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:ah}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"この考えに従うと、円のマスクを描画するのは次のコード 1 行で完結します。"}]},{type:c,value:d},{type:a,tag:$,props:{className:[aE]},children:[{type:a,tag:$,props:{className:[aF]},children:[{type:c,value:aG}]},{type:a,tag:aH,props:{},children:[{type:a,tag:m,props:{className:[aI]},children:[{type:c,value:"return int(saturate(Radius - distance(Center, UVs)) + 0.999999);"}]}]}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"また分岐を使っていないので可読性が下がっていますが、やっていることは円の中心"},{type:a,tag:m,props:{},children:[{type:c,value:"Center"}]},{type:c,value:"と現在のUV座標である"},{type:a,tag:m,props:{},children:[{type:c,value:aK}]},{type:c,value:"の距離を出し(ノルムに対応)、半径からその距離を減算し、0以下になったかそうでないかで、最終的に0と1のどちらかに値がなるように調整しています。\nこちらを以下のようにCustomノードに記入して、配線するだけです。これで位置と半径を指定した円を描くことができます。"}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:a,tag:ab,props:{alt:"draw-circle-mask.png",src:"\u002Farticle-assets\u002Funrealengine\u002Fdraw-rectangles-lines-on-uv-coords\u002F\u002Fdraw-circle-mask.png"},children:[]}]},{type:c,value:d},{type:a,tag:_,props:{id:ai},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E8%89%B2%E4%BB%98%E3%81%8D%E5%86%86%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:ai}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"これについては、色付き長方形を作成した際の長方形マスクマテリアル関数を、そのまま円のマスクマテリアル関数の置き換えるだけで作成可能なので、割愛します。"}]},{type:c,value:d},{type:a,tag:aa,props:{id:aX},children:[{type:a,tag:q,props:{ariaHidden:g,href:"#%E3%81%BE%E3%81%A8%E3%82%81",tabIndex:r},children:[{type:a,tag:b,props:{className:[s,t]},children:[]}]},{type:c,value:aX}]},{type:c,value:d},{type:a,tag:aA,props:{controls:aB,src:"\u002Farticle-assets\u002Funrealengine\u002Fdraw-rectangles-lines-on-uv-coords\u002F\u002Fresult.mp4"},children:[{type:c,value:"result.mp4"}]},{type:c,value:d},{type:a,tag:f,props:{},children:[{type:c,value:"UV 座標を元に図形を描くのは簡単にできることがわかったと思います。次はレイマーチングしたい。"}]}]},dir:"\u002Farticles\u002Funrealengine",path:aY,extension:".md",createdAt:aZ,updatedAt:a_,gitCreatedAt:aZ,gitUpdatedAt:a_},path:aY}],fetch:{"data-v-08b63208:0":{prevTitle:ad,nextTitle:ad,existPrev:a$,existNext:a$,prevSlug:ad,nextSlug:ad,seriesPage:ad}},mutations:void 0}}("element","span","text","\n","mord","p","true","top:-3em;","pstrut","height:3em;","mi","math","code","mo","vlist-r","vlist","a",-1,"icon","icon-link","base","strut","mathnormal","mover","⃗","accent","vlist-t","height:0.714em;","accent-body","overlay","height:0.714em;width:0.471em;","svg","0.471em","0.714em","width:0.471em","0 0 471 714","xMinYMin","path","M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z","c","∥","mspace","katex","katex-mathml","http:\u002F\u002Fwww.w3.org\u002F1998\u002FMath\u002FMathML","semantics","mrow","annotation","application\u002Fx-tex","katex-html","r",2,"h2","div","h1","img","math-inline","","色付き長方形を作成する","使ってみる","円の数学的な表示","円のマスクを描画する","色付き円を作成する"," ","vlist-t2","left:-0.15216em;","vlist-s","​","height:0.19444em;","left:-0.17994em;","normal","−","height:1em;vertical-align:-0.25em;","margin-right:0.2222222222222222em;","margin-right:0.2777777777777778em;","height:0.43056em;vertical-align:0em;","margin-right:0.02778em;","uv-座標から長方形マスクを作成する","UV 座標から長方形マスクを作成する","趣旨","video",true,"環境","長方形","code-extra","filename","Custom Nodeのコード","pre","language-hlsl","Width","UVs","円","\\vec{p}","height:0.9084399999999999em;vertical-align:-0.19444em;","\\vec{c}","height:0.714em;vertical-align:0em;","math-display","katex-display","block","=","mbin","mrel","≤","まとめ","\u002Farticles\u002Funrealengine\u002Fdraw-rectangles-lines-on-uv-coords","2022-01-29T00:45:39.000Z","2022-01-29T18:57:28.000Z",false)));