__NUXT_JSONP__("/blog/unrealengine--raytracing-on-a-material", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg){return {data:[{page:{slug:"raytracing-on-a-material",description:"UEのマテリアルを使って、基本的な球のレイトレーシングを実装してみた記事",title:"UEのマテリアル上でレイトレーシングしてみた",tags:["Unreal Engine","UE Material"],assets:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material",toc:[{id:bp,depth:aA,text:bp},{id:bq,depth:aJ,text:bq},{id:br,depth:aA,text:br},{id:bs,depth:aA,text:bs},{id:bt,depth:aA,text:bt},{id:bu,depth:aA,text:bu},{id:cb,depth:aA,text:cc},{id:bv,depth:aJ,text:bv},{id:bw,depth:aJ,text:bw},{id:bx,depth:aJ,text:bx},{id:by,depth:aA,text:by},{id:cd,depth:aJ,text:bz},{id:ce,depth:aJ,text:cf},{id:aX,depth:aJ,text:bK},{id:cg,depth:aJ,text:bl},{id:bA,depth:aA,text:bA},{id:ch,depth:aJ,text:bL},{id:bB,depth:aA,text:bB},{id:bC,depth:aA,text:bC}],body:{type:"root",children:[{type:a,tag:aY,props:{id:ci},children:[{type:a,tag:w,props:{href:"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:ci}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"次の画像を御覧ください。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"intro lit",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fintro-lit.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"4 つの球がワールド上に配置されている用に見えます。しかし、これを Unlit 表示にすると次のようになります。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"intro unlit",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fintro-unlit.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"何か不自然ですね。ではワイヤフレーム表示にしてみます。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"intro wireframe",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fintro-wireframe.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"なんと、色がついた 3 つの球はポリゴンによるものではなく、板ポリに適用されたマテリアルによって描画されたものでした。本物のポリゴンによる球は白だけだったのです。"}]},{type:c,value:e},{type:a,tag:aY,props:{id:cj},children:[{type:a,tag:w,props:{href:"#%E8%B6%A3%E6%97%A8",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:cj}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"UE のマテリアルだけを使って、簡易的な球のレイトレーシングを実装するサンプルを作ってみました。\nまた、UE のマテリアルで利用可能な機能を活用して、以下のようなことが実現されています。"}]},{type:c,value:e},{type:a,tag:bM,props:{},children:[{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:c,value:"マテリアル上に描画された空間が連続して見えるように、使用中の CameraActor 位置に基づいた描画を行う"}]},{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:c,value:"SkyLight の位置に基づいた、周囲のオブジェクトから浮かない簡易的な陰影づけ"}]},{type:c,value:e}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"実際に動かしてみると、こんな感じです。"}]},{type:c,value:e},{type:a,tag:"video",props:{controls:true,src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fmove.mp4"},children:[{type:c,value:"move"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"完全にやってみたくてやった遊びなので実用性はあまりないですが、マテリアルのいろんな機能を使うサンプルとしては楽しいと思います。そんなに難しいことも出てきません。"}]},{type:c,value:e},{type:a,tag:aY,props:{id:ck},children:[{type:a,tag:w,props:{href:"#%E7%92%B0%E5%A2%83",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:ck}]},{type:c,value:e},{type:a,tag:bM,props:{},children:[{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:c,value:"Engine Version: 5.0.0 Early Access 2"}]},{type:c,value:e}]},{type:c,value:e},{type:a,tag:aY,props:{id:cl},children:[{type:a,tag:w,props:{href:"#%E4%BD%9C%E6%88%90%E3%81%AB%E7%94%A8%E3%81%84%E3%82%8B%E8%80%83%E3%81%88%E3%81%A8%E6%BA%96%E5%82%99",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:cl}]},{type:c,value:e},{type:a,tag:aC,props:{id:bp},children:[{type:a,tag:w,props:{href:"#%E3%83%AC%E3%82%A4%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%B3%E3%82%B0%E3%81%AB%E4%BD%BF%E3%81%86%E5%BA%A7%E6%A8%99%E7%B3%BB",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bp}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"レイトレーシングを行うには座標空間が必要です。今回は、マテリアルが適用されたオブジェクトの中心位置を、レイトレーシングで描画する内部座標系の原点"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:ak}]},{type:a,tag:ap,props:{},children:[{type:c,value:ac}]},{type:a,tag:h,props:{separator:f},children:[{type:c,value:aZ}]},{type:a,tag:ap,props:{},children:[{type:c,value:ac}]},{type:a,tag:h,props:{separator:f},children:[{type:c,value:aZ}]},{type:a,tag:ap,props:{},children:[{type:c,value:ac}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:al}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"(0, 0, 0)"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[av]},children:[{type:c,value:ak}]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]},{type:a,tag:b,props:{className:[bN]},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{className:[m],style:bO},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]},{type:a,tag:b,props:{className:[bN]},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{className:[m],style:bO},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]},{type:a,tag:b,props:{className:[aw]},children:[{type:c,value:al}]}]}]}]}]},{type:c,value:"と決めました。\n(今後、レイトレーシングに使うマテリアル内部の空間の座標系のことは内部座標系と呼びます。)\nこれにより、マテリアルを適用したオブジェクトごとに異なる座標系上でレイトレーシングが行われることになります。"}]},{type:c,value:e},{type:a,tag:aK,props:{id:bq},children:[{type:a,tag:w,props:{href:"#%E5%BA%A7%E6%A8%99%E5%A4%89%E6%8F%9B",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bq}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"今回の実装では、内部座標系から見たら外側の、CameraActor の位置情報などをレイの生成に利用します。当然ですが、CameraActor などから取得できるのはワールド座標系での位置情報が原則です。この情報を内部座標系での処理に利用するには、ワールド座標系 → 内部座標系の座標変換が必要となります。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"ここで対象とするの 2 つの座標系は、どちらも同じ大きさ(?)の直交座標系であるため、線形代数で登場するような座標変換の手法は必要ありません。原点位置をオフセットするような演算を行うだけでよく、これは減算で実現できます。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"変換のために、"},{type:a,tag:F,props:{},children:[{type:c,value:cm}]},{type:c,value:"というマテリアル関数を作成しました。ここで、"},{type:a,tag:F,props:{},children:[{type:c,value:"TargetPosition"}]},{type:c,value:"はワールド座標系上の変換元の点、"},{type:a,tag:F,props:{},children:[{type:c,value:"ObjectOrigin"}]},{type:c,value:"は今回の内部座標系の基準とする、ワールド座標系上でのオブジェクトの原点です。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"to rtspace",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fto-rt-space.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"今後、ワールド座標系 → 内部座標系の値の受け渡しで変換が必要なときに利用します。"}]},{type:c,value:e},{type:a,tag:aC,props:{id:br},children:[{type:a,tag:w,props:{href:"#%E3%83%AC%E3%82%A4%E3%82%92%E9%A3%9B%E3%81%B0%E3%81%99%E5%A7%8B%E7%82%B9%E3%81%A8%E6%96%B9%E5%90%91",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:br}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"レイトレーシングを行うためには、レイを飛ばさなければなりません。今回は image-order なレイトレーシングを考えるため、カメラ位置から、描画されるピクセル一つ一つに向かうようなレイを生成します。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"すると、レイの始点はカメラ位置（ワールド座標系から内部座標系に変換されたもの）となり、レイの方向は「カメラ位置 → マテリアルが適用されたオブジェクト表面上の点位置」とできます。\nこの方向ベクトルはまたしても減算で手に入れることができます。得られた方向ベクトルは後々のために正規化しておきます。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"レイの方向を得る処理は、"},{type:a,tag:F,props:{},children:[{type:c,value:cn}]},{type:c,value:"というマテリアル関数に記述しました。ここで、"},{type:a,tag:F,props:{},children:[{type:c,value:"AbsoluteWorldPosition"}]},{type:c,value:"はマテリアルが適用されたオブジェクトの表面上の点、"},{type:a,tag:F,props:{},children:[{type:c,value:"CameraPosition"}]},{type:c,value:"はカメラ位置です。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"create ray direction",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fcreate-ray-direction.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"レイの始点を得る処理は、カメラ位置がそのまま始点と対応するため記述の必要がありません。"}]},{type:c,value:e},{type:a,tag:aC,props:{id:bs},children:[{type:a,tag:w,props:{href:"#%E6%8F%8F%E7%94%BB%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E7%92%B0%E5%A2%83%E3%81%AE%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%82%92%E5%BE%97%E3%82%8B%E6%96%B9%E6%B3%95",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bs}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"カメラ位置やライト情報に基づいた描画をするには、それらの位置を取得せねばなりません。また、座標系構築のためにはマテリアルを適用したオブジェクトの中心位置が必要ですし、レイの射出方向を決めるにはそのオブジェクトの描画された表面上の任意の点の位置も必要です。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"これらはすべて、UE の Material に標準で用意されているノードから取得することができます。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"bulitin nodes",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fbuiltin-nodes.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"詳細は検索すれば出てくるので割愛するとして、概要を示します。"}]},{type:c,value:e},{type:a,tag:az,props:{id:"camera-position"},children:[{type:a,tag:w,props:{href:"#camera-position",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:co}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"現在の Viewport の視点となっているカメラのワールド座標系における位置を取得できるノード。"}]},{type:c,value:e},{type:a,tag:az,props:{id:"skyatmospherelightdirection"},children:[{type:a,tag:w,props:{href:"#skyatmospherelightdirection",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:"SkyAtmosphereLightDirection"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"レベル上の DirectionalLight の方向ベクトルを取得できるノード。DirectionalLight は無限遠からの平行光線を想定した光源なので、位置に意味がなく、方向のみが取得できる。\n今回の描画はこのライト情報に基づく。取得ライトのインデックスは、DirectionalLight の Atmosphere Sun Light Index プロパティと対応する。"}]},{type:c,value:e},{type:a,tag:az,props:{id:"object-position"},children:[{type:a,tag:w,props:{href:"#object-position",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:"Object Position"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"レベルに配置されたオブジェクトのバウンディングボックスから、その中心位置をワールド座標系に基づいて取得できるノード。"}]},{type:c,value:e},{type:a,tag:az,props:{id:"absolute-world-position-world-position"},children:[{type:a,tag:w,props:{href:"#absolute-world-position-world-position",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:"Absolute World Position (World Position)"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"オブジェクトの表面上の任意の点の、ワールド座標系での位置を取得できるノード。"}]},{type:c,value:e},{type:a,tag:aC,props:{id:bt},children:[{type:a,tag:w,props:{href:"#%E7%90%83%E3%81%A8%E3%83%AC%E3%82%A4%E3%81%AE%E8%A1%9D%E7%AA%81%E5%88%A4%E5%AE%9A",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bt}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"球とレイの衝突判定について詳説するには数学的な解説が必要となりますが、すでに先行する多くの有用な資料がありますので、ここでは詳説せず、経過のみを述べます。参考になりそうな資料のリンクを貼っておきます。"}]},{type:c,value:e},{type:a,tag:bM,props:{},children:[{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:a,tag:w,props:{href:"https:\u002F\u002Fweb.wakayama-u.ac.jp\u002F~tokoi\u002Flecture\u002Fcg\u002Fcgnote14.pdf",rel:[cp,cq,cr],target:cs},children:[{type:c,value:"和歌山大学 コンピュータグラフィックス講義資料"}]}]},{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:a,tag:w,props:{href:"https:\u002F\u002Fknzw.tech\u002Fraytracing\u002F?page_id=78",rel:[cp,cq,cr],target:cs},children:[{type:c,value:"東京電機大学 工学部第二部情報通信工学実験　グラフィックス応用テキスト"}]}]},{type:c,value:e}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"球は、その中心点と半径の 2 つのパラメータによって位置と形状を決定できます。これは、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:bD}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aV},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]},{type:c,value:"を球面上の任意の点、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"\\vec{c}"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bP},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ad}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]}]}]}]}]},{type:c,value:"を球の中心点、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:as}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:as}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:ct},children:[]},{type:a,tag:b,props:{className:[d,n],style:aW},children:[{type:c,value:as}]}]}]}]}]},{type:c,value:"を半径としたとき、以下の式で記述できることを示します。"}]},{type:c,value:e},{type:a,tag:at,props:{className:[l,aO]},children:[{type:a,tag:b,props:{className:[aP]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z,display:aQ},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{mathvariant:aX},children:[{type:c,value:aR}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:g,props:{mathvariant:aX},children:[{type:c,value:aR}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:g,props:{},children:[{type:c,value:as}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"\\|\\vec{p} - \\vec{c}\\| = r"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:aR}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ad}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:aR}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:ct},children:[]},{type:a,tag:b,props:{className:[d,n],style:aW},children:[{type:c,value:as}]}]}]}]}]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:bD}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aV},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]},{type:c,value:"は球面上の任意の点なので、この点がレイの線上のどこかの点と共有できるならば、球とレイが衝突したことになります。\n共有する点が存在するかどうかは、単純に球のベクトル方程式にレイの方程式を代入して、レイの方程式に登場した"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"について解けば良いです。すると二次方程式になるので、二次方程式の解の公式に従って変形すると、以下のようになります。"}]},{type:c,value:e},{type:a,tag:at,props:{style:"display: flex; inline-size: 100%; justify-content: center; flex-wrap: wrap"},children:[{type:c,value:e},{type:a,tag:at,props:{style:cu},children:[{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:aE}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:an}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aS}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:an}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"A = \\vec{d} \\cdot \\vec{d}"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a_},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:aE}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a$},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:an}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:aT},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:aS}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a$},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:an}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:aT},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]}]}]}]}]},{type:c,value:cv},{type:a,tag:bE,props:{},children:[]},{type:c,value:e},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:aH}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:an}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aS}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:ak}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:al}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"B = \\vec{d} \\cdot (\\vec{s} - \\vec{c})"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a_},children:[]},{type:a,tag:b,props:{className:[d,n],style:bm},children:[{type:c,value:aH}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a$},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:an}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:aT},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:aS}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[av]},children:[{type:c,value:ak}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ae}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ad}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[aw]},children:[{type:c,value:al}]}]}]}]}]},{type:c,value:cv},{type:a,tag:bE,props:{},children:[]},{type:c,value:e},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:ba}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:ak}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:al}]},{type:a,tag:h,props:{},children:[{type:c,value:aS}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:ak}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:al}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:bQ,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:as}]},{type:a,tag:ap,props:{},children:[{type:c,value:bb}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"C = (\\vec{s} - \\vec{c}) \\cdot (\\vec{s} - \\vec{c}) - r^2"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a_},children:[]},{type:a,tag:b,props:{className:[d,n],style:bR},children:[{type:c,value:ba}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[av]},children:[{type:c,value:ak}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ae}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ad}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[aw]},children:[{type:c,value:al}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:aS}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[av]},children:[{type:c,value:ak}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ae}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ad}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[aw]},children:[{type:c,value:al}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:"height:0.8141079999999999em;vertical-align:0em;"},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n],style:aW},children:[{type:c,value:as}]},{type:a,tag:b,props:{className:[bc]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:0.8141079999999999em;"},children:[{type:a,tag:b,props:{style:"top:-3.063em;margin-right:0.05em;"},children:[{type:a,tag:b,props:{className:[i],style:bd},children:[]},{type:a,tag:b,props:{className:[be,bf,bg,Y]},children:[{type:a,tag:b,props:{className:[d,Y]},children:[{type:c,value:bb}]}]}]}]}]}]}]}]}]}]}]}]}]},{type:c,value:e}]},{type:c,value:e},{type:a,tag:at,props:{style:cu},children:[{type:c,value:e},{type:a,tag:bE,props:{},children:[]},{type:c,value:e},{type:a,tag:at,props:{className:[l,aO]},children:[{type:a,tag:b,props:{className:[aP]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z,display:aQ},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:bh,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:g,props:{},children:[{type:c,value:aH}]},{type:a,tag:h,props:{},children:[{type:c,value:bF}]},{type:a,tag:cw,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:bQ,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:aH}]},{type:a,tag:ap,props:{},children:[{type:c,value:bb}]}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:g,props:{},children:[{type:c,value:aE}]},{type:a,tag:g,props:{},children:[{type:c,value:ba}]}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:aE}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"t = \\frac{-B \\pm \\sqrt{B^2 - AC}}{A}"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:"height:2.276389em;vertical-align:-0.686em;"},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[av,bi]},children:[]},{type:a,tag:b,props:{className:[bh]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:1.590389em;"},children:[{type:a,tag:b,props:{style:bS},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:aE}]}]}]},{type:a,tag:b,props:{style:bT},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[bU],style:bV},children:[]}]},{type:a,tag:b,props:{style:cx},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[d,n],style:bm},children:[{type:c,value:aH}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:bF}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[d,cy]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:0.913389em;"},children:[{type:a,tag:b,props:{className:[cz],style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d],style:cA},children:[{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n],style:bm},children:[{type:c,value:aH}]},{type:a,tag:b,props:{className:[bc]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:0.740108em;"},children:[{type:a,tag:b,props:{style:"top:-2.9890000000000003em;margin-right:0.05em;"},children:[{type:a,tag:b,props:{className:[i],style:bd},children:[]},{type:a,tag:b,props:{className:[be,bf,bg,Y]},children:[{type:a,tag:b,props:{className:[d,Y]},children:[{type:c,value:bb}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:aE}]},{type:a,tag:b,props:{className:[d,n],style:bR},children:[{type:c,value:ba}]}]}]},{type:a,tag:b,props:{style:"top:-2.873389em;"},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[cB],style:cC},children:[{type:a,tag:G,props:{width:cD,height:cE,viewBox:cF,preserveAspectRatio:cG},children:[{type:a,tag:H,props:{d:cH},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:0.12661100000000003em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:cI},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[aw,bi]},children:[]}]}]}]}]}]}]},{type:c,value:e},{type:a,tag:bE,props:{},children:[]},{type:c,value:e}]},{type:c,value:e}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"ここで、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"について解いたの式の、ルートの内部に注目します。この式はルートの中に入っているため、値が負になってしまうと実数に解を持たなくなります。複素数の位置など登場しませんので、レイ上と球面上に共有する点はないとみなしてよいことになります。よって、ルート内の式の値を見て、それが"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:ap,props:{},children:[{type:c,value:ac}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:ac}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bW},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]}]}]}]}]},{type:c,value:"以上であるかを確認するだでレイが球と衝突したかどうかを判別できることになります。これを判別式"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:aL}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:aL}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a_},children:[]},{type:a,tag:b,props:{className:[d,n],style:aW},children:[{type:c,value:aL}]}]}]}]}]},{type:c,value:cJ}]},{type:c,value:e},{type:a,tag:at,props:{className:[l,aO]},children:[{type:a,tag:b,props:{className:[aP]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z,display:aQ},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:aL}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:bQ,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:aH}]},{type:a,tag:ap,props:{},children:[{type:c,value:bb}]}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:g,props:{},children:[{type:c,value:aE}]},{type:a,tag:g,props:{},children:[{type:c,value:ba}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"D = B^2 - AC"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a_},children:[]},{type:a,tag:b,props:{className:[d,n],style:aW},children:[{type:c,value:aL}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:"height:0.9474379999999999em;vertical-align:-0.08333em;"},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n],style:bm},children:[{type:c,value:aH}]},{type:a,tag:b,props:{className:[bc]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:0.8641079999999999em;"},children:[{type:a,tag:b,props:{style:"top:-3.113em;margin-right:0.05em;"},children:[{type:a,tag:b,props:{className:[i],style:bd},children:[]},{type:a,tag:b,props:{className:[be,bf,bg,Y]},children:[{type:a,tag:b,props:{className:[d,Y]},children:[{type:c,value:bb}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a_},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:aE}]},{type:a,tag:b,props:{className:[d,n],style:bR},children:[{type:c,value:ba}]}]}]}]}]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"この判別式が"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:ap,props:{},children:[{type:c,value:ac}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:ac}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bW},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]}]}]}]}]},{type:c,value:"以上であった場合のみ、衝突位置の計算などを行います。衝突位置は、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"について解いた式に衝突時のパラメータを代入し、求まった"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"を元にレイのベクトル方程式から"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:bD}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aV},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]},{type:c,value:"を求めればよいです。このとき、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"を求めるのに使う式の"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:h,props:{},children:[{type:c,value:bF}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"\\pm"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:cK},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:bF}]}]}]}]}]},{type:c,value:cL},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:h,props:{},children:[{type:c,value:$}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"-"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:cK},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:$}]}]}]}]}]},{type:c,value:"に変更していますが、これはレイの始点から見て近いほうの共有点さえわかれば良いためです。"}]},{type:c,value:e},{type:a,tag:at,props:{className:[l,aO]},children:[{type:a,tag:b,props:{className:[aP]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z,display:aQ},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aU}]},{type:a,tag:g,props:{},children:[{type:c,value:t}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:an}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aU}]},{type:a,tag:bh,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:g,props:{},children:[{type:c,value:aH}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:cw,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:aL}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:aE}]}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:an}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:aM,props:{},children:[{type:c,value:aN}]},{type:a,tag:aM,props:{},children:[{type:c,value:aN}]},{type:a,tag:aM,props:{},children:[{type:c,value:aN}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:ak}]},{type:a,tag:g,props:{},children:[{type:c,value:aL}]},{type:a,tag:h,props:{},children:[{type:c,value:cM}]},{type:a,tag:ap,props:{},children:[{type:c,value:ac}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:al}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"\\vec{p} = \\vec{s} + t\\vec{d} = \\vec{s} + \\frac{-B-\\sqrt{D}}{A} \\vec{d} \\;\\;\\; (D \\geq 0)"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aV},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bG},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ae}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:aU}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a$},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:an}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:aT},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bG},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ae}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:aU}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:"height:2.2896650000000003em;vertical-align:-0.686em;"},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[av,bi]},children:[]},{type:a,tag:b,props:{className:[bh]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:1.6036650000000001em;"},children:[{type:a,tag:b,props:{style:bS},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:aE}]}]}]},{type:a,tag:b,props:{style:bT},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[bU],style:bV},children:[]}]},{type:a,tag:b,props:{style:"top:-3.6770000000000005em;"},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[d,n],style:bm},children:[{type:c,value:aH}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[d,cy]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:0.9266650000000001em;"},children:[{type:a,tag:b,props:{className:[cz],style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d],style:cA},children:[{type:a,tag:b,props:{className:[d,n],style:aW},children:[{type:c,value:aL}]}]}]},{type:a,tag:b,props:{style:"top:-2.886665em;"},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[cB],style:cC},children:[{type:a,tag:G,props:{width:cD,height:cE,viewBox:cF,preserveAspectRatio:cG},children:[{type:a,tag:H,props:{d:cH},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:0.11333499999999996em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:cI},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[aw,bi]},children:[]}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:an}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:aT},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[av]},children:[{type:c,value:ak}]},{type:a,tag:b,props:{className:[d,n],style:aW},children:[{type:c,value:aL}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:cM}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]},{type:a,tag:b,props:{className:[aw]},children:[{type:c,value:al}]}]}]}]}]}]},{type:c,value:e},{type:a,tag:aY,props:{id:cN},children:[{type:a,tag:w,props:{href:"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:cN}]},{type:c,value:e},{type:a,tag:aC,props:{id:bu},children:[{type:a,tag:w,props:{href:"#%E3%83%AC%E3%82%A4",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bu}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"レイを作成します。準備していおいたものを組み合わせて、以下のように記述できます。\n"},{type:a,tag:ar,props:{alt:"make ray",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fmake-ray.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:F,props:{},children:[{type:c,value:cm}]},{type:c,value:cO},{type:a,tag:F,props:{},children:[{type:c,value:co}]},{type:c,value:"から取得したカメラのグローバル座標系上の位置を内部座標系の位置に変換し、Ray の始点の位置ベクトルを作成します。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:F,props:{},children:[{type:c,value:cn}]},{type:c,value:"で、カメラ位置とオブジェクトの表面上の点の位置から、Ray の方向ベクトルを作成します。この方向ベクトルはカメラとオブジェクト上の点の相対的な位置に基づいており、グローバル座標系と内部座標系は基底が同じスケールの直交座標系であることから、座標変換を行わなくても適切な方向ベクトルを作成できます。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"これで、レイを記述する以下の式が利用できます。\n"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:bD}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aV},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]},{type:c,value:"がレイの線上で取り得る任意の点、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"\\vec{s}"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bP},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ae}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]}]}]}]}]},{type:c,value:"がレイの始点、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:an}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"\\vec{d}"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a$},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:an}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:aT},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]}]}]}]}]},{type:c,value:"がレイの方向です。\n"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"がパラメータとして変化することで、レイの線上の任意の点を指し示すことができるということです。\nまた、レイは視線と逆方向に飛ばしても意味がないので、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]},{type:a,tag:h,props:{},children:[{type:c,value:bj}]},{type:a,tag:ap,props:{},children:[{type:c,value:ac}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"t \u003E 0"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:"height:0.65418em;vertical-align:-0.0391em;"},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:bj}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bW},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]}]}]}]}]},{type:c,value:cJ}]},{type:c,value:e},{type:a,tag:at,props:{className:[l,aO]},children:[{type:a,tag:b,props:{className:[aP]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z,display:aQ},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aU}]},{type:a,tag:g,props:{},children:[{type:c,value:t}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:an}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:aM,props:{},children:[{type:c,value:aN}]},{type:a,tag:aM,props:{},children:[{type:c,value:aN}]},{type:a,tag:aM,props:{},children:[{type:c,value:aN}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:ak}]},{type:a,tag:g,props:{},children:[{type:c,value:t}]},{type:a,tag:h,props:{},children:[{type:c,value:bj}]},{type:a,tag:ap,props:{},children:[{type:c,value:ac}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:al}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:cP}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aV},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bG},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ae}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:aU}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bX},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:an}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:aT},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[av]},children:[{type:c,value:ak}]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:bj}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]},{type:a,tag:b,props:{className:[aw]},children:[{type:c,value:al}]}]}]}]}]}]},{type:c,value:e},{type:a,tag:aC,props:{id:cb},children:[{type:a,tag:w,props:{href:"#%E7%90%83%E3%81%AE%E8%A1%9D%E7%AA%81%E5%88%A4%E5%AE%9A-custom-%E3%83%8E%E3%83%BC%E3%83%89",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:cc}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"衝突判定くらいの複雑度をもつ処理になってくると、ノードで書いた際の可読性の低下が著しくなってきます。ここでは Custom ノードを用いて HLSL コードとして記述していくことにします。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"Custom ノードは以下のようなインターフェイスとしました。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"hit sphere custom",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fhit-sphere-custom.png"},children:[]}]},{type:c,value:e},{type:a,tag:aK,props:{id:bv},children:[{type:a,tag:w,props:{href:"#%E5%85%A5%E5%8A%9B",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bv}]},{type:c,value:e},{type:a,tag:az,props:{id:"rayorigin"},children:[{type:a,tag:w,props:{href:"#rayorigin",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:cQ}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"判定を行うレイの始点を示す位置ベクトル"}]},{type:c,value:e},{type:a,tag:az,props:{id:"raydirection"},children:[{type:a,tag:w,props:{href:"#raydirection",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:cR}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"判定を行うレイの方向ベクトル"}]},{type:c,value:e},{type:a,tag:az,props:{id:"tmax"},children:[{type:a,tag:w,props:{href:"#tmax",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bn}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"レイのベクトル方程式に登場した変数"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"が取り得る最大の値。\n"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"が大きくなると、レイの式はより遠くの点を示すようになります。逆に、"},{type:a,tag:F,props:{},children:[{type:c,value:bn}]},{type:c,value:cO},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"の最大値を制限すると、それよりも遠方にある衝突点には衝突しないようにすることができます。これは、一直線上に複数のオブジェクトが存在している際の、重なり処理を行うために導入しています。"}]},{type:c,value:e},{type:a,tag:az,props:{id:"center"},children:[{type:a,tag:w,props:{href:"#center",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:"Center"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"球の中心点"}]},{type:c,value:e},{type:a,tag:az,props:{id:"radius"},children:[{type:a,tag:w,props:{href:"#radius",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:"Radius"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"球の半径"}]},{type:c,value:e},{type:a,tag:aK,props:{id:bw},children:[{type:a,tag:w,props:{href:"#%E5%87%BA%E5%8A%9B",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bw}]},{type:c,value:e},{type:a,tag:az,props:{id:cS},children:[{type:a,tag:w,props:{href:"#return",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:cS}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"衝突判定を 0\u002F1 で表す\nCustom ノードはデフォルト戻り値の名称を変更できないためわかりにくくなっています。"}]},{type:c,value:e},{type:a,tag:az,props:{id:t},children:[{type:a,tag:w,props:{href:"#t",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bl}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"衝突した場合、衝突したポイントでのレイの方程式の"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"の値を返す。衝突しなかった場合、入力の"},{type:a,tag:F,props:{},children:[{type:c,value:bn}]},{type:c,value:"の値をそのまま出力する。\nこの出力を次回以降の同一レイの衝突判定では"},{type:a,tag:F,props:{},children:[{type:c,value:bn}]},{type:c,value:"として使うことで、同一レイの線上に異なる物体が発見されたとしても、より近い場所になければ判定を無視することが可能になります。"}]},{type:c,value:e},{type:a,tag:aK,props:{id:bx},children:[{type:a,tag:w,props:{href:"#%E3%82%B3%E3%83%BC%E3%83%89",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bx}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"HLSL によるコードはとても短いです。"}]},{type:c,value:e},{type:a,tag:at,props:{className:["code-extra"]},children:[{type:a,tag:at,props:{className:["filename"]},children:[{type:c,value:"HitSphere"}]},{type:a,tag:"pre",props:{},children:[{type:a,tag:F,props:{className:["language-hlsl"]},children:[{type:c,value:"float3 OC = RayOrigin - Center;\n\nfloat A = dot(RayDirection, RayDirection);\nfloat B = dot(RayDirection, OC);\nfloat C = dot(OC, OC) - pow(Radius, 2);\nfloat D = pow(B, 2) - A*C;\n\nif (D \u003E= 0) {\n  float curT = (-B - sqrt(D)) \u002F A;\n  if (curT \u003C TMax) {\n    T = curT;\n    return 1;\n  }\n}\n\nT = TMax;\nreturn  0;"}]}]}]},{type:c,value:e},{type:a,tag:aC,props:{id:by},children:[{type:a,tag:w,props:{href:"#%E8%A1%9D%E7%AA%81%E4%BD%8D%E7%BD%AE%E3%81%AE%E9%96%A2%E9%80%A3%E5%80%A4%E3%82%92%E8%A8%88%E7%AE%97",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:by}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"ひとつ上で作成した衝突判定を包む形で、関連する値を計算します。ここでは、内部座標系における衝突位置、衝突位置での球面の法線などを求めます。簡単な計算ですので、"},{type:a,tag:F,props:{},children:[{type:c,value:cT}]},{type:c,value:"というマテリアル関数にノードで実装しています。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"sphere mat func",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fsphere-mat-func.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"以下で各値の求め方を記載します。ノードはこれに対応しているだけです。"}]},{type:c,value:e},{type:a,tag:aK,props:{id:cd},children:[{type:a,tag:w,props:{href:"#hit",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bz}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"衝突判定関数の戻り値をそのまま使っているだけです。"}]},{type:c,value:e},{type:a,tag:aK,props:{id:ce},children:[{type:a,tag:w,props:{href:"#position",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:cf}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"衝突判定関数から得られた、"},{type:a,tag:F,props:{},children:[{type:c,value:bl}]},{type:c,value:"のパラメータをレイの方程式に代入することで、衝突位置を得ることができます。"}]},{type:c,value:e},{type:a,tag:at,props:{className:[l,aO]},children:[{type:a,tag:b,props:{className:[aP]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z,display:aQ},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aU}]},{type:a,tag:g,props:{},children:[{type:c,value:t}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:an}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:aM,props:{},children:[{type:c,value:aN}]},{type:a,tag:aM,props:{},children:[{type:c,value:aN}]},{type:a,tag:aM,props:{},children:[{type:c,value:aN}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:ak}]},{type:a,tag:g,props:{},children:[{type:c,value:t}]},{type:a,tag:h,props:{},children:[{type:c,value:bj}]},{type:a,tag:ap,props:{},children:[{type:c,value:ac}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:al}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:cP}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aV},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bG},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ae}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:aU}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bX},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:an}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:aT},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[av]},children:[{type:c,value:ak}]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:bj}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]},{type:a,tag:b,props:{className:[aw]},children:[{type:c,value:al}]}]}]}]}]}]},{type:c,value:e},{type:a,tag:aK,props:{id:aX},children:[{type:a,tag:w,props:{href:"#normal",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bK}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"球面上のレイ衝突点の法線ベクトルです。\n法線は面に対して垂直な直線ですから、球の場合には球の中心から球面上の点に向かうベクトルはすべて、その点での法線と同じ方向のベクトルとなります。\n正規化もしておきます。"}]},{type:c,value:e},{type:a,tag:at,props:{className:[l,aO]},children:[{type:a,tag:b,props:{className:[aP]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z,display:aQ},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:bH}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:bh,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{mathvariant:aX},children:[{type:c,value:aR}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:j}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:$}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:g,props:{mathvariant:aX},children:[{type:c,value:aR}]}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"\\vec{n} = \\frac{\\vec{p} - \\vec{c}}{\\|\\vec{p} - \\vec{c}\\|}"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bP},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:bH}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:cU},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:"height:2.327em;vertical-align:-0.936em;"},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[av,bi]},children:[]},{type:a,tag:b,props:{className:[bh]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:1.391em;"},children:[{type:a,tag:b,props:{style:bS},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d]},children:[{type:c,value:aR}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ad}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:aR}]}]}]},{type:a,tag:b,props:{style:bT},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[bU],style:bV},children:[]}]},{type:a,tag:b,props:{style:cx},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:j}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aD},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:$}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:ad}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ao},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:"height:0.936em;"},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]},{type:a,tag:b,props:{className:[aw,bi]},children:[]}]}]}]}]}]}]},{type:c,value:e},{type:a,tag:aK,props:{id:cg},children:[{type:a,tag:w,props:{href:"#t-1",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bl}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"これも衝突判定関数の戻り値をそのまま使っているだけです。"}]},{type:c,value:e},{type:a,tag:aC,props:{id:bA},children:[{type:a,tag:w,props:{href:"#%E7%B0%A1%E6%98%93%E3%82%B7%E3%82%A7%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%83%9E%E3%83%86%E3%83%AA%E3%82%A2%E3%83%AB%E3%83%9E%E3%83%86%E3%83%AA%E3%82%A2%E3%83%AB%E9%96%A2%E6%95%B0",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bA}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"ここまで作成したもので、ある視点から見たときの球の形状は判定できるようになりました。ここでは球のシェーディングマテリアルを作成していきます。\nシェーディングは二次的なレイのトレースによるものが望ましいですが、今回はライト方向と法線の内積を用いた簡易的なものにしました。\nきちんとしたレイトレースによる色付けを考える場合にはノードだと（主に繰り返し処理が）厳しいので、もっと広範囲を HLSL で記述したほうが良いと思いますが、今回は趣旨と外れるのでやめておきました。\n以下がシェーディング用の"},{type:a,tag:F,props:{},children:[{type:c,value:cV}]},{type:c,value:"マテリアル関数です。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"dot shading",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fdot-shading.png"},children:[]}]},{type:c,value:e},{type:a,tag:aK,props:{id:ch},children:[{type:a,tag:w,props:{href:"#color",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bL}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"ここでは、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:aI}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"\\vec{l}"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:a$},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n],style:cW},children:[{type:c,value:aI}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]}]}]}]}]},{type:c,value:"をライト方向として導入します。また、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:bY,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:bk}]},{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:bI}]},{type:a,tag:g,props:{},children:[{type:c,value:w}]},{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:g,props:{},children:[{type:c,value:bJ}]},{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:g,props:{},children:[{type:c,value:ay}]},{type:a,tag:g,props:{},children:[{type:c,value:aI}]},{type:a,tag:g,props:{},children:[{type:c,value:ay}]},{type:a,tag:g,props:{},children:[{type:c,value:as}]}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"P_\\mathit{basecolor}"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:cX},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n],style:bZ},children:[{type:c,value:bk}]},{type:a,tag:b,props:{className:[bc]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:b_},children:[{type:a,tag:b,props:{style:b$},children:[{type:a,tag:b,props:{className:[i],style:bd},children:[]},{type:a,tag:b,props:{className:[be,bf,bg,Y]},children:[{type:a,tag:b,props:{className:[d,Y]},children:[{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:bI}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:w}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ae}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:bJ}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ad}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ay}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:aI}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ay}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:as}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:ca},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]},{type:c,value:"はその点を塗るベースカラーです。"}]},{type:c,value:e},{type:a,tag:at,props:{className:[l,aO]},children:[{type:a,tag:b,props:{className:[aP]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z,display:aQ},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:bY,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:bk}]},{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:g,props:{},children:[{type:c,value:ay}]},{type:a,tag:g,props:{},children:[{type:c,value:aI}]},{type:a,tag:g,props:{},children:[{type:c,value:ay}]},{type:a,tag:g,props:{},children:[{type:c,value:as}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aa}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:ak}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:aI}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aS}]},{type:a,tag:J,props:{accent:f},children:[{type:a,tag:g,props:{},children:[{type:c,value:bH}]},{type:a,tag:h,props:{},children:[{type:c,value:K}]}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:al}]},{type:a,tag:bY,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:bk}]},{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:bI}]},{type:a,tag:g,props:{},children:[{type:c,value:w}]},{type:a,tag:g,props:{},children:[{type:c,value:ae}]},{type:a,tag:g,props:{},children:[{type:c,value:bJ}]},{type:a,tag:g,props:{},children:[{type:c,value:ad}]},{type:a,tag:g,props:{},children:[{type:c,value:ay}]},{type:a,tag:g,props:{},children:[{type:c,value:aI}]},{type:a,tag:g,props:{},children:[{type:c,value:ay}]},{type:a,tag:g,props:{},children:[{type:c,value:as}]}]}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"P_\\mathit{color} = (\\vec{l} \\cdot \\vec{n}) P_\\mathit{basecolor}"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:cX},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n],style:bZ},children:[{type:c,value:bk}]},{type:a,tag:b,props:{className:[bc]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:b_},children:[{type:a,tag:b,props:{style:b$},children:[{type:a,tag:b,props:{className:[i],style:bd},children:[]},{type:a,tag:b,props:{className:[be,bf,bg,Y]},children:[{type:a,tag:b,props:{className:[d,Y]},children:[{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ad}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ay}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:aI}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ay}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:as}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:ca},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:E},children:[]},{type:a,tag:b,props:{className:[am]},children:[{type:c,value:aa}]},{type:a,tag:b,props:{className:[m],style:E},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:bX},children:[]},{type:a,tag:b,props:{className:[av]},children:[{type:c,value:ak}]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:aF},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n],style:cW},children:[{type:c,value:aI}]}]}]},{type:a,tag:b,props:{style:aG},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:ax},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[m],style:I},children:[]},{type:a,tag:b,props:{className:[af]},children:[{type:c,value:aS}]},{type:a,tag:b,props:{className:[m],style:I},children:[]}]},{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[d,L]},children:[{type:a,tag:b,props:{className:[v]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:_},children:[{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:bH}]}]}]},{type:a,tag:b,props:{style:s},children:[{type:a,tag:b,props:{className:[i],style:k},children:[]},{type:a,tag:b,props:{className:[M],style:cU},children:[{type:a,tag:b,props:{className:[N],style:O},children:[{type:a,tag:G,props:{width:P,height:Q,style:R,viewBox:S,preserveAspectRatio:T},children:[{type:a,tag:H,props:{d:U},children:[]}]}]}]}]}]}]}]}]},{type:a,tag:b,props:{className:[aw]},children:[{type:c,value:al}]},{type:a,tag:b,props:{className:[d]},children:[{type:a,tag:b,props:{className:[d,n],style:bZ},children:[{type:c,value:bk}]},{type:a,tag:b,props:{className:[bc]},children:[{type:a,tag:b,props:{className:[v,ah]},children:[{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:b_},children:[{type:a,tag:b,props:{style:b$},children:[{type:a,tag:b,props:{className:[i],style:bd},children:[]},{type:a,tag:b,props:{className:[be,bf,bg,Y]},children:[{type:a,tag:b,props:{className:[d,Y]},children:[{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:bI}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:w}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ae}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:bJ}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ad}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ay}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:aI}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:ay}]},{type:a,tag:b,props:{className:[d,ab,Y]},children:[{type:c,value:as}]}]}]}]}]},{type:a,tag:b,props:{className:[ai]},children:[{type:c,value:aj}]}]},{type:a,tag:b,props:{className:[q]},children:[{type:a,tag:b,props:{className:[r],style:ca},children:[{type:a,tag:b,props:{},children:[]}]}]}]}]}]}]}]}]}]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"ただし、ノード上では陰影の濃度の調整のために少し処理を追加しています。"},{type:a,tag:F,props:{},children:[{type:c,value:cY}]},{type:c,value:"で乗算する内積値の下限を底上げしているだけですが、そのままでは内積値が負の値を持ってしまう特性で意味がなくなってしまうので、事前に"},{type:a,tag:F,props:{},children:[{type:c,value:cZ}]},{type:c,value:"しています。\n"},{type:a,tag:F,props:{},children:[{type:c,value:cZ}]},{type:c,value:"は現代の GPU ではノーコストで実行できるので、"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:c_}]},{type:a,tag:ap,props:{},children:[{type:c,value:ac}]},{type:a,tag:h,props:{separator:f},children:[{type:c,value:aZ}]},{type:a,tag:ap,props:{},children:[{type:c,value:c$}]},{type:a,tag:h,props:{stretchy:ag},children:[{type:c,value:da}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:"[0, 1]"}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:aq},children:[]},{type:a,tag:b,props:{className:[av]},children:[{type:c,value:c_}]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:ac}]},{type:a,tag:b,props:{className:[bN]},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{className:[m],style:bO},children:[]},{type:a,tag:b,props:{className:[d]},children:[{type:c,value:c$}]},{type:a,tag:b,props:{className:[aw]},children:[{type:c,value:da}]}]}]}]}]},{type:c,value:"へのクランプでは"},{type:a,tag:F,props:{},children:[{type:c,value:"clamp"}]},{type:c,value:"よりおすすめです。"}]},{type:c,value:e},{type:a,tag:aC,props:{id:bB},children:[{type:a,tag:w,props:{href:"#%E8%A4%87%E6%95%B0%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%8F%8F%E7%94%BB",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bB}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"先ほど作成した球の描画マテリアル関数を使えば、もう単一の球を描画することができます。しかし、せっかくなので複数のオブジェクトを描画できるようにしたいです。複数オブジェクト描画用のマテリアル関数を考えていきます。このマテリアル関数は"},{type:a,tag:F,props:{},children:[{type:c,value:db}]},{type:c,value:"という名称とします。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"render mat func",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Frender-mat-func.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"この関数はここまでの作業の集大成となっています。処理の流れは以下のようなものです。"}]},{type:c,value:e},{type:a,tag:"ol",props:{},children:[{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:c,value:"レイ情報("},{type:a,tag:F,props:{},children:[{type:c,value:cQ}]},{type:c,value:", "},{type:a,tag:F,props:{},children:[{type:c,value:cR}]},{type:c,value:")、ライト方向("},{type:a,tag:F,props:{},children:[{type:c,value:"LightDirection"}]},{type:c,value:")、レイの"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:"値の初期値("},{type:a,tag:F,props:{},children:[{type:c,value:bn}]},{type:c,value:")を入力として受け取る。"}]},{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:a,tag:F,props:{},children:[{type:c,value:cT}]},{type:c,value:"関数で球の衝突判定をする。"}]},{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:a,tag:F,props:{},children:[{type:c,value:cV}]},{type:c,value:"関数でシェーディングを行い、色を決定する。"}]},{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:c,value:"以上の処理を 1 単位としてカスケード接続し、衝突判定結果に応じて色とノーマルを"},{type:a,tag:F,props:{},children:[{type:c,value:"Lerp"}]},{type:c,value:"で合成、全体でのオブジェクトの衝突位置を"},{type:a,tag:F,props:{},children:[{type:c,value:cY}]},{type:c,value:"で統合する。"}]},{type:c,value:e},{type:a,tag:aB,props:{},children:[{type:c,value:"描画全体の衝突判定結果を"},{type:a,tag:F,props:{},children:[{type:c,value:bz}]},{type:c,value:"、描画結果を"},{type:a,tag:F,props:{},children:[{type:c,value:bL}]},{type:c,value:"、ノーマルの描画結果を"},{type:a,tag:F,props:{},children:[{type:c,value:bK}]},{type:c,value:"、この描画を通して得られたレイの最短衝突位置(を導ける変数)である"},{type:a,tag:b,props:{className:[l,Z]},children:[{type:a,tag:b,props:{className:[x]},children:[{type:a,tag:b,props:{className:[y]},children:[{type:a,tag:l,props:{xmlns:z},children:[{type:a,tag:A,props:{},children:[{type:a,tag:u,props:{},children:[{type:a,tag:g,props:{},children:[{type:c,value:t}]}]},{type:a,tag:B,props:{encoding:C},children:[{type:c,value:t}]}]}]}]},{type:a,tag:b,props:{className:[D],ariaHidden:f},children:[{type:a,tag:b,props:{className:[o]},children:[{type:a,tag:b,props:{className:[p],style:au},children:[]},{type:a,tag:b,props:{className:[d,n]},children:[{type:c,value:t}]}]}]}]}]},{type:c,value:cL},{type:a,tag:F,props:{},children:[{type:c,value:bl}]},{type:c,value:"として出力する。"}]},{type:c,value:e}]},{type:c,value:e},{type:a,tag:aC,props:{id:bC},children:[{type:a,tag:w,props:{href:"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E5%A4%96%E9%83%A8%E3%81%AE%E7%92%B0%E5%A2%83%E6%83%85%E5%A0%B1%E3%82%92%E5%85%A5%E5%8A%9B%E3%81%99%E3%82%8B%E3%83%9E%E3%83%86%E3%83%AA%E3%82%A2%E3%83%AB",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:bC}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"ここまでの処理はみなマテリアル関数として記述してきましたが、すでにレイトレースに必要な処理は出揃ったので、実際にオブジェクトに適用するマテリアルを作成します。このマテリアルでは、実際のライト方向やカメラ位置などの環境情報を入力します。マテリアル名は"},{type:a,tag:F,props:{},children:[{type:c,value:"RayTracing"}]},{type:c,value:"としました。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"raytracing mat",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fraytracing-mat.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"このマテリアルでの描画はマテリアルによって実装されているので、エンジンが持っているライティングによってシェーディングを受ける必要はありません。\nそのため、マテリアルの Shading Model は"},{type:a,tag:F,props:{},children:[{type:c,value:"Unlit"}]},{type:c,value:"にしてあります。\nまた、Blend Mode を"},{type:a,tag:F,props:{},children:[{type:c,value:"Masked"}]},{type:c,value:"とし、"},{type:a,tag:F,props:{},children:[{type:c,value:db}]},{type:c,value:"マテリアル関数の"},{type:a,tag:F,props:{},children:[{type:c,value:bz}]},{type:c,value:"出力を"},{type:a,tag:F,props:{},children:[{type:c,value:"Opacity Mask"}]},{type:c,value:"に入力してみました。これによって、衝突が検出されなかった場所はマスクされることになり、あたかもレイトレースで描画したオブジェクトがそこに存在するかのように見せることができます。\nその他、ノードの接続については、ここまでで解説したものを適切につなげているだけです。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"以下はマテリアルエディタ上の View で板ポリに描画された"},{type:a,tag:F,props:{},children:[{type:c,value:"Raytracing"}]},{type:c,value:"マテリアルです。"}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:a,tag:ar,props:{alt:"result view",src:"\u002Farticle-assets\u002Funrealengine\u002Fraytracing-on-a-material\u002F\u002Fresult-view.png"},children:[]}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"3 つの球があります！(板です)"}]},{type:c,value:e},{type:a,tag:aY,props:{id:dc},children:[{type:a,tag:w,props:{href:"#%E3%81%BE%E3%81%A8%E3%82%81",ariaHidden:f,tabIndex:V},children:[{type:a,tag:b,props:{className:[W,X]},children:[]}]},{type:c,value:dc}]},{type:c,value:e},{type:a,tag:j,props:{},children:[{type:c,value:"こうして作成されたマテリアルをそこらのメッシュに適用すれば、そのメッシュの輪郭の内側をスクリーンとして、実装したレイトレースによるオブジェクトを描画できます。\nどのように見えるかは、記事冒頭の動画をご参照ください。\n使いみちは不明ですが、UE のマテリアルの機能を色々使えて楽しいです。おわりです。"}]}]},dir:"\u002Farticles\u002Funrealengine",path:dd,extension:".md",createdAt:de,updatedAt:df,gitCreatedAt:de,gitUpdatedAt:df},path:dd}],fetch:{"data-v-08b63208:0":{prevTitle:bo,nextTitle:bo,existPrev:dg,existNext:dg,prevSlug:bo,nextSlug:bo,seriesPage:bo}},mutations:void 0}}("element","span","text","mord","\n","true","mi","mo","pstrut","p","height:3em;","math","mspace","mathnormal","base","strut","vlist-r","vlist","top:-3em;","t","mrow","vlist-t","a","katex","katex-mathml","http:\u002F\u002Fwww.w3.org\u002F1998\u002FMath\u002FMathML","semantics","annotation","application\u002Fx-tex","katex-html","margin-right:0.2777777777777778em;","code","svg","path","margin-right:0.2222222222222222em;","mover","⃗","accent","accent-body","overlay","height:0.714em;width:0.471em;","0.471em","0.714em","width:0.471em","0 0 471 714","xMinYMin","M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",-1,"icon","icon-link","mtight","math-inline","height:0.714em;","−","=","mathit","0","c","s","mbin","false","vlist-t2","vlist-s","​","(",")","mrel","d","left:-0.17994em;","mn","height:1em;vertical-align:-0.25em;","img","r","div","height:0.61508em;vertical-align:0em;","mopen","mclose","left:-0.15216em;","o","h4",2,"li","h2","height:0.19444em;","A","height:0.9774399999999999em;","top:-3.26344em;","B","l",3,"h3","D","mtext","  ","math-display","katex-display","block","∥","⋅","left:-0.06882999999999997em;","+","height:0.9084399999999999em;vertical-align:-0.19444em;","margin-right:0.02778em;","normal","h1",",","height:0.68333em;vertical-align:0em;","height:0.9774399999999999em;vertical-align:0em;","C","2","msupsub","height:2.7em;","sizing","reset-size6","size3","mfrac","nulldelimiter","\u003E","P","T","margin-right:0.05017em;","TMax","","レイトレーシングに使う座標系","座標変換","レイを飛ばす始点と方向","描画に必要な環境のパラメータを得る方法","球とレイの衝突判定","レイ","入力","出力","コード","衝突位置の関連値を計算","Hit","簡易シェーディングマテリアルマテリアル関数","複数オブジェクトの描画","実際に外部の環境情報を入力するマテリアル","\\vec{p}","br","±","height:0.79733em;vertical-align:-0.08333em;","n","b","e","Normal","Color","ul","mpunct","margin-right:0.16666666666666666em;","height:0.714em;vertical-align:0em;","msup","margin-right:0.07153em;","top:-2.314em;","top:-3.23em;","frac-line","border-bottom-width:0.04em;","height:0.64444em;vertical-align:0em;","height:1.2274399999999999em;vertical-align:-0.25em;","msub","margin-right:0.13889em;","height:0.33610799999999996em;","top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;","height:0.15em;","球の衝突判定-custom-ノード","球の衝突判定 Custom ノード","hit","position","Position","t-1","color","はじめに","趣旨","環境","作成に用いる考えと準備","ToRTSpace","CreateRayDirection","Camera Position","nofollow","noopener","noreferrer","_blank","height:0.43056em;vertical-align:0em;","margin: 0 25px"," ","msqrt","top:-3.677em;","sqrt","svg-align","padding-left:0.833em;","hide-tail","min-width:0.853em;height:1.08em;","400em","1.08em","0 0 400000 1080","xMinYMin slice","M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z","height:0.686em;","とします。","height:0.66666em;vertical-align:-0.08333em;","を","≥","実際に作成する","で","\\vec{p} = \\vec{s} + t\\vec{d} \\;\\;\\; (t \u003E 0)","RayOrigin","RayDirection","return","Sphere","left:-0.2355em;","DotShading","margin-right:0.01968em;","height:0.83333em;vertical-align:-0.15em;","Add","saturate","[","1","]","Render","まとめ","\u002Farticles\u002Funrealengine\u002Fraytracing-on-a-material","2022-01-31T07:18:53.000Z","2022-01-31T07:52:29.000Z",false)));